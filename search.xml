<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[科学上网]]></title>
    <url>%2F2019%2F04%2F17%2F%E5%B7%A5%E5%85%B7%2F%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91%2F</url>
    <content type="text"><![CDATA[1 下载shadowsocks官方下载地址 android 在没有翻墙情况下 可以从github中下载app shadowsocks github下载地址 IOS shadowsocks 2 配置免费提供账号免费账号 https://free-ss.tk/ 自己搭建的 服务器 账号 暂不提供]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>vpn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SeverLauncher]]></title>
    <url>%2F2019%2F04%2F17%2Fandroid%2Fresearch%2FSeverLauncher%2F</url>
    <content type="text"><![CDATA[无意间发现 开源中国中有人回复 看见 以前的文章就想整理下 这是一份 2013年 创维 研究服务器自定义Launcher 时候调研 的 文章 一直在有道笔记 原理app 从服务器端获取 数据 通过数据 绘制控件 大小 以及位置 和点 击 跳转 服务器 与 客户端 统一一套协议 例子 左上角 logo &quot;logo&quot;: { &quot;background_url&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=logo%20png&amp;ie=utf-8&amp;fr=result&amp;url=http%3A%2F%2Fimg.article.pchome.net%2F00%2F37%2F47%2F30%2Fpic_lib%2Fs960x639%2F0e80039f04ea6106487069a0ffc82a8es960x639.JPG&quot;, &quot;hasFocus&quot;: false, &quot;height&quot;: 50, &quot;width&quot;: 50, &quot;x&quot;: 50, &quot;y&quot;: 30 }, 注释background_url 为空 加载 apk默认的logo 右上角 网络状态 &quot;network&quot;: { &quot;hasFocus&quot;: false, &quot;height&quot;: 0, &quot;width&quot;: 0, &quot;x&quot;: 1100, &quot;y&quot;: 40 }, 右上角 时间 &quot;timeEntity&quot;: { &quot;textSize&quot;: 16, &quot;timeType&quot;: 12, &quot;hasFocus&quot;: false, &quot;height&quot;: 0, &quot;width&quot;: 0, &quot;x&quot;: 1150, &quot;y&quot;: 40 } Title &quot;arrayTitle&quot;: [ { &quot;text&quot;: &quot;电视&quot;, &quot;position&quot;: 1, &quot;textSize&quot;: 25, &quot;hasFocus&quot;: false, &quot;height&quot;: 50, &quot;width&quot;: 100, &quot;x&quot;: 350, &quot;y&quot;: 650 }, { &quot;text&quot;: &quot;设置&quot;, &quot;position&quot;: 2, &quot;textSize&quot;: 25, &quot;hasFocus&quot;: false, &quot;height&quot;: 50, &quot;width&quot;: 100, &quot;x&quot;: 500, &quot;y&quot;: 650 }, { &quot;text&quot;: &quot;新闻&quot;, &quot;position&quot;: 3, &quot;textSize&quot;: 25, &quot;hasFocus&quot;: false, &quot;height&quot;: 50, &quot;width&quot;: 100, &quot;x&quot;: 650, &quot;y&quot;: 650 }, { &quot;text&quot;: &quot;用户&quot;, &quot;position&quot;: 4, &quot;textSize&quot;: 25, &quot;hasFocus&quot;: false, &quot;height&quot;: 50, &quot;width&quot;: 100, &quot;x&quot;: 800, &quot;y&quot;: 650 } ], 中间tab &quot;arrTab&quot;: [ [{ &quot;name&quot;: &quot;电视&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=icon png&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.icosky.com/icon/png/System/Candied Apples/Candy Apple Red 2.png&quot;, &quot;action&quot;: &quot;com.kylin.action&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 11, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 12, &quot;NextFocusLeftId&quot;: -1, &quot;NextFocusDownId&quot;: 15, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 250, &quot;x&quot;: 50, &quot;y&quot;: 20 }, { &quot;name&quot;: &quot;TV&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=icon png&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.sucaitianxia.com/png/UploadFiles_6130/200807/20080702002356141.png&quot;, &quot;action&quot;: &quot;com.kylin.action&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 12, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 13, &quot;NextFocusLeftId&quot;: 11, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 250, &quot;x&quot;: 300, &quot;y&quot;: 20 }, { &quot;name&quot;: &quot;歌华有线&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=png å°å¾&amp;ie=utf-8&amp;fr=result&amp;url=http://img.sj33.cn/uploads/allimg/201009/20100918144426835.png&quot;, &quot;action&quot;: &quot;com.kylin.action&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 13, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 14, &quot;NextFocusLeftId&quot;: 12, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 250, &quot;x&quot;: 550, &quot;y&quot;: 20 }, { &quot;name&quot;: &quot;百事通&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=png å°å¾&amp;ie=utf-8&amp;fr=result&amp;url=http://p1.qqyou.com/pic/uploadpic/2011-4/201143921218128.png&quot;, &quot;action&quot;: &quot;com.kylin.action&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 14, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: -1, &quot;NextFocusLeftId&quot;: 13, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 250, &quot;x&quot;: 800, &quot;y&quot;: 20 }, { &quot;name&quot;: &quot;回看&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=icon png&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.icosky.com/icon/png/System/Candied Apples/Candy Apple Red 2.png&quot;, &quot;action&quot;: &quot;com.kylin.action&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 15, &quot;NextFocusUpId&quot;: 11, &quot;NextFocusRightId&quot;: -1, &quot;NextFocusLeftId&quot;: -1, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 250, &quot;x&quot;: 50, &quot;y&quot;: 250 } ], [{ &quot;name&quot;: &quot;设置&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=icon png&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.icosky.com/icon/png/System/Candied Apples/Candy Apple Red 2.png&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 50, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 51, &quot;NextFocusLeftId&quot;: -1, &quot;NextFocusDownId&quot;: 52, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 250, &quot;x&quot;: 50, &quot;y&quot;: 20 }, { &quot;name&quot;: &quot;TV&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=icon png&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.icosky.com/icon/png/System/Candied Apples/Candy Apple Red 2.png&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 51, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: -1, &quot;NextFocusLeftId&quot;: 50, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 850, &quot;x&quot;: 350, &quot;y&quot;: 20 }, { &quot;name&quot;: &quot;回看&quot;, &quot;image_icon&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=icon png&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.icosky.com/icon/png/System/Candied Apples/Candy Apple Red 2.png&quot;, &quot;image_content&quot;: &quot;&quot;, &quot;id&quot;: 52, &quot;NextFocusUpId&quot;: 50, &quot;NextFocusRightId&quot;: 51, &quot;NextFocusLeftId&quot;: -1, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 250, &quot;width&quot;: 250, &quot;x&quot;: 50, &quot;y&quot;: 250 }, { &quot;image_content&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=å¹¿å&amp;ie=utf-8&amp;fr=result&amp;url=http://pic17.nipic.com/20111030/178350_181133315001_2.jpg&quot;, &quot;id&quot;: 53, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: -1, &quot;NextFocusLeftId&quot;: -1, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 0, &quot;hasFocus&quot;: false, &quot;height&quot;: 250, &quot;width&quot;: 600, &quot;x&quot;: 300, &quot;y&quot;: 250 } ], [{ &quot; nameBg&quot;: &quot;#CC000000&quot;, //-------------------文字背景色 &quot;name&quot;: &quot;匆匆那些年&quot;, &quot;image_content&quot;: &quot; http://f.hiphotos.baidu.com/baike/c0=baike116,5,5,116,38/sign=82e87630262dd42a4b0409f9625230d0/96dda144ad345982e775c6cb0ff431adcaef84ef.jpg&quot;, &quot;id&quot;: 50, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 51, &quot;NextFocusLeftId&quot;: -1, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 550, &quot;width&quot;: 750, &quot;x&quot;: 20, &quot;y&quot;: 20 }, { &quot;nameBg&quot;: &quot;#CC000000&quot;, &quot;name&quot;: &quot;重返地球&quot;, &quot;image_content&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=çµå½±æµ·æ¥å¾&amp;ie=utf-8&amp;fr=result&amp;url=http://down1.sucaitianxia.com/psd02/psd179/psds36925.jpg&quot;, &quot;id&quot;: 51, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 52, &quot;NextFocusLeftId&quot;: 50, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 550, &quot;width&quot;: 300, &quot;x&quot;: 730, &quot;y&quot;: 20 }, { &quot;nameBg&quot;: &quot;#CC000000&quot;, &quot;name&quot;: &quot;银河护卫队&quot;, &quot;image_content&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=çµå½±&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.ln.chinanews.com/UploadFiles/2014/8/201408051648340612.jpg&quot;, &quot;id&quot;: 52, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: -1, &quot;NextFocusLeftId&quot;: 51, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 550, &quot;width&quot;: 250, &quot;x&quot;: 1000, &quot;y&quot;: 20 } ], [{ &quot;nameColor&quot;: &quot;#000080&quot;, &quot;nameBg&quot;: &quot;#CC000000&quot;, &quot;name&quot;: &quot;魁拔&quot;, &quot;image_content&quot;: &quot; http://e.hiphotos.baidu.com/baike/c0=baike272,5,5,272,90/sign=e0e4cc8f39292df583cea447dd583705/838ba61ea8d3fd1f353eab9a334e251f95ca5f5e.jpg&quot;, &quot;id&quot;: 50, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 51, &quot;NextFocusLeftId&quot;: -1, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 550, &quot;width&quot;: 250, &quot;x&quot;: 30, &quot;y&quot;: 20 }, { &quot;nameColor&quot;: &quot;#000080&quot;, &quot;nameBg&quot;: &quot;#33FF0000&quot;, &quot;name&quot;: &quot;天降雄狮&quot;, &quot;image_content&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=å¤©ééç®&amp;ie=utf-8&amp;fr=result&amp;url=http://f.hiphotos.baidu.com/zhidao/pic/item/dcc451da81cb39dbfb89d81ed3160924ab183028.jpg&quot;, &quot;id&quot;: 51, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: 52, &quot;NextFocusLeftId&quot;: 50, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 550, &quot;width&quot;: 300, &quot;x&quot;: 250, &quot;y&quot;: 20 }, { &quot;nameBg&quot;: &quot;#33000000&quot;, &quot;name&quot;: &quot;中国合伙人&quot;, &quot;image_content&quot;: &quot; http://image.baidu.com/i?tn=download&amp;ipn=dwnl&amp;word=ä¸­å½åä¼äºº&amp;ie=utf-8&amp;fr=result&amp;url=http:// www.lizhi123.net/uploads/allimg/130525/4_130525175139_1.png&quot;, &quot;id&quot;: 52, &quot;NextFocusUpId&quot;: -1, &quot;NextFocusRightId&quot;: -1, &quot;NextFocusLeftId&quot;: 51, &quot;NextFocusDownId&quot;: -1, &quot;nameSize&quot;: 25, &quot;hasFocus&quot;: true, &quot;height&quot;: 550, &quot;width&quot;: 800, &quot;x&quot;: 520, &quot;y&quot;: 20 } ] ] “nameColor”: “#000080”, ——文字的颜色“nameBg”: “#CC000000”, —— 文字背景颜色“name”: “魁拔”,“image_content”: “ http://e.hiphotos.baidu.com/baike/c0 %3Dbaike272%2C5%2C5%2C272%2C90/sign=e0e4cc8f39292df583cea447dd583705/838ba61ea8d3fd1f353eab9a334e251f95ca5f5e.jpg”,“id”: 50,“NextFocusUpId”: -1,“NextFocusRightId”: 51,“NextFocusLeftId”: -1,“NextFocusDownId”: -1,“nameSize”: 25,“hasFocus”: true,“height”: 550,“width”: 250,“x”: 30,“y”: 20 “nameColor”: “#000080”, ——文字的颜色“nameBg”: “#CC000000”, —— 文字背景颜色image_content —– 底图url“nameSize”: 25, —-文字大小 image_icon —– icon url &quot;id&quot;: 50, //----每个view对于的id &quot;NextFocusUpId&quot;: -1, //---- 当前view 向上 view的id &quot;NextFocusRightId&quot;: 51, //---- 当前view 向右 view的id &quot;NextFocusLeftId&quot;: -1, //---- 当前view 向左 view的id &quot;NextFocusDownId&quot;: -1, //---- 当前view 向下 view的id 这几个控制 TV 的焦点跳转 -1 不能跳转NextFocusRightId 当焦点位于该控件 点击 右 焦点 跳转到 id为51 的控件上 android 源码 找不到了当年放在 taobaosvn上http://code.taobao.org/]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 8.0变更]]></title>
    <url>%2F2019%2F04%2F17%2Fandroid%2Fbase%2Fandroid%208.0%E5%8F%98%E6%9B%B4%2F</url>
    <content type="text"><![CDATA[参考 1 Downloadable Fonts您可以使用可下载字体功能在以下几个方面： 使用Android Studio和谷歌播放服务 编程 通过支持库 2 Fonts in XMLWebView控件功能强大，除了具有一般View的属性和设置外，还可以对url请求、页面加载、渲染、页面交互进行强大的处理。 3 使用介绍 Webview自身的常见方法； Webview的最常用的子类 （WebSettings类、WebViewClient类、WebChromeClient类) Android和Js的交互 3.1 Webview自身的常见方法 3.1.1 WebView的状态 1234567891011121314151617181920//激活WebView为活跃状态，能正常执行网页的响应webView.onResume() ；//当页面被失去焦点被切换到后台不可见状态，需要执行onPause//通过onPause动作通知内核暂停所有的动作，比如DOM的解析、plugin的执行、JavaScript执行。webView.onPause()；//当应用程序(存在webview)被切换到后台时，这个方法不仅仅针对当前的webview而是全局的全应用程序的webview//它会暂停所有webview的layout，parsing，javascripttimer。降低CPU功耗。webView.pauseTimers()//恢复pauseTimers状态webView.resumeTimers()；//销毁Webview//在关闭了Activity时，如果Webview的音乐或视频，还在播放。就必须销毁Webview//但是注意：webview调用destory时,webview仍绑定在Activity上//这是由于自定义webview构建时传入了该Activity的context对象//因此需要先从父容器中移除webview,然后再销毁webview:rootLayout.removeView(webView); webView.destroy(); 3.1.2 关于前进 / 后退网页 12345678910111213//是否可以后退Webview.canGoBack() //后退网页Webview.goBack()//是否可以前进 Webview.canGoForward()//前进网页Webview.goForward()//以当前的index为起始点前进或者后退到历史记录中指定的steps//如果steps为负数则为后退，正数则为前进Webview.goBackOrForward(intsteps) 运用 activity back 12345678910111213141516171819@Overridepublic boolean onKeyDown(int keyCode, KeyEvent event) &#123; if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) &#123; setWebViewGoBack(); return true; &#125; return false;&#125;/** * 设置webView 后退 */private void setWebViewGoBack() &#123; if (mWebview.canGoBack()) &#123; mWebview.goBack(); &#125; else &#123; finish(); &#125;&#125; 3.1.3 清除缓存数据 12345678910//清除网页访问留下的缓存//由于内核缓存是全局的因此这个方法不仅仅针对webview而是针对整个应用程序.Webview.clearCache(true);//清除当前webview访问的历史记录//只会webview访问历史记录里的所有记录除了当前访问记录Webview.clearHistory()；//这个api仅仅清除自动完成填充的表单数据，并不会清除WebView存储到本地的数据Webview.clearFormData()； 3.2 常用类 3.2.1 WebSettings类 配置步骤1：添加访问网络权限（AndroidManifest.xml）1&lt;uses-permission android:name="android.permission.INTERNET"/&gt; 配置步骤2：生成一个WebView组件（有两种方式）12345//方式1：直接在在Activity中生成WebView webView = new WebView(this)//方法2：在Activity的layout文件里添加webview控件：WebView webview = (WebView) findViewById(R.id.webView1); 配置步骤3：进行配置-利用WebSettings子类（常见方法） 123456789101112131415161718192021222324//声明WebSettings子类WebSettings webSettings = webView.getSettings();//如果访问的页面中要与Javascript交互，则webview必须设置支持JavascriptwebSettings.setJavaScriptEnabled(true); //支持插件webSettings.setPluginsEnabled(true); //设置自适应屏幕，两者合用webSettings.setUseWideViewPort(true); //将图片调整到适合webview的大小 webSettings.setLoadWithOverviewMode(true); // 缩放至屏幕的大小//缩放操作webSettings.setSupportZoom(true); //支持缩放，默认为true。是下面那个的前提。webSettings.setBuiltInZoomControls(true); //设置内置的缩放控件。若为false，则该WebView不可缩放webSettings.setDisplayZoomControls(false); //隐藏原生的缩放控件//其他细节操作webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //关闭webview中缓存 webSettings.setAllowFileAccess(true); //设置可以访问文件 webSettings.setJavaScriptCanOpenWindowsAutomatically(true); //支持通过JS打开新窗口 webSettings.setLoadsImagesAutomatically(true); //支持自动加载图片webSettings.setDefaultTextEncodingName("utf-8");//设置编码格式 常见用法：设置WebView缓存 当加载 html 页面时，WebView会在/data/data/包名目录下生成 database 与 cache 两个文件夹 请求的 URL记录保存在 WebViewCache.db，而 URL的内容是保存在 WebViewCache 文件夹下 是否启用缓存 12345678910//优先使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //缓存模式如下： //LOAD_CACHE_ONLY: 不使用网络，只读取本地缓存数据 //LOAD_DEFAULT: （默认）根据cache-control决定是否从网络上取数据。 //LOAD_NO_CACHE: 不使用缓存，只从网络获取数据. //LOAD_CACHE_ELSE_NETWORK，只要本地有，无论是否过期，或者no-cache，都使用缓存中的数据。//不使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); 结合使用（离线加载) 1234567891011121314if (NetStatusUtil.isConnected(getApplicationContext())) &#123; webSettings.setCacheMode(WebSettings.LOAD_DEFAULT); //根据cache-control决定是否从网络上取数据。&#125; else &#123; webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //没网，则从本地获取，即离线加载&#125;webSettings.setDomStorageEnabled(true); // 开启 DOM storage API 功能webSettings.setDatabaseEnabled(true); //开启 database storage API 功能webSettings.setAppCacheEnabled(true);//开启 Application Caches 功能String cacheDirPath = getFilesDir().getAbsolutePath() + APP_CACAHE_DIRNAME;webSettings.setAppCachePath(cacheDirPath); //设置 Application Caches 缓存目录 注意： 每个 Application 只调用一次 WebSettings.setAppCachePath()，WebSettings.setAppCacheMaxSize() 3.2.2 WebViewClient类 作用：处理各种通知 &amp; 请求事件 常见方法： 常见方法1：shouldOverrideUrlLoading() 作用：打开网页时不调用系统浏览器， 而是在本WebView中显示；在网页上的所有加载都经过这个方法,这个函数我们可以做很多操作。123456789101112131415161718192021//步骤1. 定义Webview组件Webview webview = (WebView) findViewById(R.id.webView1);//步骤2. 选择加载方式 //方式1. 加载一个网页： webView.loadUrl("http://www.google.com/"); //方式2：加载apk包中的html页面 webView.loadUrl("file:///android_asset/test.html"); //方式3：加载手机本地的html页面 webView.loadUrl("content://com.android.htmlfileprovider/sdcard/test.html");//步骤3. 复写shouldOverrideUrlLoading()方法，使得打开网页时不调用系统浏览器， 而是在本WebView中显示 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean shouldOverrideUrlLoading(WebView view, String url) &#123; view.loadUrl(url); return true; &#125; &#125;); 常见方法2：onPageStarted() 作用：开始载入页面调用的，我们可以设定一个loading的页面，告诉用户程序在等待网络响应。123456webView.setWebViewClient(new WebViewClient()&#123; @Override public void onPageStarted(WebView view, String url, Bitmap favicon) &#123; //设定加载开始的操作 &#125; &#125;); 常见方法3：onPageFinished() 作用：在页面加载结束时调用。我们可以关闭loading 条，切换程序动作。123456789 /** * 在页面加载结束时调用。 */@Overridepublic void onPageFinished(WebView view, String url) &#123; //设定加载结束的操作 mProgressBar.setVisibility(View.GONE);&#125; 常见方法4：onLoadResource() 作用：在加载页面资源时会调用，每一个资源（比如图片）的加载都会调用一次。123456 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean onLoadResource(WebView view, String url) &#123; //设定加载资源的操作 &#125;&#125;); 常见方法5：onReceivedError（） 作用：加载页面的服务器出现错误时（如404）调用。 App里面使用webview控件的时候遇到了诸如404这类的错误的时候，若也显示浏览器里面的那种错误提示页面就显得很丑陋了，那么这个时候我们的app就需要加载一个本地的错误提示页面，即webview如何加载一个本地的页面 12345678910111213141516//步骤1：写一个html文件（error_handle.html），用于出错时展示给用户看的提示页面//步骤2：将该html文件放置到代码根目录的assets文件夹下//步骤3：复写WebViewClient的onRecievedError方法//该方法传回了错误码，根据错误类型可以进行不同的错误分类处理 webView.setWebViewClient(new WebViewClient()&#123; @Override public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)&#123;switch(errorCode) &#123; case HttpStatus.SC_NOT_FOUND: view.loadUrl("file:///android_assets/error_handle.html"); break; &#125; &#125; &#125;); 常见方法6：onReceivedSslError() 作用：处理https请求webView默认是不处理https请求的，页面显示空白，需要进行如下设置：12345678webView.setWebViewClient(new WebViewClient() &#123; @Override public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) &#123; handler.proceed(); //表示等待证书响应 // handler.cancel(); //表示挂起连接，为默认方式 // handler.handleMessage(null); //可做其他处理 &#125; &#125;); 3.2.3 WebChromeClient类 作用：辅助 WebView 处理 Javascript 的对话框,网站图标,网站标题等等。常见使用： 常见方法1： onProgressChanged（） 作用：获得网页的加载进度并显示 12345678910webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onProgressChanged(WebView view, int newProgress) &#123; if (newProgress &lt; 100) &#123; String progress = newProgress + "%"; progress.setText(progress); &#125; else &#123; &#125; &#125;&#125;); 常见方法2： onReceivedTitle（） 作用：获取Web页中的标题 1234567webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onReceivedTitle(WebView view, String title) &#123; titleview.setText(title)； &#125;&#125;); 3.3 WebView与JS的交互参考 3.4 注意事项：如何避免WebView内存泄露？ 3.4.1 不在xml中定义 Webview ，而是在需要的时候在Activity中创建，并且Context使用 getApplicationgContext() 1234LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);mWebView = new WebView(getApplicationContext());mWebView.setLayoutParams(params);mLayout.addView(mWebView); 3.4.2 在 Activity 销毁（ WebView ）的时候，先让 WebView 加载null内容，然后移除 WebView，再销毁 WebView，最后置空。 123456789101112@Overrideprotected void onDestroy() &#123; if (mWebView != null) &#123; mWebView.loadDataWithBaseURL(null, "", "text/html", "utf-8", null); mWebView.clearHistory(); ((ViewGroup) mWebView.getParent()).removeView(mWebView); mWebView.destroy(); mWebView = null; &#125; super.onDestroy();&#125; 参考]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android 8.0</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[工作任务]]></title>
    <url>%2F2019%2F04%2F17%2FWork%2F%E5%B7%A5%E4%BD%9C%E4%BB%BB%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[工作任务2019-02-15 任务 内容 是否完成 支付功能vue国际化 YES 修改崩溃 Only fullscreen opaque activities can request orientation YES 添加 bugly 统计 统计上海测试(不是google 平台安装 google play 不方便) 统计NDK YES 修改 V2.3.6 bug YES 2019-03-26 任务 内容 是否完成 组网优化 协议配置设备信息 OK]]></content>
      <categories>
        <category>Work</category>
      </categories>
      <tags>
        <tag>Work</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LifeHome 推送]]></title>
    <url>%2F2019%2F04%2F17%2FWork%2FLifeHome%E6%8E%A8%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[LifeHome google GCM 推送 相关配置 send id 2926…5863 服务器密钥 AAAARCNmpgc:APA9…W-dWWy Push plugin - 推送插件 iosPushServiceHelper 参数 类型 说明 success callback 无 无 error callback 无 无 registerGCM 注册 GCM push - only android 参数 类型 说明 PROJECT_ID String GCM sendid success callback success.GCMToken 为 GCMToken error callback 注册失败 信息 registerUmeng 注册 Umeng push - only android 参数 类型 说明 username String 账号email appType String app 类型（life / snap） success callback 注册成功 callback error callback 注册失败 callback registerNotifyHook 注册 notify 回调 启动app 推送 等信息 - only android 参数 类型 说明 username String 账号email appType String app 类型（life / snap） success callback 注册成功 callback success.EventType 为 事件类型 （gotoMD）success.devicesId 为 设备id || error | callback | 注册失败 callback | unregisterPush 注销 推送 umeng - only android 参数 类型 说明 username String 账号email appType String app 类型（life / snap） success callback 注册成功 callback error callback 注册失败 callback]]></content>
      <categories>
        <category>Work</category>
      </categories>
      <tags>
        <tag>Work</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[教育 - 03]]></title>
    <url>%2F2019%2F04%2F17%2FShare%2Fed_03%2F</url>
    <content type="text"><![CDATA[不要溺爱123456789101112爱需要正确方式，千万别溺爱。在现在的中国到处可见，拼爹时代，有关系的，还没毕业就已经安排好工作了。在过年回家的火车上，一个孩子对着爸爸喊 你给我滚妈妈立即制止，训斥。爸爸回来依旧溺爱。 不要攀比，付出才会有收货1234567891011121314151617181920212223242526272829在我记忆中，很小的时候过年就没给过红包了。我小时候刚刚开始给父母干活是有钱的，赚取零花钱还是挺开心的。18年10月给我妹妹 安排个任务自己每天学会4个单词教妈妈写几个词 就可以获得3块钱如果养只狗，可以给零食 给狗吃。结果妈妈不愿配合，小燕子不主动，每次都要催。工作一忙没问，就没下文了。明天2.14安排的卖花的任务，不知道她会完成的如何。我不知道该不该，跟在后面看看，拍个视频记录下。他们自己去卖花，或许更好吧。结果卖花变成送花了，还是没有锻炼沟通能力。]]></content>
      <categories>
        <category>Share</category>
      </categories>
      <tags>
        <tag>教育</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[教育 - 02]]></title>
    <url>%2F2019%2F04%2F17%2FShare%2Fed_02%2F</url>
    <content type="text"><![CDATA[不要把情绪带回家123456789101112无论工作，或者事业遇到多大的事情。不要把情绪带到家里。你的情绪不仅影响家人的情绪，如果经常出现负面情绪会影响孩子的成长。我们上一代出现文化断层我这这一代基本在 简单、粗暴的家庭环境下长大的。父母吵架，家人喝多了的场景应该都经历过。遇见过那就想想如何避免这样的问题，如果没有遇见过，恭喜你有个好父母。赶紧去取点经吧。 123456789101112本来计划今天(2019-02-04 农历三十)上午回家祭祖，早上起来吃饭的时候，父亲由于工作郁闷，大早上再喝闷酒，结果喝多了。开始发酒疯，话特别多。抱怨自己解决了什么难题，没有收到公正的对待。最后我和妈妈一致让爸爸不要回去祭祖了。我和小燕子一起回去祭祖。我给小燕子的任务是拍照记录下所有的墓碑，晚上回去梳理下。 我不知道父亲这么多年的负面情绪，对小燕子的影响有多大。 但是我很多无意识的行为，感谢都很像父亲。如叹气 123456789101112131415有时候和妈妈视频聊天的时候，无意识的叹了口气，长长的一声 哎!妈妈经常说年轻人叹什么气，爷爷再的时候，是不准叹气的。这样的叹气，有时候我自己都没意识到，就很习惯的做了。非常像爸爸喝多了，在那边抱怨，他很烦抱怨的时候经常叹气。 从家人口中了解的爷爷，应该是一个了不起的角色。之前是地主，文革被打压。后教书，收一干儿子。 12345678910111213141516171819202122232425262728这些年，很多事情，是由姑公帮忙。遇到大事，父亲就会找那个传说中干兄弟。我小时候拜年的时候，就经常听父亲吹牛。这个干兄弟，怎么怎么。无语啊，小地方思维方式比孩子(成绩，工作，婚姻)，比关系，别人的牛掰之处，都能往自己脸上贴金。我感觉教育在我父辈这一代就出现断层了爷爷开始是地主，后来教书。 文化程度应该不低。在文革那样的逆境中还能发现人才培养人才。足见其识人的眼光，以及他的品性。那个时代中国文化大断层，没想到家庭内部教育也收到波及。我一直认为家庭教育，是言传身教的。不会收到影响的，看来我错了。其中原因我不是很清楚。 在家人身上千万别吝啬在老家祭祖完毕，贴完对联后。在车上我就和小燕子讨论过，新沙发是否到了。晚上是不是可以睡在新沙发上面。 到家后，新沙发真的已经到了。小燕子特别喜欢。特别高兴。晚上睡觉的时候，她把被子铺的好好的准备睡在沙发上。 123456789101112131415161718192021买沙发是回家第二天，四个一起去买的。东西都是小燕子 自己挑选的。其他妈妈很早就想买了，之前父亲会说，家里沙发可以用，等儿子结婚再买。家里热水器有问题，妈妈换个,父亲一直没有行动。父亲其实特别节省 舍不得花钱的人，不好听的话应该是特别吝啬的人。2018年带着妹妹去北京看病，竟然买两个坐票。刚刚开始不知道，刚刚来北京还带着去动物园。我很纳闷怎么不补个卧铺，那时候不是高峰，绝对可以补到票的。 你自己可以省点，但是你在家人身上请不要吝啬。 自主能力我昨天安排的任务，每天写日记。今天回家祭祖，晚上也整理了下，祖辈关系。我一直在等，小燕子会不会主动些日记。结果等到11点多感觉快睡觉了，她把被子铺在沙发上，准备睡觉。今天晚上她应该不会写了。 看来小燕子的自主能力不是太好，虽然今天是大年三十，但是这个是昨天安排的任务。 或许是忘了，不知道明天她会不会想起来主动写了。 不知道有什么其他方面没有？或许可以从兴趣，和环境入手。 待更新//TODO]]></content>
      <categories>
        <category>Share</category>
      </categories>
      <tags>
        <tag>教育</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[教育 - 01]]></title>
    <url>%2F2019%2F04%2F17%2FShare%2Fed_01%2F</url>
    <content type="text"><![CDATA[教育教育很深奥我感觉我没资格谈论 他的影响更是无可估计的影响的名族的兴衰国家的存亡 12春节回家 前就想改变下 我妹妹的习惯我妹妹今年11岁 六年级 习惯 - 写日记希望给我妹妹培养一个 写日记的好习惯 123456789101112我记得我小学的时候老师也想培养我们写日记的习惯,我刚刚开始一直坚持着，但是初中的时候，发现父亲偷看我日记。偷看就算了还当着别人面前说。我又一次是在忍不了,就跑到楼顶，一页页翻看这自己的日记，一页页的烧。之后再也不写了。回想起来，小学老师培养我们写日志，高中老师重新捡起日记话题，改为周记。后来才知道，鲁迅 老舍 他们都有些日记的习惯。我更加坚信我的想法 我昨天晚上(2019-02-02 23:00 农历二十八)到家的又把写日记的事情说了 我建议 给她的写法是 要写今天的事情 以及感受 写下明天打算做什么 要准备什么 给她看了下我的日记模板 1234每页 第三个格子处 画个分界线 竖着 滑到底分界线 左侧 写摘要 右侧写日记 思维方式2019-02-03 早上起床本来是回家祭祖的但是父亲 回来 说不去 明天去 我就带着妹妹去买笔记本 边走边聊天 我会刻意的 以讲故事的方式 问她对一些事情的看法与见解 如 1234农夫与蛇 的故事乞丐 与 施舍者 ( 施舍者 施舍2元一直保持一年，之后施舍结婚了，改施舍一元，乞丐就不高兴了 ) 或许 书本上教孩子都是 对错 善恩其实 是 可以换个角度 1234567891011121314151617181920农夫 善 没错，农夫 错误判断 导致自己死了1. 蛇是冷血动物 会冬眠的， 救的方式不对 (可以挖个坑让蛇在地下好好冬眠)2. 自认为 是救 其实是害 （蛇有自己的习性，你救它，它醒了，蛇把农夫吃了，又要天气寒冷，蛇还需要冬眠，让蛇重复冬眠。这样就会破坏蛇的生活习性。）3. 把自己置于危险而不自知 (蛇苏醒之后会急需能量补充的，面前就有现成的。)乞丐 与 施舍者我妹妹 还没想明白其实怎么做帮助对方而且对自己有利是有点困难 对于这样的小学生包括显示生活中 我们这样成年人 都很难做到授人以鱼不如授人以渔你施舍它一辈子，这个乞丐还是乞丐。教他写谋生技能，才是长远之计。但是 对方要是扶不起的阿斗，已经帮过，就结束吧，用佛家一句话 缘分已尽。 行动教育你的一言一行，影响孩子的言行。 123456789101112131415161718192021222324252627今天上午买完本子就去妈妈工作的宾馆，帮忙叠了下被子。本来想跌完被子就去看沙发，妈妈嫌弃我头发太长了非要我去理发农历二十九理发不太好我想年后在理。架不住妈妈的说，最后放弃了。妈妈问我是去水芹姑屋(亲戚家理发店)，还是哪里。我选择后者，但是地方妈妈说了好多遍我就是不知道，只好带我们去。然后再回宾馆忙。到了之后发现这家挺简陋的，而且是在小巷子深处，这家前面还有一家理发店，这里没有扫码支付。当我理完发我掏出50给他，我就打算走，对方到这零钱冲出来了。我不会手语，我就再次掏出手机，写了两句话。五块钱我收了你找过钱了剩下的给你 新年快乐给对方看，然后拿了五块钱，用手简单比划了下。把钱给我妹妹了，双手做礼鞠躬给他拜年。对方双手合十，双掌并拢。放于胸前，频频点头，送我们离开，目送我们远去。到宾馆妈妈问我理发多少钱，我说15.当和妹妹在一起的时候，我问我要不要，告诉妈妈我理发50.小燕子说 随便你了 12345对于弱势群体问题不想讨论 会涉及国家救助对方双手合十，双掌并拢。放于胸前这应该是他唯一的精神寄托，是艰难岁月的支柱。多关心弱势群体 尊重隐私晚上我陪在小燕子身边一起写日记，写了很久很久，我都忙完了。去倒水问你还有多少啊，她说才写到中午，我看见已经写到第二页中间了。我的日记，就放在旁边，开始看电脑，看手机。过来不到5分钟，她告诉我写完了。并且收拾起来，直接站在桌子上，把日记放在最高的一堆书中间。 1234我知道我犯错了就算我没事了我也要假装在写日记陪她到最后 我其实很想知道她的一些想法，但是我知道这是她的秘密，任何人都没权利。 写到比较敏感的地方还会转过身写防止被瞄到 写完之后 要藏的好好的 不要命令123456789101112这或许是我小时候最大的创伤吧，父亲经常在我和小朋友玩的最开心的时候，跑过来当着小伙伴的面，训斥 憋疯了，几个字都疯掉啦，还不快点回去写作业去只好回去了，写完了，就回看读书。看过了，不知道预习啊。反正讲理没用小学的时候我经常提醒自己必要玩的太过了，物极必反。这是我小学领会最深的，一个词了 1234567891011121314151617181920212202-02 晚上到家，我计划是2月3号祭祖的，正好让她拍些照片下来，晚上让爸爸好好讲讲家族历史(其实是挺乱的，有不少长辈也分不清),让她第一篇日记有足够的内容所有我就跟妈妈说了，问小燕子去不去。小燕子说不去，我真的不去吗？恩。我有点诧异我记忆中妹妹就是一个跟屁虫 年年都去，我就问为什么，她说不知道。我知道你有你不想去的理由，你告诉我。如果有道理，没人不同意的。小燕子说，冷。我说我也怕冷，妈妈也怕冷。我也躲在被窝里看看电视，玩玩手机。那你知道我们为什么要去吗？1. 我们去干嘛，祭拜爷爷奶奶，以及很多祖辈， 你知道他们的坟地在什么位置吗，每个墓地是谁？他是谁的谁？2. 如果爸爸妈妈死了，谁都会死的，没什么大不了的，又不是神仙， 你会想念爸爸妈妈吗，那时候你回去祭拜吗，是不是也觉得冷，不去了，你去， 如果你小孩不愿去想在家玩玩手机看看电视，你说好不好。3. 外婆已经去世了，你想过外婆吗？想，祭祖的时候，你怎么不想去啊。 还没说完 小燕子已经哭了，我立刻我别哭，我不是说你一定要去，小燕子说不是，我是想外婆了 这次是我第二次，把我妹妹说哭。第一次是我表姐女儿两个人躲在房间里抄作文 看见她哭，瞬间感觉，天塌了似得,因为语言的问题，平时说她，她只会笑，这应该就是自我保护的一个手段吧。]]></content>
      <categories>
        <category>Share</category>
      </categories>
      <tags>
        <tag>教育</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[安全]]></title>
    <url>%2F2019%2F04%2F15%2Fandroid%2Fpay%2F%E5%AE%89%E5%85%A8%2F</url>
    <content type="text"><![CDATA[账号lycamobile美国手机号 +1 (646) 651-2317 平台 账号 pwd 备注 gmail dingdingdangdang001@gmail.com 注册手机号 +1 (646) 651-2317 google voice （716）324-1820 google账号密码 注册手机号 +1 (646) 651-2317 ip 端口 加密方式 pwd 35.236.43.208 7001 aes-256-cfb - 短信验证码平台短信平台一：https://www.pdflibr.com/短信平台二：http://www.smszk.com/ 短信接收验证码平台：https://zh.mytrashmobile.com短信接收验证码平台：https://sms.cm]]></content>
      <categories>
        <category>pay</category>
      </categories>
      <tags>
        <tag>安全</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lycamobile]]></title>
    <url>%2F2019%2F04%2F15%2Fandroid%2Fpay%2Flycamobile%2F</url>
    <content type="text"><![CDATA[1 注册邮箱googlehttps://support.google.com/mail/answer/56256?hl=zh-Hans orhttps://accounts.google.com/signup/v2/webcreateaccount?flowName=GlifWebSignIn&amp;flowEntry=SignUp]]></content>
      <categories>
        <category>pay</category>
      </categories>
      <tags>
        <tag>phone number</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 项目编译过程]]></title>
    <url>%2F2019%2F04%2F01%2Fandroid%2Fresearch%2FAndroid%20%E9%A1%B9%E7%9B%AE%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[工具介绍 工具 功能介绍 SDK的路径 aapt Android资源打包工具 ${ANDROID_SDK_HOME}/platform-tools/appt aidl Android接口描述语言转化为.java文件的工具 ${ANDROID_SDK_HOME}/platform-tools/aidl javac Java Compiler ${JDK_HOME}/javac或/usr/bin/javac dex 转化.class文件为Davik VM能识别的.dex文件 ${ANDROID_SDK_HOME}/platform-tools/dx apkbuilder 生成apk包 ${ANDROID_SDK_HOME}/tools/opkbuilder jarsigner .jar文件的签名工具 ${JDK_HOME}/jarsigner或/usr/bin/jarsigner zipalign 字节码对齐工具 ${ANDROID_SDK_HOME}/tools/zipalign 编译过程第一步：打包资源文件，生成R.java文件输入Resource文件（就是工程中res中的文件）、Assets文件（相当于另外一种资源，这种资源Android系统并不像对res中的文件那样优化它）、AndroidManifest.xml文件（包名就是从这里读取的，因为生成R.java文件需要包名）、Android基础类库（Android.jar文件） 输出打包好的资源（一般在Android工程的bin目录可以看到一个叫resources.ap_的文件就是它了）、R.java文件（在gen目录中，大家应该很熟悉了） 工具aapt工具，它的路径在${ANDROID_SDK_HOME}/platform-tools/aapt（如果你使用的是Windows系统，按惯例路径应该这样写：%ANDROID_SDK_HOME%\platform-tools\aapt.exe，下同）。 第二步：处理AIDL文件，生成对应的.java文件（当然，有很多工程没有用到AIDL，那这个过程就可以省了） 输入源码文件、aidl文件、framework.aidl文件 输出对应的.java文件 工具aidl工具 第三步：编译Java文件，生成对应的.class文件输入源码文件（包括R.java和AIDL生成的.java文件）、库文件（.jar文件） 输出.class文件 工具javac工具 第四步：把.class文件转化成Davik VM支持的.dex文件输入.class文件（包括Aidl生成.class文件，R生成的.class文件，源文件生成的.class文件），库文件（.jar文件） 输出.dex文件 工具dex工具 第五步：打包生成未签名的.apk文件输入打包后的资源文件、打包后类文件（.dex文件）、libs文件（包括.so文件，当然很多工程都没有这样的文件，如果你不使用C/C++开发的话） 输出未签名的.apk文件 工具apkbuilder工具 第六步：对未签名.apk文件进行签名输入未签名的.apk文件 输出签名的.apk文件 工具jarsigner 第七步：对签名后的.apk文件进行对齐处理（不进行对齐处理是不能发布到Google Market的） 输入签名后的.apk文件 输出对齐后的.apk文件 工具zipalign工具]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XPosed调试]]></title>
    <url>%2F2019%2F03%2F28%2Fandroid%2FXposed%2FXPosed%E8%B0%83%E8%AF%95%2F</url>
    <content type="text"><![CDATA[TopActivity.apk安装这个工具可以直接查看当前 App 显示的最前 Activity，后面我们接触别人写的项目，这个工具可以很方便跟踪代码的入口，项目原理是通过 AccessibilityService 服务，监听所有的界面变化，读取当前界面 Activity，需要给软件开启【辅助权限】。 项目地址：https://github.com/109021017/android-TopActivity 当然也可以通过 Adb 命令，获取 Dumpsys 当前 Activity 的信息： adb shell dumpsys activity top BDOpener——开启APK调试与备份选项的Xposed模块https://github.com/riusksk/BDOpener 这是 Xposed 的插件模块，也就是说需要刷入 Xposed 框架后，才能使用该，通过安装这个软件，我们可以使手机安装的软件，变为可调试状态，这样就可以通过 Android Studio 的 Monitor 工具，查看所有的进程状态，并 dumpsys 方法调用信息。 Android\Sdk\tools\monitor.bat 目录下找到 调试 方法123456789public class TargetHook implements IXposedHookLoadPackage &#123; @Override public void handleLoadPackage(XC_LoadPackage.LoadPackageParam lpparam) throws Throwable &#123; //通过目标包名过滤 if (lpparam.packageName.equals(&quot;com.xxx.xxx&quot;)) &#123; XposedBridge.log(&quot;启动了xxx软件&quot;); &#125; &#125;&#125; 还是不行 https://blog.csdn.net/qq_30496695/article/details/80425676 Xposed 免重启调试123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102Xposed插件每次代码改动，都需要重启手机才能生效，有时候重启一次还不生效（我的手机有一次重启 3 次，才看到生效，还好是公司测试机，不心疼），所以代码最好写上相关 Log 信息，来看代码生效没。XposedBridge.log(&quot;启动了xxx软件&quot;);不过这里分享一个免重启调试的方法，方法来自网上，感谢 DX ：/** * @author DX * 这种方案建议只在开发调试的时候使用，因为这将损耗一些性能(需要额外加载apk文件)，调试没问题后，直接修改xposed_init文件为正确的类即可 * 可以实现免重启，由于存在缓存，需要杀死宿主程序以后才能生效 * 这种免重启的方式针对某些特殊情况的hook无效 * 例如我们需要implements IXposedHookZygoteInit,并将自己的一个服务注册为系统服务，这种就必须重启了 * Created by DX on 2017/10/4. */ public class HookLoader2 implements IXposedHookLoadPackage &#123; //按照实际使用情况修改下面几项的值 /** * 当前Xposed模块的包名,方便寻找apk文件 */ private final String modulePackage = &quot;com.xxx.plugin&quot;; /** * 宿主程序的包名(允许多个),过滤无意义的包名,防止无意义的apk文件加载 */ private static List&lt;String&gt; hostAppPackages = new ArrayList&lt;&gt;(); static &#123; // TODO: Add the package name of application your want to hook! hostAppPackages.add(&quot;com.eg.android.AlipayGphone&quot;); hostAppPackages.add(&quot;com.xxx.plugin&quot;); &#125; /** * 实际hook逻辑处理类 */ private final String handleHookClass = TargetHook.class.getName(); /** * 实际hook逻辑处理类的入口方法 */ private final String handleHookMethod = &quot;handleLoadPackage&quot;; @Override public void handleLoadPackage(final XC_LoadPackage.LoadPackageParam loadPackageParam) throws Throwable &#123; if (hostAppPackages.contains(loadPackageParam.packageName)) &#123; //将loadPackageParam的classloader替换为宿主程序Application的classloader,解决宿主程序存在多个.dex文件时,有时候ClassNotFound的问题 XposedHelpers.findAndHookMethod(Application.class, &quot;attach&quot;, Context.class, new XC_MethodHook() &#123; @Override protected void afterHookedMethod(MethodHookParam param) throws Throwable &#123; Context context=(Context) param.args[0]; loadPackageParam.classLoader = context.getClassLoader(); invokeHandleHookMethod(context,modulePackage, handleHookClass, handleHookMethod, loadPackageParam); &#125; &#125;); &#125; &#125; /** * 安装app以后，系统会在/data/app/下备份了一份.apk文件，通过动态加载这个apk文件，调用相应的方法 * 这样就可以实现，只需要第一次重启，以后修改hook代码就不用重启了 * @param context context参数 * @param modulePackageName 当前模块的packageName * @param handleHookClass 指定由哪一个类处理相关的hook逻辑 * @param loadPackageParam 传入XC_LoadPackage.LoadPackageParam参数 * @throws Throwable 抛出各种异常,包括具体hook逻辑的异常,寻找apk文件异常,反射加载Class异常等 */ private void invokeHandleHookMethod(Context context, String modulePackageName, String handleHookClass, String handleHookMethod, XC_LoadPackage.LoadPackageParam loadPackageParam) throws Throwable &#123; File apkFile=findApkFile(context,modulePackageName); if (apkFile==null)&#123; throw new RuntimeException(&quot;寻找模块apk失败&quot;); &#125; //加载指定的hook逻辑处理类，并调用它的handleHook方法 PathClassLoader pathClassLoader = new PathClassLoader(apkFile.getAbsolutePath(), ClassLoader.getSystemClassLoader()); Class&lt;?&gt; cls = Class.forName(handleHookClass, true, pathClassLoader); Object instance = cls.newInstance(); Method method = cls.getDeclaredMethod(handleHookMethod, XC_LoadPackage.LoadPackageParam.class); method.invoke(instance, loadPackageParam); &#125; /** * 根据包名构建目标Context,并调用getPackageCodePath()来定位apk * @param context context参数 * @param modulePackageName 当前模块包名 * @return return apk file */ private File findApkFile(Context context, String modulePackageName)&#123; if (context==null)&#123; return null; &#125; try &#123; Context moudleContext = context.createPackageContext(modulePackageName, Context.CONTEXT_INCLUDE_CODE | Context.CONTEXT_IGNORE_SECURITY); String apkPath=moudleContext.getPackageCodePath(); return new File(apkPath); &#125; catch (PackageManager.NameNotFoundException e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125;]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[避免过多if-else的几种方法]]></title>
    <url>%2F2019%2F03%2F28%2Fandroid%2Fproblem%2F%E9%81%BF%E5%85%8D%E8%BF%87%E5%A4%9Aif-else%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[避免过多if-else的几种方法1234567891011121314String input = &quot;three&quot;;@Testpublic void testElse() &#123; if (&quot;one&quot;.equals(input)) &#123; System.out.println(&quot;one&quot;); &#125; else if (&quot;two&quot;.equals(input)) &#123; System.out.println(&quot;two&quot;); &#125; else if (&quot;three&quot;.equals(input)) &#123; System.out.println(&quot;three&quot;); &#125; else if (&quot;four&quot;.equals(input)) &#123; System.out.println(&quot;four&quot;); &#125;&#125; 代码中一堆 if else看起来 就 不舒服,不美观，又长 方法一 迭代模式1234567public interface INotification &#123; String getType(); void execute(String title ,String content);&#125; 1234567891011121314151617public class WeChatNotification implements INotification &#123; static Pattern pWeixin = Pattern.compile(&quot;微信支付收款([\\d\\.]+)元&quot;); @Override public String getType() &#123; return Common.WECHAT_PACKAGE; &#125; @Override public void execute(String title ,String content) &#123; //TODO &#125; &#125;&#125; 初始化 123456789private List&lt;INotification&gt; handlerList = new ArrayList&lt;&gt;(); handlerList.add(new AlipayNotification()); handlerList.add(new ECardPayNotification()); handlerList.add(new GuiZhouBankNotification()); handlerList.add(new SPayNotification()); handlerList.add(new WeChatNotification()); handlerList.add(new XingGuanJiaNotification()); handlerList.add(new ZhongYingBankNotification()); 使用 迭代 123456for(INotification handler:handlerList)&#123; if( handler.getType().contains(pkgName) )&#123; handler.execute(title,content); &#125; &#125; 这边也可以使用mapmap 效率比list 高 方法一 工厂模式1234567public interface INotification &#123; String getType(); void execute(String title ,String content);&#125; 1234567891011121314151617181920212223242526272829303132public class NotificationFactory &#123; public static INotification createMessage(String messageType) &#123; switch (messageType) &#123; case Common.e_card_PKG: return new ECardPayNotification(); case Common.xiaomi_PKG: case Common.guizhou_PKG: return new GuiZhouBankNotification(); case Common.laijucai_PKG: return new ZhongYingBankNotification(); case Common.SPay_PKG: return new SPayNotification(); case Common.xingGuanjia_PKG: return new XingGuanJiaNotification(); case Common.WECHAT_PACKAGE: return new WeChatNotification(); case Common.ALIPAY_PACKAGE: return new AlipayNotification(); default: return null; &#125; &#125;&#125; 使用 12INotification mNotification = NotificationFactory.createMessage(pkgName);if (null != mNotification) mNotification.execute(title, content);]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>problem</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pay]]></title>
    <url>%2F2019%2F03%2F27%2Fandroid%2Fpay%2Fpay%2F</url>
    <content type="text"><![CDATA[支付支付宝红包功能 XPosed 平台 功能 是否支持 信息 支付宝 支付宝自动发红包 YES 服务器端自动加好友 自动发红包 //TODO 确定发送红包时候能否获取到订单号 支付宝 支付宝自动抢红包 YES App自动接收红包，自动删除好友 对方ID: 2088902662874592 红包是否拆开：true { “tradeAmount”:”0.01”,“tradeNo”:”201903270206302200000000590039080977”,“tradeRemark”:”恭喜发财，万事如意！”,“tradeTime”:”1553672301000”} //TODO 需要添加接口通知服务器 接收红包完成 支付宝 收款固码 XPosed 平台 功能 是否支持 信息 支付宝 扫码支付 YES 需要填写金额 订单号 支付宝 收款码(金额备注) XPosed 平台 功能 是否支持 信息 支付宝 扫码支付 YES 需要填写金额 订单号]]></content>
      <categories>
        <category>pay</category>
      </categories>
      <tags>
        <tag>Pay</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[习惯 - 01]]></title>
    <url>%2F2019%2F03%2F27%2FShare%2Fxg_01%2F</url>
    <content type="text"><![CDATA[习惯习惯 - 宝宝走路脚往里憋123小孩走了，脚总是憋。往里憋的特别严重，鞋子都一 习惯 - 宝宝走路脚往里憋希望给我妹妹培养一个 写日记的好习惯 123456789101112我记得我小学的时候老师也想培养我们写日记的习惯,我刚刚开始一直坚持着，但是初中的时候，发现父亲偷看我日记。偷看就算了还当着别人面前说。我又一次是在忍不了,就跑到楼顶，一页页翻看这自己的日记，一页页的烧。之后再也不写了。回想起来，小学老师培养我们写日志，高中老师重新捡起日记话题，改为周记。后来才知道，鲁迅 老舍 他们都有些日记的习惯。我更加坚信我的想法 我昨天晚上(2019-02-02 23:00 农历二十八)到家的又把写日记的事情说了 我建议 给她的写法是 要写今天的事情 以及感受 写下明天打算做什么 要准备什么 给她看了下我的日记模板 1234每页 第三个格子处 画个分界线 竖着 滑到底分界线 左侧 写摘要 右侧写日记 思维方式2019-02-03 早上起床本来是回家祭祖的但是父亲 回来 说不去 明天去 我就带着妹妹去买笔记本 边走边聊天 我会刻意的 以讲故事的方式 问她对一些事情的看法与见解 如 1234农夫与蛇 的故事乞丐 与 施舍者 ( 施舍者 施舍2元一直保持一年，之后施舍结婚了，改施舍一元，乞丐就不高兴了 ) 或许 书本上教孩子都是 对错 善恩其实 是 可以换个角度 1234567891011121314151617181920农夫 善 没错，农夫 错误判断 导致自己死了1. 蛇是冷血动物 会冬眠的， 救的方式不对 (可以挖个坑让蛇在地下好好冬眠)2. 自认为 是救 其实是害 （蛇有自己的习性，你救它，它醒了，蛇把农夫吃了，又要天气寒冷，蛇还需要冬眠，让蛇重复冬眠。这样就会破坏蛇的生活习性。）3. 把自己置于危险而不自知 (蛇苏醒之后会急需能量补充的，面前就有现成的。)乞丐 与 施舍者我妹妹 还没想明白其实怎么做帮助对方而且对自己有利是有点困难 对于这样的小学生包括显示生活中 我们这样成年人 都很难做到授人以鱼不如授人以渔你施舍它一辈子，这个乞丐还是乞丐。教他写谋生技能，才是长远之计。但是 对方要是扶不起的阿斗，已经帮过，就结束吧，用佛家一句话 缘分已尽。 行动教育你的一言一行，影响孩子的言行。 123456789101112131415161718192021222324252627今天上午买完本子就去妈妈工作的宾馆，帮忙叠了下被子。本来想跌完被子就去看沙发，妈妈嫌弃我头发太长了非要我去理发农历二十九理发不太好我想年后在理。架不住妈妈的说，最后放弃了。妈妈问我是去水芹姑屋(亲戚家理发店)，还是哪里。我选择后者，但是地方妈妈说了好多遍我就是不知道，只好带我们去。然后再回宾馆忙。到了之后发现这家挺简陋的，而且是在小巷子深处，这家前面还有一家理发店，这里没有扫码支付。当我理完发我掏出50给他，我就打算走，对方到这零钱冲出来了。我不会手语，我就再次掏出手机，写了两句话。五块钱我收了你找过钱了剩下的给你 新年快乐给对方看，然后拿了五块钱，用手简单比划了下。把钱给我妹妹了，双手做礼鞠躬给他拜年。对方双手合十，双掌并拢。放于胸前，频频点头，送我们离开，目送我们远去。到宾馆妈妈问我理发多少钱，我说15.当和妹妹在一起的时候，我问我要不要，告诉妈妈我理发50.小燕子说 随便你了 12345对于弱势群体问题不想讨论 会涉及国家救助对方双手合十，双掌并拢。放于胸前这应该是他唯一的精神寄托，是艰难岁月的支柱。多关心弱势群体 尊重隐私晚上我陪在小燕子身边一起写日记，写了很久很久，我都忙完了。去倒水问你还有多少啊，她说才写到中午，我看见已经写到第二页中间了。我的日记，就放在旁边，开始看电脑，看手机。过来不到5分钟，她告诉我写完了。并且收拾起来，直接站在桌子上，把日记放在最高的一堆书中间。 1234我知道我犯错了就算我没事了我也要假装在写日记陪她到最后 我其实很想知道她的一些想法，但是我知道这是她的秘密，任何人都没权利。 写到比较敏感的地方还会转过身写防止被瞄到 写完之后 要藏的好好的 不要命令123456789101112这或许是我小时候最大的创伤吧，父亲经常在我和小朋友玩的最开心的时候，跑过来当着小伙伴的面，训斥 憋疯了，几个字都疯掉啦，还不快点回去写作业去只好回去了，写完了，就回看读书。看过了，不知道预习啊。反正讲理没用小学的时候我经常提醒自己必要玩的太过了，物极必反。这是我小学领会最深的，一个词了 1234567891011121314151617181920212202-02 晚上到家，我计划是2月3号祭祖的，正好让她拍些照片下来，晚上让爸爸好好讲讲家族历史(其实是挺乱的，有不少长辈也分不清),让她第一篇日记有足够的内容所有我就跟妈妈说了，问小燕子去不去。小燕子说不去，我真的不去吗？恩。我有点诧异我记忆中妹妹就是一个跟屁虫 年年都去，我就问为什么，她说不知道。我知道你有你不想去的理由，你告诉我。如果有道理，没人不同意的。小燕子说，冷。我说我也怕冷，妈妈也怕冷。我也躲在被窝里看看电视，玩玩手机。那你知道我们为什么要去吗？1. 我们去干嘛，祭拜爷爷奶奶，以及很多祖辈， 你知道他们的坟地在什么位置吗，每个墓地是谁？他是谁的谁？2. 如果爸爸妈妈死了，谁都会死的，没什么大不了的，又不是神仙， 你会想念爸爸妈妈吗，那时候你回去祭拜吗，是不是也觉得冷，不去了，你去， 如果你小孩不愿去想在家玩玩手机看看电视，你说好不好。3. 外婆已经去世了，你想过外婆吗？想，祭祖的时候，你怎么不想去啊。 还没说完 小燕子已经哭了，我立刻我别哭，我不是说你一定要去，小燕子说不是，我是想外婆了 这次是我第二次，把我妹妹说哭。第一次是我表姐女儿两个人躲在房间里抄作文 看见她哭，瞬间感觉，天塌了似得,因为语言的问题，平时说她，她只会笑，这应该就是自我保护的一个手段吧。]]></content>
      <categories>
        <category>Share</category>
      </categories>
      <tags>
        <tag>教育</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[搭建本地Maven私服，并使用Android Studio统一管理]]></title>
    <url>%2F2019%2F03%2F25%2Fandroid%2Fresearch%2F%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0Maven%E7%A7%81%E6%9C%8DAndroidStudio%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[搭建本地Maven私服，并使用Android Studio统一管理公司内部没有 Nexus 远程更新 特别慢 下载Nexushttps://www.sonatype.com/download-oss-sonatype 下载相应的 平台这里是有mac为例 解压目录 123- nexus-3.15.2-01- sonatype-work 运行在 nexus-3.15.2-01/bin 目录下 执行./nexus start 访问如果启动成功，打开网页，访问 http://localhost:8081/默认用户名admin，密码admin123 缓存使用12345678allprojects &#123; repositories &#123; maven &#123; url &apos;http://localhost:8081/repository/maven-central/&apos; &#125; mavenLocal() jcenter() google() &#125;&#125;]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>环境</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xposed监听通知消息]]></title>
    <url>%2F2019%2F03%2F14%2Fandroid%2FXposed%2FXposed%E7%9B%91%E5%90%AC%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF%2F</url>
    <content type="text"><![CDATA[参考 配置修改app/build.gradle1234567891011121314151617181920212223// 每次修改运行后自动让 VXP 中的模块`即时生效` ,需要将 (Debug Configurations) - Before Launch - Gradle aware Make - 修改为 :app:installDebugafterEvaluate &#123; installDebug.doLast &#123; updateVirtualXposedAPP.execute() rebootVirtualXposedAPP.execute() launchVirtualXposedAPP.execute() &#125;&#125;// 更新 VXP 中的 apptask updateVirtualXposedAPP(type: Exec) &#123; def pkg = android.defaultConfig.applicationId commandLine android.adbExecutable, &apos;shell&apos;, &apos;am&apos;, &apos;broadcast&apos;, &apos;-a&apos;, &apos;io.va.exposed.CMD&apos;, &apos;-e&apos;, &apos;cmd&apos;, &apos;update&apos;, &apos;-e&apos;, &apos;pkg&apos;, pkg&#125;// 重启 VXPtask rebootVirtualXposedAPP(type: Exec) &#123; commandLine android.adbExecutable, &apos;shell&apos;, &apos;am&apos;, &apos;broadcast&apos;, &apos;-a&apos;, &apos;io.va.exposed.CMD&apos;, &apos;-e&apos;, &apos;cmd&apos;, &apos;reboot&apos;&#125;// 重启 VXP 微信task launchVirtualXposedAPP(type: Exec) &#123; def pkg = &apos;com.tencent.mm&apos; commandLine android.adbExecutable, &apos;shell&apos;, &apos;am&apos;, &apos;broadcast&apos;, &apos;-a&apos;, &apos;io.va.exposed.CMD&apos;, &apos;-e&apos;, &apos;cmd&apos;, &apos;launch&apos;, &apos;-e&apos;, &apos;pkg&apos;, pkg&#125; 修改Edit configurationsRun -&gt; Edit configuration 参照 上面 修改 成 1:app:installDebug Launch 修改成 Nothing OK 优化]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 多渠道 多域名打包]]></title>
    <url>%2F2019%2F03%2F03%2Fandroid%2Fresearch%2Fandroid%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%2F</url>
    <content type="text"><![CDATA[参考 https://blog.csdn.net/birthmarkqiqi/article/details/56667337]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[adb 常用命令]]></title>
    <url>%2F2019%2F03%2F03%2Fandroid%2Fbase%2Fadb%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[adb 常用命令查看Android 当前activity1adb shell dumpsys activity | grep &quot;mFocusedActivity&quot;]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xposed 模块免重启开发]]></title>
    <url>%2F2019%2F02%2F27%2Fandroid%2FXposed%2FXposed%E6%A8%A1%E5%9D%97%E5%85%8D%E9%87%8D%E5%90%AF%E5%BC%80%E5%8F%91%2F</url>
    <content type="text"><![CDATA[参考 配置修改app/build.gradle1234567891011121314151617181920212223// 每次修改运行后自动让 VXP 中的模块`即时生效` ,需要将 (Debug Configurations) - Before Launch - Gradle aware Make - 修改为 :app:installDebugafterEvaluate &#123; installDebug.doLast &#123; updateVirtualXposedAPP.execute() rebootVirtualXposedAPP.execute() launchVirtualXposedAPP.execute() &#125;&#125;// 更新 VXP 中的 apptask updateVirtualXposedAPP(type: Exec) &#123; def pkg = android.defaultConfig.applicationId commandLine android.adbExecutable, &apos;shell&apos;, &apos;am&apos;, &apos;broadcast&apos;, &apos;-a&apos;, &apos;io.va.exposed.CMD&apos;, &apos;-e&apos;, &apos;cmd&apos;, &apos;update&apos;, &apos;-e&apos;, &apos;pkg&apos;, pkg&#125;// 重启 VXPtask rebootVirtualXposedAPP(type: Exec) &#123; commandLine android.adbExecutable, &apos;shell&apos;, &apos;am&apos;, &apos;broadcast&apos;, &apos;-a&apos;, &apos;io.va.exposed.CMD&apos;, &apos;-e&apos;, &apos;cmd&apos;, &apos;reboot&apos;&#125;// 重启 VXP 微信task launchVirtualXposedAPP(type: Exec) &#123; def pkg = &apos;com.tencent.mm&apos; commandLine android.adbExecutable, &apos;shell&apos;, &apos;am&apos;, &apos;broadcast&apos;, &apos;-a&apos;, &apos;io.va.exposed.CMD&apos;, &apos;-e&apos;, &apos;cmd&apos;, &apos;launch&apos;, &apos;-e&apos;, &apos;pkg&apos;, pkg&#125; 修改Edit configurationsRun -&gt; Edit configuration 参照 上面 修改 成 1:app:installDebug Launch 修改成 Nothing OK 优化]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[个人任务]]></title>
    <url>%2F2019%2F02%2F25%2FWork%2F%E4%B8%AA%E4%BA%BA%E4%BB%BB%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[个人任务2019-02-15 任务 内容 是否完成 添加版本号 登陆页添加 版本信息 YES 修改bug android 8.0 startService 兼容问题 YES 修改bug android 8.0 Notification 兼容问题 YES 123456789GET /mobile-qr/BaseHttp.dll?MB_CCQRPay_Entry&amp;showtopbar=false&amp;DeviceType=E&amp;Version=7.0.0&amp;SystemVersion=7.1.1&amp;behavior_entryid=qrp004002 HTTP/1.1Host: netpay.cmbchina.comConnection: keep-aliveUpgrade-Insecure-Requests: 1User-Agent: Mozilla/5.0 (Linux; Android 7.1.1; Moto G Play Build/NPIS26.48-43-2; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.80 Mobile Safari/537.36 MPBank/7.0.0 Android/7.1.1 AID/Y0qwC+k1qCD/psaXqM5ZOUf17JE= SID/+U6jn/3wHzHJGk6R7iTBjw66V4A= APPTag/1.0(N;1234)Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8Accept-Encoding: gzip, deflateAccept-Language: zh-CN,en-CA;q=0.9,en-XA;q=0.8,en-US;q=0.7X-Requested-With: cmb.pb 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=GB2312&quot; /&gt; &lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-cache, must-revalidate&quot; /&gt; &lt;meta http-equiv=&quot;Expires&quot; content=&quot;0&quot; /&gt; &lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt; &lt;title&gt;招商银行被动支付C2C&lt;/title&gt; &lt;script src=&quot;jsLib/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/DynaXmlHttp.js&quot;&gt;&lt;/script&gt; &lt;!--ajax实现类--&gt; &lt;script src=&quot;jsLib/XmlPackage.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/juicer-min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/CMBLS.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/Mobile_CCQRPrePay.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/cmbperformance.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; window.location.route = &apos;/payment/MB_CCQRPay_PreMain.htm&apos;; CMBPerformance.init(&#123; id: &apos;mobile_qr&apos;, // 模块标识 domain: &apos;&apos;, // 非客户端数据上送地址，生产环境下可不传， delay: 500, // 延迟上报时间，默认500ms random: 0.1, // 抽样 (0-1]，默认为0.1 isPage: true, // 是否收集性能数据，默认为true isResource: true, // 是否收集资源数据，默认为true isError: true, // 是否收集页面异常数据，默认为true isAjax: true, // 是否收集Ajax请求异常数据，默认为true ignore: [/global code/,/successCallback/,/failCallback/,/Script error/], // 异常数据忽略列表，每项为正则表达式 repert: 2 // 异常数据重复上送次数，默认为2次 &#125;); var clientNo = &quot;459F8A46966F4D6F98177C83426412DF246586164075408800006990&quot;; var serialNo = &quot;7875259492&quot;; var httpPath = &quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?&quot;; var sDevType = &quot;A&quot;; var flagLoginBack = &quot;&quot;; var flagSecurityInfo = &quot;Y&quot;; var g_LoginInfo = &quot;&quot;;//登录令牌信息 var g_SecurityInfo = &quot;&quot;;//app安全信息 var g_HistoryUserInfo = &quot;&quot;;//历史账户信息 var loginUrl = &quot;http://cmbls/FunctionJump?id=def&amp;action=gofuncid&amp;funcid=100010&amp;serverid=CMBNetPay&amp;closecurrentview=true&amp;clean=false&amp;ShowTopBar=false&amp;cmb_app_trans_parms_start=here&amp;&quot; + &quot;OrgClientNo=&quot; + clientNo; function initPage() &#123; GetSecurityInfoFromApp();//查询app安全信息(用于风控) &#125; &lt;/script&gt; &lt;/head&gt; &lt;body onload=&quot;initPage()&quot;&gt; &lt;form id=&quot;CCQRPayFrom&quot; action=&quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_GetQR&quot; method=&quot;post&quot; autocomplete=&quot;off&quot; target=&quot;_self&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;ClientNo&quot; id=&quot;ClientNo&quot; value=&quot;459F8A46966F4D6F98177C83426412DF246586164075408800006990&quot; /&gt; &lt;input type=&quot;hidden&quot; name=&quot;SerialNo&quot; id=&quot;SerialNo&quot; value=&quot;7875259492&quot; /&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; ### 1234567891011121314POST /mobile-qr/BaseHttp.dll?MB_CCQRPay_PreLogin HTTP/1.1Host: netpay.cmbchina.comConnection: keep-aliveContent-Length: 9773Origin: https://netpay.cmbchina.comUser-Agent: Mozilla/5.0 (Linux; Android 7.1.1; Moto G Play Build/NPIS26.48-43-2; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.80 Mobile Safari/537.36 MPBank/7.0.0 Android/7.1.1 AID/Y0qwC+k1qCD/psaXqM5ZOUf17JE= SID/+U6jn/3wHzHJGk6R7iTBjw66V4A= APPTag/1.0(N;1234)Content-Type: application/x-www-form-urlencoded;charset=UTF-8Accept: */*Referer: https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_Entry&amp;showtopbar=false&amp;DeviceType=E&amp;Version=7.0.0&amp;SystemVersion=7.1.1&amp;behavior_entryid=qrp004002Accept-Encoding: gzip, deflateAccept-Language: zh-CN,en-CA;q=0.9,en-XA;q=0.8,en-US;q=0.7X-Requested-With: cmb.pbClientNo=459F8A46966F4D6F98177C83426412DF246586164075408800006990&amp;SerialNo=7875259492&amp;LoginInfo=60B2EC1457044C80CBA24DA734C50DCB68BD4DB9343C2345DE3CCEABD7296985C9976DED2D62683881380EBDF5439BDF46C2DFE01AAFBC9CD31A5F01437C8C7429EE9E801790EE9DC8D2E2D0881C54B1869F0612E7C4A1DE9F3163955D321C6E7EFAEC6F245B4CDE616E6457FFBF8FE771D16972F1221FCF684036AC27737A7C102392B36F8D561B2AA4A6D77DB79AFA94A843A5EA2251738987526D3AB9E95AD4C4B757A4EAFB647183E4BF11955F4C11D223FB1AE152848CA6D73F995F7CED950259EDE8C31B5042CBFF33474B6D666D5CAA6108B25902BB67E502BD0BBAAC0DB33587655F5BEF925AC229F373C4983542F4051E1C3B3B50D4EB170F27D5503CC12E8AF9AF75A14C1B8153EE8DFC0020F9891B10D612A0D7FE4DBDD18E545D032E9AD21F9B63F8F6E4620FA3C7D30300714C475B5A1B96301AA396A3C240D497AEB39BE126BE39500030ECA095AE9FDB650CBE4F921E14403D47E0F2F8AD05E0403682D3913648D7E557954581ECE8496AD197872B402D51371E45F0EB5486645AFB8B19A5C8C9DB16940781EB65D5AC93407FF798AF35D3BF1ED09C02BEDFB08B75CA6CE517D13C380F6D41CDD82F8FFB23B07FDA8F10029359DB7253E3B28A023D9AEF71B49FCE6133C29E2FA33C3B3D938E093F1166E8FE9E9769E2AC56A75567A9792F86385E19C3CB88087B1588470199CAA245574BA445719A443CD1B1EFC8D46BE1C69E21C82CBCA3391BB71C2CF9E22D3A772A62503887010F1D91E06B73138DEF7048BFE17744FCD3D2B8F6D7AA600C758A916C8467EA24B9E24C2C12E526907F0D95A00CEF372868174C0DE0D7879BF137332106DE047D4398F01D66AE1E0068CD5B73533C1C8451A83AE4BEC87568B674C88A7D2BBF537F2761523DEF00F4CC65917DCDC7B7A64026FCC931C7AE2EF272D52B779009A3E3D67218ADFB6E4DC1E46948B579550C0705253F80238AAB0B85EFC636D06C35004E18CE9E6B754FC01E5C09565D496027CD01AD4F801A9011C36B1B2C101C0C9F8A8ED53AD2F425E6BAF15DD6F667A3A4226DD55B3B91389C18F3AFF667A2A82178956E5CB7C0588053562AC103CBD0FBBCAD6AC1A55E4D5C19F1BF8004D277D9B771C47BB928D26ADCA8F90E1C2D39D0EA550380A2CF98C0C26818C619713C21E4B9157C64C5C642F4837443F5EC314ADC517E1266E815C92EB511D6BF784766E5D4ABE7C4B701543BDFEFD0C399D66AA00B89149B426EEEE5CB6A217165B114078A724B319B28D9E30F2F99BCE87439CDD8CFF71055CF53CBABE5702B8C04E304C51A26DF798E5CA8AFFE152E2281869DAD5048C6FFDE1F48BC462AC0CFA9BDD8F1BD2A960817E0F993C50D843D9B08833C854B3A2AE660146FE8657F80A03689AD74351315DB0F1D6756CB91ABA9D55B5A16B944D121C1EF3B889F3086537C01F0CD34A9D8BBAB01314E60E1B689A41EB62BB27D7C0BE36DFAF630E2A1EB0D49FE0B261669EF3772031E01476A5C0530BE05C0F114B7846F49AA603E1411BE3DF289A2651E3D2677C55AEF54DED124E846340FEF623925B0C4D6199A9FF216BFEE634D476EAA1D60D2EBD9454BC53951F4122F81D507DE06C65BA6E9F36C268E085E6B7E80DC2AB3A6BF6A0FFFCF0819DBFDA5CFC547EDA40B326F2C92600D294DF27BDD7827C626837253D06424706D66D598613AE9F4AFB4F2CA950262A15B93116FA1DCA63B9570242C9871898CFC5594E4D6AD280146B34DB526ACE0152174122ADEA4FF40DAB26D727A87FB0FAF1A660A01A8B9757C6018D77E2E4E12AB7C13A129C7E13F6A32526BE6F54CE568DE62B2E2439ED5D2E77820009A8F2CD1BA97C945A0B4435A021CC5DEF35BE5C3C96C51AB2EF3586061C279E474E4698558B57B27F5EBFD3B42C1D2D50D73859534F4D4581D93C27EA6977F301EF7C263B46B7DE19068EB1C74A25693893D6DCBBD61A97A01E21DCC0DA7FEAF4D88D21007A4FBB306D40F0342F9045EFD59498D06D615CE007F405CE9FB9B5019738CEEAADD9779DC2227CECCFA777587115026AA0847A32EB4B6784B85243D293AFE1488D39F13B8B8F63DBEDB5A2DB147F464223F39E71A4FF2A6C15FA16A4040EA17296F8007AC609D1164ACB7A55CE0820A45CD85205BF64AC564322677B6B1238BE281B3BC73A6681CA0760DD5933EC49AFFB7EE721D40142D7A60A8D025FC1E4B8EC06CC8904ACBF7D4FF6EE284F77EB5031937A49ED0FC21925FAAB00E3549625FD622292285B5885590AD1CFADE9C27EA6A0BA19BB1973A71239170C7D73ADA7A53ADF1809B6EED8B720BC87C457E927525F6412525A42F92917B8AAA73DF965BF89E120BD15768F54673D0BD8441ACC8FC83262CEB74AAA33D52F5CFA073D5325A895B5C77B9E56FCCB4916E7D11F820D19AF7DBEACD17BF3804C1594E6471C01039BA7CB0CF9413025541A175363275850DF1EF87E7B5AE6225E12C84B73E563927F82C7387AC114D667F2F4AA09A8416628EADD9D04D364A68ECA999ED6EEEFC4D732766E96950CDA7BF630ADF42004AD93AFC2061854328B9292120B73BCD4160B48C5D9FB5307B82318F44DB36E67ED396F2A99FA84AAAE6DDDC2988231A1A887C0AEDEAA7EA2A0DFFDC5C75E5BAFFD437112DEBF57660BFE660390B19C78BBFE9BD2167212D3B1041617D2CDD3E5F8EAEC05553D05FCEDA7A7F1F2D3F253775F0697447002F9E6ECF7995F27666C27FA42015F3D5D816BB5E415C929A866F29CE19336BCDD6404A53E00C6B4A78&amp;SecurityInfo=Y8I2yD%2BqDUo1Dur%2BCqDlm8Uk8Nl47l4SekFru3E0LtiYTM3mOYEnN8IhIPmCjvBI5339CoeZZ6%2Bk4ar%2F1SfXh6ntXfd5zdrtbCza8qNqwQX7J0a5Q9%2BEdSK1Z13fsKyQueHzNzsE8lWI6FxQmFpw60aHVA%2FTQZeX6P4dO2lvxK0hi5o0Ogu66YjlFdmGpnAcvzPcg25WMlMtFc711kGa%2B%2Bhdxv%2BSSRQsO77TdovTOrlOpZ5yFphMPF4Ugt9JBjmkmeWMH1UL%2Bdejgp%2Ba4XFHEgOq7ooi4twdHca%2FyIUwEkdPw38dtBXOiC3vCOh71OGALEjc50A%2BNCFl6liecEphzhFeAzcF9B%2BjjPlnaHRClietTbJ2wKIddheDxlPez1A9dKcn9tbsTixOiw2T%2Fo2jlRQ8zdCiym%2Bib8eHWVdBPjMFF9uO%2BGCjuHFvwGcVaGyUe1yxDjL1Wke95J6Y4bsnCB4CwZYRSK%2BlONTwBkGay0IoPmTQZnyRaO3PJIMgs8AoI%2F9qhcQfe5S%2FzEt%2BIVLZvoyZpNOzDjbMxPG7lTopCf4A2Co2xgcyW%2BodVBTRYhMuEKUTsYwBDi2PR%2B%2BaTB%2BGas79KQI2xE1GfM050jBNjamVepJUukzqSg30Foab%2FKblq%2BrtETaXn0hDduqe9ye1nGyC2xvsplJRXlfuT4811Ew9bJIDDUrRXiZmyv%2FIBE5wE4evRalFBFJw9D0iiw9RXUPqWP5O%2FRpH811BHrhIly1qbLxJGnL6tOtNBN3yYkkPDaScJFlEYSn%2FDYbTT9B1A4lL2YxifW%2Bc9PhvkCMTyQtARZ5irqLUcR0%2FTZAE1aZvoXBjkL809xcSWSaN3iKEQXTKWPzQLKf4Xb5NAW0KsASBOGoZQQfMdxEMyzx15l%2FTOAFflCF%2B9Bw%2Fqt5umxc%2BhLFiFNUN%2BkJUklJkaL5GxA49Ad1xrp3MAKqlRDTNTzRhvl8xSPxfbk8xn58Csft0HDcAy9tNoJojfkluxmka019Yacz2qMzYwpu2AHdIJgvH%2BF9t0bZ3vY5GjVJ8Q0XHQLqUoNiynl9L7B2YEsoLymSsLLDM6o0yNQuT9N8939r8bEcEI3w2MimNs51sOzBfg1Yqw%2FRSxoxjoGGxyp34u8lcFNuv25vsa8Aob5%2FHm%2B6kVPXzDzh%2Fovy5%2FmRuBc2I7yonCFfGywoB6RONoI0t%2BsSNu77pXJFY7Po0jeHqB732V6nPnjqHZcZiA4dHU6p%2FWsIPMolsFR0EosassetI49hPfdeR4QbHelhLElAUW4svxUlCqKugAjIFL%2FaFKqrvcjQzOfPmW7DLrB5i6hc9uVKPIhGFlBZZ%2FJGlOkDK9Nfyt8%2FgbhZ76eaZjp5oHYWzD92dtrljmCY8mysQ6gVfEFP0U%2FkH%2FAk4IFzgKLIFyusdxJFEvtQoj66KtaJWm026OEqsepASyLcwkJU8LY7fEJGmWYU6o70%2F6qe3lfWB1KWAnAMYToC0NPHmRemVlrWj3A1ZD%2FaD71OvpQe5XC05642qJTBGYfo3Dh19hAa1mNnOl1zCLS57nn2BVSMbBl%2F1tkZv35okMXxhkkbTfgVBnZnXWQk16fzZz3OzsAHt%2BbTS2tl50PEYhmCH%2B%2FPK%2BsgCfdNlgPnZ3Ecl%2F8OodsmwJmMF5nCNTNHRngX7SItL5eWvxooLehTKeOJ%2BN%2BOxoFi5VWCOf1E%2B8CpcphPdNzzFoEZYsxJPJJm6F4LwaHWX1Fu1Nv9E%2FDAEezRfUaxXxbcuRAlHMORzpDA4kVVx3xsIzpnJp%2FaCYjmi95VCkt3w7yA2ZboeV%2Bggi9Z4BA8dzC40BhaSouTrPKboNwAJvsTkp833rAZIUfDAEYHCIZCEwsXO%2B4JTGfBUAiQNPsenQ1ArHDSNmIoekHxfH0lUA29rjp91KBqAoeGpzPFRa%2BIEnWCCYd2SreBt1I4CffEXFbESnYqAYeirwfZjzjxxKYMiFosaZMz88UUIh%2FLEjY1oro33xSbZita6SVGNJU0h28KZyzg2z%2FpQtTrraYblmU%2BtKjP5xXRTyPWstyNCqueRsg9lzjMsVrHDmp2wd0iVQ8h%2BveIyd2DOA5kYEJnThGc4VQodeksgKoXiXHIVNfc17zyRkqVgieB4Kfd11o%2Feh2vXW0nV1MtfSnankdQhnGYkDKFxvjwNzwvjTIHxbTROXrtiCGBex8il%2FcPIpveql5TegESWr8a7SuG5GjiZpyNgn2ARma6clkKujKbDp4Nvqs4qhoCPZ5%2FEHKNhq75LlfeKyEqZObdwTufyfyxVrM8oXtNa6wJnKwqIYn%2Fo3l7aQrcEDvybx5ZmVsrARojdFuTk5qB2KPUI3avW1qfNQ%2FZVrEMccCRnkdkLg32DP2d%2FJ1ktPJ%2BcwTyx2AGx1pkoE6z70eyNCrt5msOXw0p95khfQhhIjD2Zee%2Fhl5EoKdoprYSUTRnqvambB07A5X5YYvJpOCaz7EB65Pmo7AsyYWjCAkznN1DfmeZFhynv6mcqkSDi%2FibVFy5BH%2FPDSExGniB8EXeEjP%2F9j824JGsGrnWpyM01nbpFas16gWFa30SRig4bY2VB6WyWfG%2BBjQ1OSyL5xO2t6sDD9MrYA38VQLi3wlxn2IOpiAgZnjV7IzDQ42tRuYTq5m%2Fnurvm4diuwraJG7dRwcsy4gC4D7wp%2FEL%2B4%2BO%2FZRkmEIezd99SMWVZ%2FrohONduU6%2BMTX6v9x%2Bmfmdx8KrNYVmHv%2FlGZrm0OpNywICYrpzfCT%2F57iY509%2BIhY%2B6GzURc0TDN6M55wtA5aGZrKTeFoFtM6f5T5ZRD84nQyq2uQsNI%2BAgfrDwq4qmla6DVCGCvRambkeL99pkdlRjXY3mfedzZeq4gyCvufMUOTiImljwkwjJOtd2xhpfkaUPeWnm1x5agUeugXPIBq2z5aS9WdIuZEdKeNwQCAosC2RDKd60grKye%2BB0rpr5nA107uI8zt8dYSPPQ6SUPbtTVz0TpDrwwk70u8oXZH%2B7W0lz18JTGQigQ41jDmNj9FmkLhVb7LrJIfrDgPz%2Bvqd6NLg2issNAwxanVpB3UyB%2FDhxzDWD%2FKC9xpTmUL9%2Frp864rLY9S7ZhBN9XOFl0jTcFaqDnxi2fuwCsAUtxWe8zGiRV4x%2FhrNf2HzGnm7Au1bCowtsKd%2Ff3JZ2CuXSzZlaX2cH2nv5dkdo%2B3RSJVWT9ss9%2F3NFShE868DZxcn3%2FWkmLDSpzbgYa4F2IHvzosmoP0JmD2jqMopKMiPKAKdI%2FMx9euaLzllSastNvXnMrhfcXp%2FY3bvM6mi%2BLCDTWfzzth5ft0sjk0oywx5KGfp2LvEz1KceKFHThhcESuQHzq9FteUZqkucwdtN00f9P6LKmHVAm58qm4pYP39eUcx2kXlqvPw6vnZVLHLmAaocbZWBNPpbdV0gSW%2BnJSTF3sf2nqsekOhxOq1nIlnc2AMv3OFpW7fTQATd6RUdK1XHYbL5b9SGek2vdjKtTa64EhC3GYQ8CcVpd9NrIZiWTKMwEh%2Bz9n2sHAZoKZiHYz3KLK7Qv3f6A9OgQI81jt2tXiZhpQ0Jc%2F0xYgPOudulbOFA1PApiP%2FbZ7D7RITwAKQPJOpM95k92Igo%2FSy6bAMs8XOEKhfNsiU9eVLZ6xh2kdrQviIIGctKPBW%2FKa0eRtJ4c0%2Bk6HHl%2FaokyXwsQMb2SJcAc%2ByUb6uvNf8Os5euF8tLzek0WMObbsdPfzCniTUiPGpuYtqzZ2Jl7ThJ95GoWURGZb9L6lvubmOWUtSB0r%2BxgIsUj8%2B0TjpjIEKrb6KwgqAraQH5NrKuWaqMG0IcAZxYgCGDfup10z%2BcMM5Rt2wWRqOxsJiEv9Uk6plDZqz8BZWSn2Q3V8jt66r38s%2FeeIFH6aISAjGzsw7dn01OlVnHPXYkqeO5KC4jHP9EWUPgX2cEYoKF%2Bdlhl%2Bbuh37DuqrhfOA5KgL0YR2PYYVvjJbg%2FW9N5zHh5BoDn%2BFBl3EIuLxCH7ElCI9TRYYGZ8h%2Be8DqCcFZ1mqGRp1xja5%2FojdWnhU%2FeOrmfUOTJ2c4SpLga0XvlyUIP%2F2Cm8jdsGd68Qk%2FqrOJNCQTw4iOpZdjF5OgJV%2BsApFdSZNuPa4Rz7etO9z99b7Teq2ejMoTnwP3LNBWPnfnibHeVVvlsHXoN1YekbsdTzvZiSPawRR2Cc2qHNXtvMhDb9lWJxAMCi%2B1Y%2F%2Bt4u6IWm6U0eny%2FLBN79iyT21%2FMgyugayVakv6u9SpfHn1Mzp%2B8MPXFESpfW%2BxYuEDfV4Pzodevp8skeRGJX6lvzOfTgBRDZAwSZY%2BxRfWfcAsXx4nHfuN%2Brw0zqc5SHidrG8iNu%2Fg2E5iotN9MaZ2TWxS0lNd33xjFv%2B1IW80gfFYND1jajxACp4KPyLHGhynZe6IWm6U0eny%2FLBN79iyT21%2FMgyugayVakv6u9SpfHn1Mzp%2B8MPXFESpfW%2BxYuEDfUcVYTLbvoikCIM8C4MKtBSfTgBRDZAwSZY%2BxRfWfcAsqyGVumnxdW9c5kD19M5RS1mpDL8QUQlOZBntOPjfnqUd3dloBcD21fYo0dshlxZUwAe65OGgpxlqLNdGqnnJwAWAqCngglQawuBHkjvGKpHrHHZUubDcza7MdTpVaxi%2BgOtMuvw%2F8KaJ4YBjTcahUK8Qyf%2FFeKOtDdFZhYF%2B%2BiRPwx1%2Fc%2Fj2%2BGKwmsiP5Z2C15oAhbKsiwl1dZ04lDKY7R05uI0PkxEMKH0v17SRyak7Op8U4oVwU45sAkMaaHygzpRIQg0hmgmDQW0WDauqowxHyEadjxAyoQ5mnoJYXI9Oo9OI9dRvspSqL9MX2YMMXjkxIf0Ye%2BFmC%2BP3wUWVjfvLAAmU9RTFI6yu7su8g70AHbGE9kdgNlRk5E78VlRIn0zpntEZK7cRt9c29x7FtiuOiIExnWpG2dxNOW8ZVY5ZA01BVBJI0tWHyHlitOTBLhVb7LrJIfrDgPz%2Bvqd6NBQxsHRjUU5XKhLKTz8OW6WhZsYBvMWVXwtPT8qLzY%2BeqHOHh3%2B6DOF494GaTarZ%2BIDNA4HwWSZAiRqz%2F0rLmC2goxbPs2BZc4CUznNCHOlRUxRKFKu%2B2DyB%2BwR%2F6Vhszm%2FrgrahlYo7xa%2BTeQFCUiVYDhlnTn6OWEDEevAilcrGpp6d1BmTzTMdVrxfAa7gjF%2B0Cii32k4AOo5Vwn5U%2Fme58shPdqP70mjl0gr2W4w42UrKXmLgHpYiTMxgEbSkiVYRJpTNwTxe1qLMxTMTm%2F%2BsyjVlSD1wZg01swiOx8ww&amp;HistoryUserInfo=Kzklvda4nLsNaNmvkI1E0pFyU%2BleMlzzWiJtgySxvRVt0FtOzqHuX5%2B3hxvD6Vyh5luX0Nzg%2B4ATjaoZmeJH%2B5ssBXyGq3JENcZ0lU4AM64%3D 1&lt;Response&gt;&lt;Head&gt;&lt;Code&gt;01&lt;/Code&gt;&lt;ErrMsg&gt;&lt;/ErrMsg&gt;&lt;/Head&gt;&lt;Body&gt;&lt;/Body&gt;&lt;/Response&gt; 12345678910111213141516POST /mobile-qr/BaseHttp.dll?MB_CCQRPay_GetQR HTTP/1.1Host: netpay.cmbchina.comConnection: keep-aliveContent-Length: 85Cache-Control: max-age=0Origin: https://netpay.cmbchina.comUpgrade-Insecure-Requests: 1Content-Type: application/x-www-form-urlencodedUser-Agent: Mozilla/5.0 (Linux; Android 7.1.1; Moto G Play Build/NPIS26.48-43-2; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.80 Mobile Safari/537.36 MPBank/7.0.0 Android/7.1.1 AID/Y0qwC+k1qCD/psaXqM5ZOUf17JE= SID/+U6jn/3wHzHJGk6R7iTBjw66V4A= APPTag/1.0(N;1234)Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8Referer: https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_Entry&amp;showtopbar=false&amp;DeviceType=E&amp;Version=7.0.0&amp;SystemVersion=7.1.1&amp;behavior_entryid=qrp004002Accept-Encoding: gzip, deflateAccept-Language: zh-CN,en-CA;q=0.9,en-XA;q=0.8,en-US;q=0.7X-Requested-With: cmb.pbClientNo=459F8A46966F4D6F98177C83426412DF246586164075408800006990&amp;SerialNo=7875259492 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=GB2312&quot; /&gt; &lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-cache, must-revalidate&quot; /&gt; &lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot; /&gt; &lt;meta http-equiv=&quot;Expires&quot; content=&quot;0&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt; &lt;title&gt;收款码&lt;/title&gt; &lt;link href=&quot;styles/Koala_Base.css&quot; type=&quot;text/css&quot; rel=&quot;Stylesheet&quot; /&gt; &lt;link href=&quot;styles/Mobile_CCQRNetPay.css&quot; type=&quot;text/css&quot; rel=&quot;Stylesheet&quot; /&gt; &lt;link href=&quot;styles/remitbubblecontrol.css&quot; type=&quot;text/css&quot; rel=&quot;Stylesheet&quot; /&gt; &lt;link href=&quot;styles/mobilepopup.css&quot; type=&quot;text/css&quot; rel=&quot;Stylesheet&quot; /&gt; &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;styles/cmb_safe_keyboard.css&quot;&gt; &lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;styles/cmb_safe_keyboard_Obfs2.css&quot;&gt; &lt;script src=&quot;jsLib/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/DynaXmlHttp.js&quot;&gt;&lt;/script&gt; &lt;!--ajax实现类--&gt; &lt;script src=&quot;jsLib/remitbubblecontrol.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/XmlPackage.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/juicer-min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/CMBLS.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/Behavior.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/Mobile_CCQRNetPay.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/html2canvas.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;jsLib/cmbperformance.min.js&quot;&gt;&lt;/script&gt; &lt;style type=&quot;text/css&quot;&gt; @font-face &#123; font-family: fontAmount; src: url(&apos;styles/DINOT/DINOT-Medium.otf&apos;); /* IE9+ */ &#125; &lt;/style&gt; &lt;script type=&quot;text/javascript&quot;&gt; window.location.route = &apos;/payment/MB_CCQRPay_MainPage.htm&apos;; CMBPerformance.init(&#123; id: &apos;mobile_qr&apos;, // 模块标识 domain: &apos;&apos;, // 非客户端数据上送地址，生产环境下可不传， delay: 500, // 延迟上报时间，默认500ms random: 0.1, // 抽样 (0-1]，默认为0.1 isPage: true, // 是否收集性能数据，默认为true isResource: true, // 是否收集资源数据，默认为true isError: true, // 是否收集页面异常数据，默认为true isAjax: true, // 是否收集Ajax请求异常数据，默认为true ignore: [/global code/,/successCallback/,/failCallback/,/Script error/], // 异常数据忽略列表，每项为正则表达式 repert: 2 // 异常数据重复上送次数，默认为2次 &#125;); var sBankName = &quot;&quot;; var sAcctNo = &quot;&quot;; var sAcctType = &quot;&quot;; var sDevType = &quot;A&quot;; var sLoginType = &quot;AIONUser&quot;; var sBankLogo = &quot;&quot;; //var sRefNo = &quot;&quot;; //var sDevID = &quot;00271100000201902261820160200000000000000000000000000000Aqs7RAo=&quot;; var sClientName = &quot;黄文志&quot;; //支付卡标志（新绑卡，默认卡，选卡） var g_strShowCardFlag = &quot;M&quot;; //默认卡片索引 var g_DefaultCardIndex = &quot;&quot;; var ClientNo = &quot;459F8A46966F4D6F98177C83426412DF246586164075408800006990&quot;; var SerialNo = &quot;7875259492&quot;; var httpPath = &quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?&quot;; var ClientBehaviorFlag = &quot;Y&quot;; var ClientSaveCCQRImgFlag = &quot;Y&quot;; var g_MBankVersion = &quot;7.0.0&quot;; var RelatedCardListXML = &quot;&lt;Card&gt;&lt;AcctNo&gt;5081&lt;/AcctNo&gt;&lt;AcctType&gt;A&lt;/AcctType&gt;&lt;BankName&gt;招商银行&lt;/BankName&gt;&lt;BranchID&gt;0010&lt;/BranchID&gt;&lt;Mobile&gt;&lt;/Mobile&gt;&lt;PayFlag&gt;Y&lt;/PayFlag&gt;&lt;BankLogo&gt;zhaoshang&lt;/BankLogo&gt;&lt;AcctTypeText&gt;储蓄卡&lt;/AcctTypeText&gt;&lt;ValidatePayCtlFlag&gt;Y&lt;/ValidatePayCtlFlag&gt;&lt;CardStatusDesc&gt;&lt;/CardStatusDesc&gt;&lt;Index&gt;0&lt;/Index&gt;&lt;/Card&gt;&lt;Card&gt;&lt;AcctNo&gt;9367&lt;/AcctNo&gt;&lt;AcctType&gt;C&lt;/AcctType&gt;&lt;BankName&gt;招商银行&lt;/BankName&gt;&lt;BranchID&gt;0000&lt;/BranchID&gt;&lt;Mobile&gt;&lt;/Mobile&gt;&lt;PayFlag&gt;Y&lt;/PayFlag&gt;&lt;BankLogo&gt;zhaoshang&lt;/BankLogo&gt;&lt;AcctTypeText&gt;信用卡&lt;/AcctTypeText&gt;&lt;ValidatePayCtlFlag&gt;Y&lt;/ValidatePayCtlFlag&gt;&lt;CardStatusDesc&gt;&lt;/CardStatusDesc&gt;&lt;Index&gt;1&lt;/Index&gt;&lt;/Card&gt;&quot;; RelatedCardListXML = &quot;&lt;CardList&gt;&quot; + RelatedCardListXML + &quot;&lt;/CardList&gt;&quot;; var appCallBackData = &quot;aHR0cDovL2NtYmxzL0Z1bmN0aW9uSnVtcD9pZD0xJmFjdGlvbj1nb2Z1bmNpZCZmdW5jaWQ9MTAwMDExJnNlcnZlcmlkPUNNQk5ldFBheSZTaG93VG9wQmFyPWZhbHNlPC9DYWxsYmFja0RlZj48L0NhbGxiYWNrRGF0YT4%3d&quot;;// var BindCardUrl = &quot;cmbmobilebank://cmbls/functionjump?action=gofuncid&amp;funcid=6014015&amp;needlogin=true&amp;loginmode=d&amp;cmb_app_trans_parms_start=here&amp;OneNetPayData=60B0C9390C5A08FC93AD48A23DB305BA6EBB45B632482537D942C5A3D7286EF4C19469EF2B66693AF54E0CB9F34693D947C4DBE01DAAB89CDB125F01430DCB3E278CE3C069C0A8B9EFE29283FB4F60B593F2391EC6D9EDA7D7157B841E211C407CFCE570352174D16C6F6B59F2818FF864D06D79B82908C6224069F7037D7A34112D97B2749C5A4130AEB2CD20EDC7E99CA042A7ED2C4B2F8094503674BCE300A9B8C42FEFAD993C3B978EEB518E65445FAC0EE640EE5D8D9BFDB22CE6726AD98E0F69FBBAC1646F5EDEE1287B501030260ACB2A39E7520BBF18FF628A4A8B823CF641D52F7E39A2D77ACD54E637EEC94619A351126A3D3A51D6EF0D6D678A044F9F78DAF4A713EF001A9849E2B7F13E2AF9F6653CF2348ADBEA32D5DE93331F595CDA994FFF26A7DFB5&quot;; //添加新卡跳转地址 var FlagFromQRMainPage = &quot;&quot;; var FlagSupBackToPrePage = &quot;Y&quot;; //是否支持返回到上一页 var CCQRsubmitFlag = &quot;0&quot;; //控制图片刷新频率 var g_CloseKeyBord = &quot;N&quot;; var amountInput = &quot;&quot;; if (amountInput == &quot;&quot;) &#123; amountInput = &quot;0.00&quot;; &#125; var canvasSave; //网关解密卡列表请求提交标志，只允许提交一次 var g_FlagGetDefaultCard = &quot;0&quot;; var g_DefaultCardList = &quot;&quot;; //查询默认卡列表结果 var g_FlagDefaultCardList = &quot;&quot;; //查询默认卡列表完成标志 var sQRNo = &quot;&quot;; var sSuccInfoList = &quot;&quot;; var changeQRId; // 设置间隔执行句柄ID var LoopQRPayResultId;// 设置间隔执行句柄ID var LoopOtherBankUnionQRPayResultId;//设置查询他行卡交易间隔执行句柄ID var LoopOtherBankUnionQRPayResultNum = 0; var LoopOtherBankQRPayResultFlag = &quot;0&quot;;//设置一网通路由平台查询他行卡交易间隔执行句柄标识 var LoopOtherBankQRPayResultNum = 0; var LoopOtherBankQRQueryPayResulTimer;//用于控制未知状态下前三秒轮询 var UID = &quot;010062982787&quot;;//用户标识 var clientHeight; var clientWidth; var count = 0; function InitPage() &#123; SavePageLoadBehavior(&quot;c7b001007&quot;, &quot;C7C&quot;); InitLocation();//根据手机屏幕调整部分div位置 //预加载图片 preloader(); //调用客户端调亮接口并获取支付卡 setTimeout(&quot;getCardFromApp()&quot;, 50); //配置会话时间 setTimeout(&quot;backToScanPage()&quot;, 300000); GetFirstAPP(); $(&quot;#SaveQRImgName&quot;).text(sClientName + &quot;的收款码&quot;); &#125; function InitLocation() &#123; clientHeight = $(window).height(); clientWidth = $(window).width(); var bigQRCodePT = (clientHeight - 275) / 2; $(&quot;#bigQRCodeDiv&quot;).css(&quot;padding-top&quot;, bigQRCodePT); if (amountInput != &quot;0.00&quot;) &#123; ShowInputAmount(); &#125; &#125; function preloader() &#123; //图片预加载 BackgroundImage = new Image(); BackgroundImage.src = &quot;images/bg-c2c@2x.png&quot;; &#125; function backAppClientHome() &#123; if (FlagSupBackToPrePage == &quot;Y&quot;) &#123; BackToClient(sDevType); &#125; else &#123; backToScanPage(); &#125; &#125; function outBackAppClientHome() &#123; backAppClientHome(); &#125; function backToQRPayorClient() &#123; if (FlagFromQRMainPage == &quot;Y&quot;) &#123; var netPayFormObj = document.getElementById(&quot;QRPayEntry&quot;); if (netPayFormObj != null) &#123; netPayFormObj.submit(); &#125; &#125; else &#123; outBackAppClientHome(); &#125; &#125; //返回到扫码页面 function backToScanPage() &#123; getScreenLightNormal(); if (sDevType == &quot;I&quot;) &#123; var ReturnUrl = &quot;http://cmbiphone/tool&quot;; window.open(ReturnUrl, &quot;_top&quot;, &quot;&quot;); &#125; else if (sDevType == &quot;A&quot;) &#123; window.location = &quot;http://cmbls/functionjump?action=gofuncid&amp;funcid=102007&quot;; &#125; else &#123; alert(&quot;设备类型出错，请重新登录！&quot;); &#125; &#125; function ChangeWidth() &#123; var width = document.getElementById(&quot;SetAmount&quot;).clientWidth; var btnWid = (width - 48) * 0.5; $(&quot;#SetAmountCancel&quot;).css(&quot;width&quot;, btnWid + &quot;px&quot;); $(&quot;#SetAmountConfirm&quot;).css(&quot;width&quot;, btnWid + &quot;px&quot;); &#125; function bigQRCodeImg() &#123; SaveBehavior(&quot;c7c001002&quot;);//C2C被扫埋点 $(&quot;#bigQRCodeDiv&quot;).show(); &#125; function smaillQRCodeImg() &#123; $(&quot;#bigQRCodeDiv&quot;).hide(); &#125; function SetAmount() &#123; SaveBehavior(&quot;c7c001003&quot;);//C2C被扫埋点 $(&quot;#Amount&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#SaveQRImgAmount&quot;).css(&quot;display&quot;, &quot;none&quot;); ChangeLocationWithOutAmount(); $(&quot;#SetAmountText&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#CCcardTransfer&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#SetAmount&quot;).css(&quot;display&quot;, &quot;block&quot;); cmbSafeInput.setText(&quot;&quot;); ChangeWidth(); $(&quot;#CCQRCode&quot;).unbind(&quot;click&quot;); &#125; function ClearAmount() &#123; SaveBehavior(&quot;c7c005001&quot;);//C2C被扫埋点 $(&quot;#Amount&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#SaveQRImgAmount&quot;).css(&quot;display&quot;, &quot;none&quot;); ChangeLocationWithOutAmount(); amountInput = &quot;0.00&quot;; $(&quot;#AmountShow&quot;).text(&quot;&quot;); $(&quot;#SaveQRImgAmount&quot;).text(&quot;&quot;); $(&quot;#SetAmountText&quot;).css(&quot;display&quot;, &quot;block&quot;); $(&quot;#ClearAmountText&quot;).css(&quot;display&quot;, &quot;none&quot;); changeQR(); &#125; function OnAmountCancel() &#123; amountInput = &quot;0.00&quot;; if (amountInput == &quot;0.00&quot;) &#123; $(&quot;#Amount&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#SaveQRImgAmount&quot;).css(&quot;display&quot;, &quot;none&quot;); ChangeLocationWithOutAmount(); &#125; else &#123; $(&quot;#Amount&quot;).css(&quot;display&quot;, &quot;block&quot;); $(&quot;#SaveQRImgAmount&quot;).css(&quot;display&quot;, &quot;block&quot;); ChangeLocationWithAmount(); &#125; $(&quot;#SetAmount&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#SetAmountText&quot;).css(&quot;display&quot;, &quot;block&quot;); $(&quot;#ClearAmountText&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#CCcardTransfer&quot;).css(&quot;display&quot;, &quot;block&quot;); setTimeout(function () &#123; $(&quot;#CCQRCode&quot;).bind(&quot;click&quot;, bigQRCodeImg); $(&quot;#bigQRCodeDiv&quot;).css(&quot;top&quot;, 0); &#125;, 500); &#125; function OnAmountConfirm() &#123; var amount = amountInput; //检查金额格式 if (!beAmount(amount)) &#123; alert(&quot;[收款金额]格式错误！只允许数字，整数部分最多11位，小数部分最多2位&quot;); return; &#125; amountInput = parseFloat(amount).toString(); amountInput = FillLastNum(amountInput, amountInput.length); if (amountInput == &quot;0.00&quot;) &#123; alert(&quot;金额不能为零，请重新输入！&quot;); return; &#125; ShowInputAmount(); setTimeout(function () &#123; $(&quot;#CCQRCode&quot;).bind(&quot;click&quot;, bigQRCodeImg); $(&quot;#bigQRCodeDiv&quot;).css(&quot;top&quot;, 0); &#125;, 500); changeQR(); &#125; function ShowInputAmount() &#123; $(&quot;#AmountInput&quot;).val(amountInput); $(&quot;#AmountShow&quot;).text(amountInput); $(&quot;#SaveQRImgAmount&quot;).text(&quot;￥&quot; + amountInput); $(&quot;#SetAmount&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#SetAmountText&quot;).css(&quot;display&quot;, &quot;none&quot;); $(&quot;#Amount&quot;).css(&quot;display&quot;, &quot;block&quot;); $(&quot;#SaveQRImgAmount&quot;).css(&quot;display&quot;, &quot;block&quot;); ChangeLocationWithAmount(); $(&quot;#ClearAmountText&quot;).css(&quot;display&quot;, &quot;block&quot;); $(&quot;#CCcardTransfer&quot;).css(&quot;display&quot;, &quot;block&quot;); &#125; function ShowSucInfo(ID) &#123; var id = parseInt(ID); var behaviorID = count - id; if (amountInput == &quot;0.00&quot;) &#123; if (behaviorID &gt; 9) &#123; SaveBehavior(&quot;c8c0010&quot; + behaviorID);//C2C被扫埋点 &#125; else &#123; SaveBehavior(&quot;c8c00100&quot; + behaviorID);//C2C被扫埋点 &#125; &#125; else &#123; if (behaviorID &gt; 9) &#123; SaveBehavior(&quot;c8c0020&quot; + behaviorID);//C2C被扫埋点 &#125; else &#123; SaveBehavior(&quot;c8c00200&quot; + behaviorID);//C2C被扫埋点 &#125; &#125; document.getElementById(&quot;ID&quot;).value = ID; document.getElementById(&quot;QRNo&quot;).value = sQRNo; document.getElementById(&quot;amountInput&quot;).value = amountInput; document.getElementById(&quot;succInfoList&quot;).value = sSuccInfoList; var netPayFormObj = document.getElementById(&quot;CCQRPaySuccess&quot;); if (netPayFormObj != null) &#123; netPayFormObj.submit(); &#125; &#125; function ChangeLocationWithOutAmount() &#123; $(&quot;.SaveContentQR&quot;).css(&quot;height&quot;, &quot;292px&quot;); $(&quot;.SaveContentQR&quot;).css(&quot;margin-bottom&quot;, &quot;42px&quot;); &#125; function ChangeLocationWithAmount() &#123; $(&quot;.SaveContentQR&quot;).css(&quot;height&quot;, &quot;330px&quot;); $(&quot;.SaveContentQR&quot;).css(&quot;margin-bottom&quot;, &quot;28px&quot;); &#125; //遮罩层持久化数据 //查询初始信息 function GetFirstAPP() &#123; try &#123; var TargetURL = &quot;http://cmbls/DataPersistence?id=PayInf&amp;action=Get&amp;key=IsShowGuide&quot; + UID;//持久化接口获取数据 window.location = TargetURL; var screenWidth = document.body.clientWidth;//获取屏幕的宽和长 var screenHeight = document.body.clientHeight; var diagonal = Math.sqrt(Math.pow(screenWidth, 2) + Math.pow(screenHeight, 2)); var radius = (diagonal - 53) / 2 + 22; document.getElementById(&quot;SvgjsCircle&quot;).setAttribute(&quot;cx&quot;, (screenWidth - 25).toString());//根据屏幕的长宽自适应样式 document.getElementById(&quot;SvgjsCircle&quot;).setAttribute(&quot;r&quot;, radius.toString()); document.getElementById(&quot;SvgjsCircle&quot;).setAttribute(&quot;stroke-width&quot;, ((radius - 22) * 2).toString()); document.getElementById(&quot;SvgjsImage&quot;).setAttribute(&quot;x&quot;, (screenWidth - 211).toString()); document.getElementById(&quot;SvgjsTspan_1&quot;).setAttribute(&quot;x&quot;, (screenWidth / 2).toString()); document.getElementById(&quot;SvgjsTspan_2&quot;).setAttribute(&quot;x&quot;, (screenWidth / 2).toString()); document.getElementById(&quot;SvgjsRect&quot;).setAttribute(&quot;x&quot;, (screenWidth / 2 - 82.5).toString()); document.getElementById(&quot;SvgjsRect&quot;).setAttribute(&quot;y&quot;, (screenHeight - 160).toString()); document.getElementById(&quot;SvgjsText_1&quot;).setAttribute(&quot;x&quot;, (screenWidth / 2).toString()); document.getElementById(&quot;SvgjsText_1&quot;).setAttribute(&quot;y&quot;,(screenHeight - 155).toString()); &#125; catch (e) &#123; &#125; &#125; function knowClick() &#123; var TargetURL = &quot;http://cmbls/DataPersistence?id=PayInf&amp;action=Set&amp;key=IsShowGuide&quot; + UID + &quot;&amp;value=Y&quot;; window.location = TargetURL; &#125; &lt;/script&gt;&lt;/head&gt;&lt;body class=&quot;CCQRPayBody&quot; onload=&quot;InitPage()&quot;&gt; &lt;!--保存二维码图片--&gt; &lt;div id=&quot;SaveQRContent&quot; style=&quot;display:none;z-index:-1;position:absolute;width:100%&quot;&gt; &lt;div class=&quot;SaveLogo&quot;&gt; &lt;img class=&quot;SaveLogoImg&quot; src=&quot;images/bankNameLogo.png&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;SaveContent&quot;&gt; &lt;div class=&quot;SaveContentQR&quot;&gt; &lt;img id=&quot;SaveQRImg&quot; class=&quot;SaveQRImg&quot; src=&quot;&quot; /&gt; &lt;span id=&quot;SaveQRImgName&quot; class=&quot;SaveQRImgName&quot;&gt;某XX的收款码&lt;/span&gt; &lt;span id=&quot;SaveQRImgAmount&quot; class=&quot;SaveQRImgAmount&quot; style=&quot;display:none;&quot;&gt;￥88.08&lt;/span&gt; &lt;/div&gt; &lt;div&gt; &lt;span class=&quot;SaveContentText&quot;&gt;&amp;nbsp打开招商银行APP【扫一扫】&lt;/span&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;CCQRPayBodyMain&quot;&gt; &lt;!--导航栏logo--&gt; &lt;div class=&quot;Logo&quot;&gt; &lt;div&gt; &lt;img id=&quot;BackToClient&quot; class=&quot;BackToClient&quot; src=&quot;images/titlebar.png&quot; onclick=&quot;backToQRPayorClient();&quot; /&gt; &lt;img id=&quot;managerMenu&quot; class=&quot;menu&quot; src=&quot;images/upMore@2x.png&quot; onclick=&quot;OpenQRPayMenu();&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;upLogoPay&quot;&gt; 收款码 &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;CCQRBodyCache&quot; id=&quot;CCQRBodyCache&quot;&gt; &lt;div&gt;正在处理，请稍候...&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;CCQRBody&quot; id=&quot;CCQRPayIframe&quot;&gt; &lt;!--付款码区域--&gt; &lt;div class=&quot;CCQRFiledDiv&quot; id=&quot;CCQRFiledDiv&quot;&gt; &lt;div class=&quot;CCQRBodyText&quot; id=&quot;CCQRBodyText&quot;&gt; &lt;span style=&quot;margin-left:15px;float:left;&quot;&gt;我要收款&lt;/span&gt; &lt;/div&gt; &lt;div style=&quot;height:0.5px;background:#eee;&quot;&gt;&lt;/div&gt; &lt;div id=&quot;CCQRCode&quot; class=&quot;CCQRCode&quot;&gt; &lt;img id=&quot;CCQRCodeImg&quot; class=&quot;CCQRCodeImg&quot; src=&quot;&quot; /&gt; &lt;img id=&quot;CCQRCodeImgLogo&quot; style=&quot;display:none;&quot; class=&quot;CCQRCodeLogo&quot; src=&quot;images/ccqr_shou.png&quot; /&gt; &lt;/div&gt; &lt;!--显示金额--&gt; &lt;div id=&quot;Amount&quot; style=&quot;display:none;&quot;&gt; &lt;span class=&quot;AmountText&quot;&gt;￥&lt;/span&gt; &lt;span id=&quot;AmountShow&quot; class=&quot;AmountText&quot;&gt;&lt;/span&gt; &lt;/div&gt; &lt;!--设置金额文本--&gt; &lt;div&gt; &lt;span id=&quot;SetAmountText&quot; class=&quot;SetAmountText&quot; onclick=&quot;SetAmount()&quot;&gt;设置金额&lt;/span&gt; &lt;/div&gt; &lt;!--清除金额文本--&gt; &lt;div&gt; &lt;span id=&quot;ClearAmountText&quot; class=&quot;SetAmountText&quot; onclick=&quot;ClearAmount()&quot; style=&quot;display:none;&quot;&gt;清除金额&lt;/span&gt; &lt;/div&gt; &lt;!--银行卡--&gt; &lt;div class=&quot;CCcardTransfer&quot; id=&quot;CCcardTransfer&quot; style=&quot;background:#eee&quot;&gt; &lt;/div&gt; &lt;!--设置金额框--&gt; &lt;div id=&quot;SetAmount&quot; style=&quot;display:none;&quot;&gt; &lt;div class=&quot;SetAmountInput&quot;&gt; &lt;span class=&quot;AmountInputText&quot;&gt;￥&lt;/span&gt; &lt;div selected=&quot;true&quot;&gt; &lt;h3 style=&quot;height: 45px;padding-left:40px;&quot; id=&apos;AmountInput&apos; class=&quot;AmountInput&quot;&gt;&lt;/h3&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;SetAmountHandle&quot; id=&quot;SetAmountHandle&quot;&gt; &lt;input type=&quot;button&quot; id=&quot;SetAmountCancel&quot; class=&quot;SetAmountCancel&quot; onclick=&quot;OnAmountCancel()&quot; value=&quot;取消&quot;&gt; &lt;input type=&quot;button&quot; id=&quot;SetAmountConfirm&quot; class=&quot;SetAmountConfirm&quot; onclick=&quot;OnAmountConfirm()&quot; value=&quot;确定&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;!--成功结果展示--&gt; &lt;div id=&quot;DySuccList&quot; class=&quot;SucChoose&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!--阴影层--&gt; &lt;div id=&apos;remit_shadow_2&apos; selected=&apos;true&apos;&gt;&lt;/div&gt; &lt;!--阴影层--&gt; &lt;div id=&apos;remit_shadow_1&apos; selected=&apos;true&apos; onclick=&quot;CloseCCQRMenu();&quot;&gt;&lt;/div&gt; &lt;!--选择菜单--&gt; &lt;div id=&quot;QRMenu&quot; style=&quot;display:none;right:15px;width:-webkit-fit-content;width:-moz-fit-content;&quot;&gt; &lt;div class=&quot;MenuChoose&quot; onclick=&quot;OpenCCQRExplanPage();&quot;&gt;收款说明&lt;/div&gt; &lt;div class=&quot;MenuChoose1&quot; style=&quot;opacity:0.1&quot;&gt;&lt;hr /&gt;&lt;/div&gt; &lt;div class=&quot;MenuChoose2&quot; onclick=&quot;SaveQRCode()&quot;&gt;保存二维码&lt;/div&gt; &lt;div class=&quot;MenuChoose1&quot; style=&quot;opacity:0.1&quot;&gt;&lt;hr /&gt;&lt;/div&gt; &lt;div class=&quot;MenuChoose2&quot; onclick=&quot;createShortCut()&quot;&gt;添加到桌面&lt;/div&gt; &lt;/div&gt; &lt;!--放大二维码图--&gt; &lt;div id=&quot;bigQRCodeDiv&quot; class=&quot;bigQRCode&quot; style=&quot;display:none;&quot; onclick=&quot;smaillQRCodeImg()&quot;&gt; &lt;img id=&quot;BigQRCodeImg&quot; class=&quot;BigQRCodeImg&quot; src=&quot;&quot; /&gt; &lt;/div&gt; &lt;!--换卡弹出框--&gt; &lt;div id=&quot;cardListBtnDiv&quot; class=&quot;CardSelectDiv&quot;&gt; &lt;div class=&quot;CardSelectDivArea&quot;&gt; &lt;div class=&quot;CardTitle&quot; id=&quot;CardListTitle&quot;&gt; &lt;div class=&quot;cardlist-close&quot; onclick=&quot;OnClickCloseBtn()&quot;&gt; &lt;/div&gt; 选择收款方式 &lt;/div&gt; &lt;div class=&quot;CardChoose&quot; id=&quot;CardListPan&quot;&gt; &lt;table class=&quot;CardListDiv&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; id=&quot;TBCardList&quot;&gt;&lt;/table&gt; &lt;/div&gt; &lt;div class=&quot;cardlist-addcarddiv&quot; id=&quot;CardListBottom&quot; onclick=&quot;javascript:AddNewCard();&quot;&gt; &lt;a class=&quot;cardlist-addcard&quot;&gt; &lt;/a&gt; &lt;span class=&quot;cardlist-addcardspan&quot;&gt;添加新卡收款&lt;/span&gt; &lt;div class=&quot;cardlist-addcardnext&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!--遮罩层--&gt; &lt;div id=&quot;userGuide&quot; style=&quot;display: none; position: fixed; width: 100%; height: 100%; top: 0px; left: 0px;&quot;&gt; &lt;svg id=&quot;SvgjsSvg&quot; width=&quot;100%&quot; height=&quot;100%&quot;&gt; &lt;circle id=&quot;SvgjsCircle&quot; r=&quot;500&quot; cy=&quot;22.5&quot; stroke=rgba(0,0,0,0.7) fill=rgba(0,0,0,0)&gt;&lt;/circle&gt; &lt;text id=&quot;SvgjsText_2&quot; font-family=&quot;Helvetica, Arial, sans-serif&quot; y=&quot;211&quot; font-size=&quot;18px&quot; text-anchor=&quot;middle&quot;&gt; &lt;tspan id=&quot;SvgjsTspan_1&quot; fill=&quot;#ffffff&quot; width=&quot;16&quot; height=&quot;0&quot;&gt;为了更方便您操作收款，您可以在&lt;/tspan&gt; &lt;/text&gt; &lt;text id=&quot;SvgjsText_3&quot; font-family=&quot;Helvetica, Arial, sans-serif&quot; y=&quot;232&quot; font-size=&quot;18px&quot; text-anchor=&quot;middle&quot;&gt; &lt;tspan id=&quot;SvgjsTspan_2&quot; fill=&quot;#ffffff&quot; width=&quot;16&quot; height=&quot;0&quot;&gt;这里将其“添加至桌面”&lt;/tspan&gt; &lt;/text&gt; &lt;rect id=&quot;SvgjsRect&quot; width=&quot;165px&quot; height=&quot;40px&quot; fill-opacity=&quot;0&quot; fill=&quot;#ffffff&quot; rx=&quot;2&quot; ry=&quot;2&quot; stroke=&quot;#f7f4f4&quot; y=&quot;498&quot; onclick=&quot;knowClick()&quot;&gt;&lt;/rect&gt; &lt;text id=&quot;SvgjsText_1&quot; font-family=&quot;PingFangSC-Medium&quot; fill=&quot;#ffffff&quot; font-size=&quot;16&quot; archor=&quot;start&quot; family=&quot;PingFangSC-Medium&quot; size=&quot;16&quot; y=&quot;503&quot; text-anchor=&quot;middle&quot;&gt; &lt;tspan id=&quot;SvgjsTspan1013&quot; dy=&quot;20.8&quot; onclick=&quot;knowClick()&quot;&gt;我知道了&lt;/tspan&gt; &lt;/text&gt; &lt;image id=&quot;SvgjsImage&quot; xlink:href=&quot;./images/guideLine.png&quot; width=&quot;154&quot; height=&quot;154&quot; y=&quot;26&quot;&gt;&lt;/image&gt; &lt;/svg&gt; &lt;/div&gt; &lt;!--成功页表单--&gt; &lt;form id=&quot;CCQRPaySuccess&quot; action=&quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_OK&quot; method=&quot;post&quot; autocomplete=&quot;off&quot; target=&quot;_self&quot;&gt; &lt;input type=&quot;hidden&quot; value=&quot;459F8A46966F4D6F98177C83426412DF246586164075408800006990&quot; id=&quot;ClientNo&quot; name=&quot;ClientNo&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;7875259492&quot; id=&quot;SerialNo&quot; name=&quot;SerialNo&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?&quot; id=&quot;HttpPath&quot; name=&quot;HttpPath&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;&quot; id=&quot;ID&quot; name=&quot;ID&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;&quot; id=&quot;QRNo&quot; name=&quot;QRNo&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;&quot; id=&quot;amountInput&quot; name=&quot;amountInput&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;&quot; id=&quot;succInfoList&quot; name=&quot;succInfoList&quot; /&gt; &lt;/form&gt; &lt;!--返回付款码--&gt; &lt;form id=&quot;QRPayEntry&quot; action=&quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_QRPay_Entry&quot; method=&quot;post&quot; autocomplete=&quot;off&quot; target=&quot;_self&quot;&gt; &lt;input type=&quot;hidden&quot; value=&quot;459F8A46966F4D6F98177C83426412DF246586164075408800006990&quot; id=&quot;ClientNo&quot; name=&quot;ClientNo&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;7875259492&quot; id=&quot;SerialNo&quot; name=&quot;SerialNo&quot; /&gt; &lt;input type=&quot;hidden&quot; value=&quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?&quot; id=&quot;HttpPath&quot; name=&quot;HttpPath&quot; /&gt; &lt;/form&gt; &lt;!--Android生成快捷方式页面--&gt; &lt;form id=&quot;createAndroidShortCut&quot; action=&quot;https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_CreateAndroidShortCut&quot; method=&quot;post&quot; autocomplete=&quot;off&quot; target=&quot;_self&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;ClientNo&quot; id=&quot;ClientNo&quot; value=&quot;459F8A46966F4D6F98177C83426412DF246586164075408800006990&quot; /&gt; &lt;input type=&quot;hidden&quot; name=&quot;SerialNo&quot; id=&quot;SerialNo&quot; value=&quot;7875259492&quot; /&gt; &lt;/form&gt; &lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot; src=&quot;./jsLib/cmb_security_keyboard.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot; src=&quot;./jsLib/cmb_safe_keyboard.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; var cmbSafeInput = new CMBSafeInput(&#123; &apos;id&apos;: &apos;AmountInput&apos;, &apos;type&apos;: 2,//2 &apos;isRandom&apos;: false, &apos;placeholder&apos;: &apos;&apos;, &apos;maxLength&apos;: 13, &apos;isEncrypt&apos;: false, &apos;isSingleCallback&apos;: true, &apos;onShowCallback&apos;: onShowCallback, &apos;onSuccessCallback&apos;: onSuccessCallback, &apos;onDismissCallback&apos;: onDismissCallback &#125;); $(&apos;#btn-submit&apos;).on(&apos;click&apos;, function () &#123; //主动获取焦点 amountInput.onFocus(); &#125;); // 键盘初始化回调 function onShowCallback(id, inputVal) &#123; amountInput = &quot;0.0&quot;; &#125; // 键盘消失回调 function onDismissCallback(id, inputVal) &#123; amountInput = inputVal; &#125; // 键盘输入回调 function onSuccessCallback(id, inputVal) &#123; amountInput = inputVal; &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 1234567891011121314POST /mobile-qr/BaseHttp.dll?MB_CCQRPay_GetDefaultCard HTTP/1.1Host: netpay.cmbchina.comConnection: keep-aliveContent-Length: 102Origin: https://netpay.cmbchina.comUser-Agent: Mozilla/5.0 (Linux; Android 7.1.1; Moto G Play Build/NPIS26.48-43-2; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.80 Mobile Safari/537.36 MPBank/7.0.0 Android/7.1.1 AID/Y0qwC+k1qCD/psaXqM5ZOUf17JE= SID/+U6jn/3wHzHJGk6R7iTBjw66V4A= APPTag/1.0(N;1234)Content-Type: application/x-www-form-urlencoded;charset=UTF-8Accept: */*Referer: https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_GetQRAccept-Encoding: gzip, deflateAccept-Language: zh-CN,en-CA;q=0.9,en-XA;q=0.8,en-US;q=0.7X-Requested-With: cmb.pbClientNo=459F8A46966F4D6F98177C83426412DF246586164075408800006990&amp;SerialNo=7875259492&amp;DefaultCardList= 1&lt;Response&gt;&lt;Head&gt;&lt;Code&gt;00&lt;/Code&gt;&lt;ErrMsg&gt;&lt;/ErrMsg&gt;&lt;/Head&gt;&lt;Body&gt;&lt;DefaultCardNo&gt;&lt;AcctNo&gt;5081&lt;/AcctNo&gt;&lt;AcctType&gt;A&lt;/AcctType&gt;&lt;BankName&gt;招商银行&lt;/BankName&gt;&lt;BranchID&gt;0010&lt;/BranchID&gt;&lt;Mobile&gt;&lt;/Mobile&gt;&lt;PayFlag&gt;Y&lt;/PayFlag&gt;&lt;BankLogo&gt;zhaoshang&lt;/BankLogo&gt;&lt;AcctTypeText&gt;储蓄卡&lt;/AcctTypeText&gt;&lt;ValidatePayCtlFlag&gt;Y&lt;/ValidatePayCtlFlag&gt;&lt;CardStatusDesc&gt;&lt;/CardStatusDesc&gt;&lt;DefaultCardNoIndex&gt;0&lt;/DefaultCardNoIndex&gt;&lt;/DefaultCardNo&gt;&lt;appCallBackData&gt;PENhbGxiYWNrRGF0YT48VHlwZT5DTUJMUzwvVHlwZT48Q2FsbGJhY2tEZWY%2baHR0cDovL2NtYmxzL0Z1bmN0aW9uSnVtcD9pZD0xJmFjdGlvbj1nb2Z1bmNpZCZmdW5jaWQ9MTAwMDAxJnNlcnZlcmlkPUNNQk5ldFBheSZTaG93VG9wQmFyPWZhbHNlPC9DYWxsYmFja0RlZj48L0NhbGxiYWNrRGF0YT4%3d&lt;/appCallBackData&gt;&lt;/Body&gt;&lt;/Response&gt; 1234567891011121314POST /mobile-qr/BaseHttp.dll?MB_CCQRPay_GetQRUrl HTTP/1.1Host: netpay.cmbchina.comConnection: keep-aliveContent-Length: 102Origin: https://netpay.cmbchina.comUser-Agent: Mozilla/5.0 (Linux; Android 7.1.1; Moto G Play Build/NPIS26.48-43-2; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.80 Mobile Safari/537.36 MPBank/7.0.0 Android/7.1.1 AID/Y0qwC+k1qCD/psaXqM5ZOUf17JE= SID/+U6jn/3wHzHJGk6R7iTBjw66V4A= APPTag/1.0(N;1234)Content-Type: application/x-www-form-urlencoded;charset=UTF-8Accept: */*Referer: https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_GetQRAccept-Encoding: gzip, deflateAccept-Language: zh-CN,en-CA;q=0.9,en-XA;q=0.8,en-US;q=0.7X-Requested-With: cmb.pbClientNo=459F8A46966F4D6F98177C83426412DF246586164075408800006990&amp;SerialNo=7875259492&amp;AmountInput=0.00 12&lt;Response&gt;&lt;Head&gt;&lt;Code&gt;00&lt;/Code&gt;&lt;ErrMsg&gt;&lt;/ErrMsg&gt;&lt;/Head&gt;&lt;Body&gt;&lt;QRNo&gt;https%3a%2f%2fqr.95516.com%2f49990010%2fRDR201902261702049748730399&lt;/QRNo&gt;&lt;/Body&gt;&lt;/Response&gt; 1234567891011121314POST /mobile-qr/BaseHttp.dll?MB_CCQRPay_QueryResult HTTP/1.1Host: netpay.cmbchina.comConnection: keep-aliveContent-Length: 168Origin: https://netpay.cmbchina.comUser-Agent: Mozilla/5.0 (Linux; Android 7.1.1; Moto G Play Build/NPIS26.48-43-2; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.80 Mobile Safari/537.36 MPBank/7.0.0 Android/7.1.1 AID/Y0qwC+k1qCD/psaXqM5ZOUf17JE= SID/+U6jn/3wHzHJGk6R7iTBjw66V4A= APPTag/1.0(N;1234)Content-Type: application/x-www-form-urlencoded;charset=UTF-8Accept: */*Referer: https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_GetQRAccept-Encoding: gzip, deflateAccept-Language: zh-CN,en-CA;q=0.9,en-XA;q=0.8,en-US;q=0.7X-Requested-With: cmb.pbClientNo=459F8A46966F4D6F98177C83426412DF246586164075408800006990&amp;SerialNo=7875259492&amp;QRNo=https%253a%252f%252fqr.95516.com%252f49990010%252fRDR201902261702049748730399 123456789101112131415POST /mobile-qr/BaseHttp.dll?MB_CCQRPay_QueryResult HTTP/1.1Host: netpay.cmbchina.comConnection: keep-aliveContent-Length: 168Origin: https://netpay.cmbchina.comUser-Agent: Mozilla/5.0 (Linux; Android 7.1.1; Moto G Play Build/NPIS26.48-43-2; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.80 Mobile Safari/537.36 MPBank/7.0.0 Android/7.1.1 AID/Y0qwC+k1qCD/psaXqM5ZOUf17JE= SID/+U6jn/3wHzHJGk6R7iTBjw66V4A= APPTag/1.0(N;1234)Content-Type: application/x-www-form-urlencoded;charset=UTF-8Accept: */*Referer: https://netpay.cmbchina.com/mobile-qr/BaseHttp.dll?MB_CCQRPay_GetQRAccept-Encoding: gzip, deflateAccept-Language: zh-CN,en-CA;q=0.9,en-XA;q=0.8,en-US;q=0.7X-Requested-With: cmb.pbClientNo=459F8A46966F4D6F98177C83426412DF246586164075408800006990&amp;SerialNo=7875259492&amp;QRNo=https%253a%252f%252fqr.95516.com%252f49990010%252fRDR201902261702049748730399]]></content>
      <categories>
        <category>Work</category>
      </categories>
      <tags>
        <tag>Work</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vue使用问题]]></title>
    <url>%2F2019%2F02%2F25%2F%E5%89%8D%E7%AB%AF%2Fvue%2FVue%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[页面参数传递params通过route.params 获取参数 1console.log(this.$route.params.uuid) 一、 在Router 中定义:uuid 方式定义params 1234567891011121314151617181920212223242526export const constantRouterMap = [ &#123; path: &apos;/404&apos;, component: () =&gt; import(&apos;@/views/404&apos;), hidden: true &#125;, &#123; path: &apos;/&apos;, component: Layout, redirect: &apos;/index&apos;, name: &apos;Index&apos;, hidden: true, children: [&#123; path: &apos;index&apos;, component: () =&gt; import(&apos;@/views/index&apos;) &#125;] &#125;, &#123; path: &apos;/notify/:uuid/:jsession&apos;, component: Layout, name: &apos;Notify&apos;, hidden: true, children: [&#123; path: &apos;&apos;, component: () =&gt; import(&apos;@/views/notify/notify&apos;) &#125;] &#125;, &#123; path: &apos;*&apos;, redirect: &apos;/404&apos;, hidden: true &#125;] 二、 在页面中获取参数 1console.log(this.$route.params.uuid) query通过query 获取参数 1console.log(this.$route.query) 一、 添加参数 无须定义 router只要在url 添加 ?uuid=XXX&amp;jsession=XXX 二、 获取参数 1console.log(this.$route.query) 国际化参考 js 使用1this.features[0].name = this.paymentDay + this.$t(&apos;route._day_video_history&apos;) html 使用1&lt;span&gt;&#123;&#123; $t(&quot;route.LEARN_MORE&quot;) &#125;&#125; &lt;/span&gt; js 缓存问题在移动端 webview 会缓存 js ,js 文件名一样会使用缓存js 解决方案 发版 修改 version config.js 中添加 version 12version: new Date().getTime() 在 build/webpack.prod.conf.js 修改前 12345output: &#123; path: config.build.assetsRoot, filename: utils.assetsPath(&apos;js/[name].[chunkhash:8].js&apos;), chunkFilename: utils.assetsPath(&apos;js/[name].[chunkhash:8].js&apos;)&#125;, 修改后 12345output: &#123; path: config.build.assetsRoot, filename: utils.assetsPath(&apos;js/[name].[chunkhash:8]&apos; + config.build.version + &apos;.js&apos;), chunkFilename: utils.assetsPath(&apos;js/[name].[chunkhash:8]&apos; + config.build.version + &apos;.js&apos;) &#125;,]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 监听通知消息]]></title>
    <url>%2F2019%2F02%2F22%2Fandroid%2Fproblem%2Fandroid%20%E7%9B%91%E5%90%AC%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF%2F</url>
    <content type="text"><![CDATA[android 监听通知消息1234监听通知消息 系统权限 开启权限 跳转系统设置 startActivity(new Intent(&quot;android.settings.ACTION_NOTIFICATION_LISTENER_SETTINGS&quot;)); NotificationListenerService 监听创建 NotificationListenerService的监听123456789101112131415161718192021222324252627282930public class NotificationMonitorService extends NotificationListenerService &#123; // 在收到消息时触发 @Override public void onNotificationPosted(StatusBarNotification sbn) &#123; // TODO Auto-generated method stub Bundle extras = sbn.getNotification().extras; // 获取接收消息APP的包名 String notificationPkg = sbn.getPackageName(); // 获取接收消息的抬头 String notificationTitle = extras.getString(Notification.EXTRA_TITLE); // 获取接收消息的内容 String notificationText = extras.getString(Notification.EXTRA_TEXT); Log.i(&quot;XSL_Test&quot;, &quot;Notification posted &quot; + notificationTitle + &quot; &amp; &quot; + notificationText); &#125; // 在删除消息时触发 @Override public void onNotificationRemoved(StatusBarNotification sbn) &#123; // TODO Auto-generated method stub Bundle extras = sbn.getNotification().extras; // 获取接收消息APP的包名 String notificationPkg = sbn.getPackageName(); // 获取接收消息的抬头 String notificationTitle = extras.getString(Notification.EXTRA_TITLE); // 获取接收消息的内容 String notificationText = extras.getString(Notification.EXTRA_TEXT); Log.i(&quot;XSL_Test&quot;, &quot;Notification removed &quot; + notificationTitle + &quot; &amp; &quot; + notificationText); &#125;&#125; AndroidManifest.xml 中添加配置1234567 &lt;service android:name=&quot;.NotificationMonitorService&quot; android:label=&quot;NotificationMonitor&quot; android:permission=&quot;android.permission.BIND_NOTIFICATION_LISTENER_SERVICE&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.service.notification.NotificationListenerService&quot; /&gt; &lt;/intent-filter&gt;&lt;/service&gt; 开启权限 监听1234567if (!isEnabled()) &#123; startActivity(new Intent(&quot;android.settings.ACTION_NOTIFICATION_LISTENER_SETTINGS&quot;));&#125; else &#123; Toast toast = Toast.makeText(getApplicationContext(), &quot;监控器开关已打开&quot;, Toast.LENGTH_SHORT); toast.show();&#125; 123456789101112131415161718 // 判断是否打开了通知监听权限private boolean isEnabled() &#123; String pkgName = getPackageName(); final String flat = Settings.Secure.getString(getContentResolver(), &quot;enabled_notification_listeners&quot;); if (!TextUtils.isEmpty(flat)) &#123; final String[] names = flat.split(&quot;:&quot;); for (int i = 0; i &lt; names.length; i++) &#123; final ComponentName cn = ComponentName.unflattenFromString(names[i]); if (cn != null) &#123; if (TextUtils.equals(pkgName, cn.getPackageName())) &#123; return true; &#125; &#125; &#125; &#125; return false;&#125;]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>problem</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 短信监控]]></title>
    <url>%2F2019%2F02%2F21%2Fandroid%2Fproblem%2Fandroid%20%E7%9F%AD%E4%BF%A1%E7%9B%91%E6%8E%A7%2F</url>
    <content type="text"><![CDATA[android 短信监控123短信监控 方式1. BroadcastReceiver监听2. ContentObserver 监听 BroadcastReceiver监听1234567891011121314151617181920212223public class SmsReceiver extends BroadcastReceiver &#123; @Override public void onReceive(Context context, Intent intent) &#123; Bundle bundle = intent.getExtras(); SmsMessage msg = null; if (null != bundle) &#123; Object[] smsObj = (Object[]) bundle.get(&quot;pdus&quot;); for (Object object : smsObj) &#123; msg = SmsMessage.createFromPdu((byte[]) object); Date date = new Date(msg.getTimestampMillis());// 时间 SimpleDateFormat format = new SimpleDateFormat( &quot;yyyy-MM-dd HH:mm:ss&quot;); String receiveTime = format.format(date); Log.e(&quot;receiveTime&quot;, &quot;receiveTime:&quot; + receiveTime); Log.e(&quot;fuyanan&quot;, &quot;address:&quot; + msg.getOriginatingAddress() + &quot; body:&quot; + msg.getDisplayMessageBody() + &quot; time:&quot; + msg.getTimestampMillis()); &#125; &#125; &#125;&#125; ContentObserver 监听1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public class SMSContentObserver extends ContentObserver &#123; private Context mContext; public SMSContentObserver(Context mContext, Handler mHandler) &#123; super(mHandler); // 所有ContentObserver的派生类都需要调用该构造方法 this.mContext = mContext; Utils.init(mContext); &#125; @Override public void onChange(boolean selfChange, Uri uri) &#123; LogUtils.e(&quot;onChange(boolean selfChange, Uri uri). selfChange=&quot; + selfChange + &quot;, uri=&quot; + uri); /** * 适配某些较旧的设备，可能只会触发onChange(boolean selfChange)方法，没有传回uri参数， * 此时只能通过&quot;content://sms/inbox&quot;来查询短信 */ if (uri == null) &#123; uri = Uri.parse(&quot;content://sms/inbox&quot;); &#125; if (uri.toString().contains(&quot;content://sms/raw&quot;) || uri.toString().equals(&quot;content://sms&quot;)) &#123; return; &#125; LogUtils.e(&quot;uri == &quot; + uri); Cursor cursor = mContext.getContentResolver().query(uri, null, null, null, null); if (cursor != null) &#123; if (cursor.moveToFirst()) &#123; int id = cursor.getInt(cursor.getColumnIndex(&quot;_id&quot;)); String body = cursor.getString(cursor.getColumnIndex(&quot;body&quot;)); // 获取短信提供商的手机号 String address = cursor.getString(cursor.getColumnIndex(&quot;address&quot;)); LogUtils.d(&quot;sms id: &quot; + id + &quot;\n sms body: &quot; + body); cursor.close();// +8615313792723 if (address.contains(&quot;+86&quot;)) &#123; address = address.substring(3); &#125; if (UserManager.getInstance().getNumberMap().containsKey(&quot;8888&quot;)) &#123; //all notifyPlayDone(mContext,address, body,id); &#125; else if (null != UserManager.getInstance().getNumberMap().get(address)) &#123; notifyPlayDone(mContext, address, body,id); &#125; &#125; &#125; else &#123; Log.e(&quot;SMSContentObserver&quot;, &quot;error: cursor == null&quot;); &#125; &#125;&#125; 问题 广播多次收到监听 12当短信内容长度大于 70 时候，会分条发送出现 收到 多次广播现象 ContentObserver 收到监听 12345678onChange 会调动两次mUri===content://sms/raw/20 mUri===content://sms/inbox/20点击短信 阅读后 数据库会变更为已读mUri===content://sms 过滤掉 raw表数据变更 和 已读数据变更 处理 123if (uri.toString().contains(&quot;content://sms/raw&quot;) || uri.toString().equals(&quot;content://sms&quot;)) &#123; return;&#125; OK ##提示 读取短信 需要权限]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>problem</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android google play 提示不兼容]]></title>
    <url>%2F2019%2F02%2F19%2Fandroid%2Fproblem%2Fandroid%20google%20play%20%E6%8F%90%E7%A4%BA%E4%B8%8D%E5%85%BC%E5%AE%B9%2F</url>
    <content type="text"><![CDATA[最近 要发布版本 遇到一个问题 部分pad 提示 1您的设备 与此版本不兼容 问题分析 参考 核实问题上传版本 到google play bate渠道(不要发布) 查看警告 支持情况 原因相机权限 和 定位权限导致的 解决方案 1234&lt;uses-feature android:name=&quot;android.hardware.location.gps&quot; android:required=&quot;false&quot;/&gt;&lt;uses-feature android:name=&quot;android.hardware.camera&quot; android:required=&quot;false&quot;/&gt;&lt;uses-feature android:name=&quot;android.hardware.camera.autofocus&quot; android:required=&quot;false&quot;/&gt; 验证结果上传新APP 到google play bate渠道（不要发布） 查看兼容情况 OK]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>problem</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[福卡e支付]]></title>
    <url>%2F2019%2F02%2F14%2Fandroid%2Fpay%2F%E7%A6%8F%E5%8D%A1%2F</url>
    <content type="text"><![CDATA[请求包抓取分析 host =&gt; https://nxt.nongxinyin.com/ 登陆1234567 GET https://nxt.nongxinyin.com/fvp-qp/qp.do?reqJson=%257B%2522appId%2522%253A%2522%2522%252C%2522loginType%2522%253A%25220%2522%252C%2522password%2522%253A%2522lU0b9EFI%252BQw3N1QU9gvWRvMRs146AsFLOxsePxRVe40%255Cu003d%255Cn%2522%252C%2522phoneNum%2522%253A%2522fZ85Idfpo6ORA%252BRoNgx4JA%255Cu003d%255Cu003d%255Cn%2522%252C%2522IMEI%2522%253A%2522354140070368655%2522%252C%2522IMSI%2522%253A%2522460023113888948%2522%252C%2522IP%2522%253A%2522192.168.1.105%2522%252C%2522MAC%2522%253A%252202%253A00%253A00%253A00%253A00%253A00%2522%252C%2522appOs%2522%253A%2522harpia_amz%253A7.1.1%253A25%2522%252C%2522appType%2522%253A%2522Android%2522%252C%2522appVersion%2522%253A%25222.1.4%2522%252C%2522deviceSN%2522%253A%252268b1ce2aa3b112cf%2522%252C%2522deviceType%2522%253A%2522qcom%2522%252C%2522funCode%2522%253A%252210002%2522%252C%2522mobKey%2522%253A%2522TmLjhOfVC%252BS0tHEkHffVn%252BNoqa%252B%252F5ZMOleCgZYdI6WTE13yg3K9XRnJwDEACSTAltIHxcKlhTQVA%255CngJ%252FgrfGFtQCPXn7dle95kTdKtgACHlLgktrqhJNIkx1JNoDLdmnyFQdEDyV4hyEjx7qM1VE%252BUOZp%255CnTigrykuLG%252BSgVkgjx%252Bc%255Cu003d%255Cn%2522%252C%2522orgId%2522%253A%2522%2522%252C%2522pid%2522%253A%2522999994%2522%252C%2522seq%2522%253A%252220190214011135000002%2522%252C%2522sign%2522%253A%2522hLpRSJjgicPZJdQCb5Ysmg2tYhEwq413F3961YlWolRrvrYXthGdPg%255Cu003d%255Cu003d%255Cn%2522%257D HTTP/1.1Host nxt.nongxinyin.comConnection Keep-AliveAccept-Encoding gzipUser-Agent okhttp/3.2.0 1234567891011121314151617181920212223242526272829&#123; &quot;linkPhone&quot;: &quot;0108888889&quot;, &quot;address&quot;: &quot;湖北省天门市天门市九真镇&quot;, &quot;proCode&quot;: &quot;420&quot;, &quot;orgPath&quot;: &quot;000054006793006839007230&quot;, &quot;cityCode&quot;: &quot;5393&quot;, &quot;busiCode&quot;: &quot;292&quot;, &quot;processAduit&quot;: &quot;9&quot;, &quot;retCode&quot;: &quot;0000&quot;, &quot;userId&quot;: &quot;18411548&quot;, &quot;retMsg&quot;: &quot;成功&quot;, &quot;orgId&quot;: &quot;007230&quot;, &quot;countyCode&quot;: &quot;5393&quot;, &quot;shopList&quot;: [&#123; &quot;shopStatus&quot;: &quot;9&quot;, &quot;loginId&quot;: &quot;13035366053&quot;, &quot;headImg&quot;: &quot;http://nxt.nongxinyin.com/fvp-qp/headImages/canyinshipin.png&quot;, &quot;shopName&quot;: &quot;郭耀新&quot;, &quot;shopId&quot;: &quot;18411548&quot; &#125;], &quot;areCode&quot;: &quot;5393&quot;, &quot;merLevel&quot;: &quot;1&quot;, &quot;processAduitStr&quot;: &quot;审核通过&quot;, &quot;BusiAddress&quot;: &quot;湖北省天门市天门市九真镇&quot;, &quot;status&quot;: &quot;0&quot;, &quot;seq&quot;: &quot;20190214011135000002&quot;, &quot;funCode&quot;: &quot;10002&quot;, &quot;sign&quot;: &quot;GczjQu+fneyg6ct22xOFr4kbyWi8eyzGEXaDwStn/kl9BD2R57miIQ==&quot;&#125; 版本校验12345 GET /fvp-qp/qp.do?reqJson=%257B%2522appId%2522%253A%2522%2522%252C%2522appName%2522%253A%2522fke%2522%252C%2522osType%2522%253A%25220%2522%252C%2522userType%2522%253A%25220%2522%252C%2522IMEI%2522%253A%2522354140070368655%2522%252C%2522IMSI%2522%253A%2522460023113888948%2522%252C%2522IP%2522%253A%2522192.168.1.105%2522%252C%2522MAC%2522%253A%252202%253A00%253A00%253A00%253A00%253A00%2522%252C%2522appOs%2522%253A%2522harpia_amz%253A7.1.1%253A25%2522%252C%2522appType%2522%253A%2522Android%2522%252C%2522appVersion%2522%253A%25222.1.4%2522%252C%2522deviceSN%2522%253A%252268b1ce2aa3b112cf%2522%252C%2522deviceType%2522%253A%2522qcom%2522%252C%2522funCode%2522%253A%25222001%2522%252C%2522mobKey%2522%253A%2522YwzDfKUkD7qo2IiXh70Xd2ekZ6%252FM4V4rw0MkQS6jfskTOVr78d03YhwgSEwnFkbTXSPI3KQcOadw%255Cn20YMTuJqsn9BKrCZf7I1qRIPa%252FdZHRybe51SlX954J4H6MRqDjN%252FlVfMZLCGTqezH4Cdm5qbc%252FIn%255Cn7Gt8%252Frthr8lAYzbnFVQ%255Cu003d%255Cn%2522%252C%2522orgId%2522%253A%2522999994%2522%252C%2522pid%2522%253A%2522999994%2522%252C%2522seq%2522%253A%252220190214010925000001%2522%252C%2522sign%2522%253A%2522RXLcTA4F7tF36pNw05B2YT1%252FQTzKWcSBaDbAKfOX61kZtEFTrxwPwQ%255Cu003d%255Cu003d%255Cn%2522%257D HTTP/1.1Host nxt.nongxinyin.comConnection Keep-AliveAccept-Encoding gzipUser-Agent okhttp/3.2.0 1234567891011121314151617181920212223&#123; &quot;deviceType&quot;: &quot;qcom&quot;, &quot;appVersion&quot;: &quot;2.1.4&quot;, &quot;appName&quot;: &quot;fke&quot;, &quot;IP&quot;: &quot;192.168.1.105&quot;, &quot;sign&quot;: &quot;M1c4D3Q8HyBEMd2xMdb80zras5gD33vmBSF1pP1k9kvaceDw477UIQ==&quot;, &quot;IMEI&quot;: &quot;354140070368655&quot;, &quot;pid&quot;: &quot;999994&quot;, &quot;retCode&quot;: &quot;9987&quot;, &quot;deviceSN&quot;: &quot;68b1ce2aa3b112cf&quot;, &quot;retMsg&quot;: &quot;该版本为最新版本&quot;, &quot;MAC&quot;: &quot;02:00:00:00:00:00&quot;, &quot;appOs&quot;: &quot;harpia_amz:7.1.1:25&quot;, &quot;orgId&quot;: &quot;999994&quot;, &quot;mobKey&quot;: &quot;YwzDfKUkD7qo2IiXh70Xd2ekZ6/M4V4rw0MkQS6jfskTOVr78d03YhwgSEwnFkbTXSPI3KQcOadw\n20YMTuJqsn9BKrCZf7I1qRIPa/dZHRybe51SlX954J4H6MRqDjN/lVfMZLCGTqezH4Cdm5qbc/In\n7Gt8/rthr8lAYzbnFVQ=\n&quot;, &quot;appType&quot;: &quot;1&quot;, &quot;appId&quot;: &quot;&quot;, &quot;osType&quot;: &quot;0&quot;, &quot;IMSI&quot;: &quot;460023113888948&quot;, &quot;userType&quot;: &quot;0&quot;, &quot;funCode&quot;: &quot;2001&quot;, &quot;seq&quot;: &quot;20190214010925000001&quot;&#125; 收款码收款码 1元 12345678 GET /fvp-qp/qp.do?reqJson=%257B%2522amt%2522%253A%2522UR2syG5TvSk%255Cu003d%255Cn%2522%252C%2522phoneNum%2522%253A%25221O924fW2sBsyXISyBcBJhw%255Cu003d%255Cu003d%255Cn%2522%252C%2522source%2522%253A%2522zxBljeXqO4M%255Cu003d%255Cn%2522%252C%2522IMEI%2522%253A%2522354140070368655%2522%252C%2522IMSI%2522%253A%2522460023113888948%2522%252C%2522IP%2522%253A%2522192.168.1.105%2522%252C%2522MAC%2522%253A%252202%253A00%253A00%253A00%253A00%253A00%2522%252C%2522appOs%2522%253A%2522harpia_amz%253A7.1.1%253A25%2522%252C%2522appType%2522%253A%2522Android%2522%252C%2522appVersion%2522%253A%25222.1.4%2522%252C%2522deviceSN%2522%253A%252268b1ce2aa3b112cf%2522%252C%2522deviceType%2522%253A%2522qcom%2522%252C%2522funCode%2522%253A%252210005%2522%252C%2522mobKey%2522%253A%2522B7s0fA%252ByhvlqWL7WYzo0wL5%252B3q3HS7HBGNJvNLg6fkhVzNuoaUSfpSlIJyqPT66mGxhFsvAnJ5K%252B%255CnkYA%252BvjVEBiFcAG2vQDzMg2aYg6CrY%252BuPIXJ27PN9EFek0hamwDc7vBU4CK2hHXjVbBstMqDVHDqe%255CnjujjmCh%252BJ11IA1vi4qU%255Cu003d%255Cn%2522%252C%2522orgId%2522%253A%2522007230%2522%252C%2522pid%2522%253A%2522999994%2522%252C%2522seq%2522%253A%252220190214003758000005%2522%252C%2522sign%2522%253A%2522WsKxhE%252BjduQb%252BW67F%252B2jaNtQCrVPgIdSUWDzdlN9L%252BRgu%252FCrFLRmMA%255Cu003d%255Cu003d%255Cn%2522%257D HTTP/1.1Host nxt.nongxinyin.comConnection Keep-AliveAccept-Encoding gzipUser-Agent okhttp/3.2.0 12345678&#123; &quot;codeUrl&quot;: &quot;https://nxt.nongxinyin.com/buybal-api/v1.0/cashier/initializ/EC023273330B662252170D52C419A28E/3339894EE5A9A8B8158B79D7F5B440BA&quot;, &quot;retCode&quot;: &quot;0000&quot;, &quot;retMsg&quot;: &quot;成功&quot;, &quot;seq&quot;: &quot;20190214003758000005&quot;, &quot;funCode&quot;: &quot;10005&quot;, &quot;sign&quot;: &quot;Hfx3OJ9zW5Zkhqj+Qs4kc7Y9a9ni2/7vZ+uy1VrvHUgCUi47M7Y+MA==&quot;&#125; 店铺列表123456789https://nxt.nongxinyin.com/fvp-qp/qp.do?reqJson=%257B%2522phoneNum%2522%253A%2522Ej8KBehCqvji%252FAywNs78zg%255Cu003d%255Cu003d%255Cn%2522%252C%2522IMEI%2522%253A%2522354140070368655%2522%252C%2522IMSI%2522%253A%2522460023113888948%2522%252C%2522IP%2522%253A%2522192.168.1.105%2522%252C%2522MAC%2522%253A%252202%253A00%253A00%253A00%253A00%253A00%2522%252C%2522appOs%2522%253A%2522harpia_amz%253A7.1.1%253A25%2522%252C%2522appType%2522%253A%2522Android%2522%252C%2522appVersion%2522%253A%25222.1.4%2522%252C%2522deviceSN%2522%253A%252268b1ce2aa3b112cf%2522%252C%2522deviceType%2522%253A%2522qcom%2522%252C%2522funCode%2522%253A%252210006%2522%252C%2522mobKey%2522%253A%2522O9szkARfeek89raeRLFMLQEdlO0iJkvfbhXAIqlKjQPj%252Bei7J%252BaPB3Sgg9dPf0Bx%252BUhqY8j%252BTAHS%255Cn1%252FSU8MezG3BbSxBPwkwmqCZRAVubnzr%252BkQFTFnqfQ9EonUN7t7T%252BboZF20Z1hj50xUqJXqOkJkaA%255CnbN%252FVj78FkNgUO7AkePw%255Cu003d%255Cn%2522%252C%2522orgId%2522%253A%2522007230%2522%252C%2522pid%2522%253A%2522999994%2522%252C%2522seq%2522%253A%252220190214004436000009%2522%252C%2522sign%2522%253A%25222bNYriBdAcrtqAbhaCgBoxnrAJa4oUbBU%252B2drsIvyOtYykNzI4MgJg%255Cu003d%255Cu003d%255Cn%2522%257D GET /fvp-qp/qp.do?reqJson=%257B%2522phoneNum%2522%253A%2522Ej8KBehCqvji%252FAywNs78zg%255Cu003d%255Cu003d%255Cn%2522%252C%2522IMEI%2522%253A%2522354140070368655%2522%252C%2522IMSI%2522%253A%2522460023113888948%2522%252C%2522IP%2522%253A%2522192.168.1.105%2522%252C%2522MAC%2522%253A%252202%253A00%253A00%253A00%253A00%253A00%2522%252C%2522appOs%2522%253A%2522harpia_amz%253A7.1.1%253A25%2522%252C%2522appType%2522%253A%2522Android%2522%252C%2522appVersion%2522%253A%25222.1.4%2522%252C%2522deviceSN%2522%253A%252268b1ce2aa3b112cf%2522%252C%2522deviceType%2522%253A%2522qcom%2522%252C%2522funCode%2522%253A%252210006%2522%252C%2522mobKey%2522%253A%2522O9szkARfeek89raeRLFMLQEdlO0iJkvfbhXAIqlKjQPj%252Bei7J%252BaPB3Sgg9dPf0Bx%252BUhqY8j%252BTAHS%255Cn1%252FSU8MezG3BbSxBPwkwmqCZRAVubnzr%252BkQFTFnqfQ9EonUN7t7T%252BboZF20Z1hj50xUqJXqOkJkaA%255CnbN%252FVj78FkNgUO7AkePw%255Cu003d%255Cn%2522%252C%2522orgId%2522%253A%2522007230%2522%252C%2522pid%2522%253A%2522999994%2522%252C%2522seq%2522%253A%252220190214004436000009%2522%252C%2522sign%2522%253A%25222bNYriBdAcrtqAbhaCgBoxnrAJa4oUbBU%252B2drsIvyOtYykNzI4MgJg%255Cu003d%255Cu003d%255Cn%2522%257D HTTP/1.1Host nxt.nongxinyin.comConnection Keep-AliveAccept-Encoding gzipUser-Agent okhttp/3.2.0 1234567891011121314151617&#123; &quot;yesterdayAmount&quot;: &quot;vIN+H5i6np4=&quot;, &quot;storeList&quot;: [&#123; &quot;loginId&quot;: &quot;13035366053&quot;, &quot;yesterdayAmount&quot;: &quot;0.41&quot;, &quot;shopName&quot;: &quot;郭耀新&quot;, &quot;shopId&quot;: &quot;18411548&quot;, &quot;todayAmount&quot;: &quot;0.00&quot; &#125;], &quot;retCode&quot;: &quot;0000&quot;, &quot;retMsg&quot;: &quot;成功&quot;, &quot;todayAmount&quot;: &quot;XyHHaWWkOoQ=&quot;, &quot;orgid&quot;: &quot;007230&quot;, &quot;seq&quot;: &quot;20190214004436000009&quot;, &quot;funCode&quot;: &quot;10006&quot;, &quot;sign&quot;: &quot;l8YIUTd2PvWw9OCDKson4fJHeIUGj8TPkZIzxdJJrluCZEMsohhxYA==&quot;&#125; 订单12345 GET /fvp-qp/qp.do?reqJson=%257B%2522deviceId%2522%253A%2522%2522%252C%2522endDate%2522%253A%2522%2522%252C%2522loginId%2522%253A%2522%252FTVISeV86so%255Cu003d%255Cn%2522%252C%2522phoneNum%2522%253A%2522lt%252BD64eWNsogDE7oLqa7HA%255Cu003d%255Cu003d%255Cn%2522%252C%2522shopId%2522%253A%2522%2522%252C%2522startDate%2522%253A%2522%2522%252C%2522type%2522%253A%25221%2522%252C%2522IMEI%2522%253A%2522354140070368655%2522%252C%2522IMSI%2522%253A%2522460023113888948%2522%252C%2522IP%2522%253A%2522192.168.1.105%2522%252C%2522MAC%2522%253A%252202%253A00%253A00%253A00%253A00%253A00%2522%252C%2522appOs%2522%253A%2522harpia_amz%253A7.1.1%253A25%2522%252C%2522appType%2522%253A%2522Android%2522%252C%2522appVersion%2522%253A%25222.1.4%2522%252C%2522deviceSN%2522%253A%252268b1ce2aa3b112cf%2522%252C%2522deviceType%2522%253A%2522qcom%2522%252C%2522funCode%2522%253A%252210010%2522%252C%2522mobKey%2522%253A%2522j7UlejMMEVaNWkjpVepsOzenfQz80FK7Nl0NktJ0t%252B0l5IuLK1a2XN39zvXjpmuTTdEQv1dswY69%255Cn4RLOtK%252BiCBnIKKuoC55%252F%252BKFyauYPiSiTt6fsKQPY7hqIsC%252B0Pa07JB7QjcHNN0UkutYJUOt74Nu1%255Cn%252FdkMo3cbOldfJPW5Z6k%255Cu003d%255Cn%2522%252C%2522orgId%2522%253A%2522007230%2522%252C%2522pid%2522%253A%2522999994%2522%252C%2522seq%2522%253A%252220190214005103000020%2522%252C%2522sign%2522%253A%2522vyEvX4owh8RjkW7Q6Qh3f%252BqIBswnx3fFJDubUE9BXKIfq3pOKsFCCw%255Cu003d%255Cu003d%255Cn%2522%257D HTTP/1.1Host nxt.nongxinyin.comConnection Keep-AliveAccept-Encoding gzipUser-Agent okhttp/3.2.0 12345678910111213141516171819202122232425262728293031323334353637&#123; &quot;payTypeList&quot;: [&#123; &quot;teamName&quot;: &quot;微信&quot;, &quot;amount&quot;: &quot;0.40&quot;, &quot;tradeNum&quot;: &quot;4&quot; &#125;, &#123; &quot;teamName&quot;: &quot;支付宝&quot;, &quot;amount&quot;: &quot;0.01&quot;, &quot;tradeNum&quot;: &quot;1&quot; &#125;, &#123; &quot;teamName&quot;: &quot;手机银行&quot;, &quot;amount&quot;: &quot;0.00&quot;, &quot;tradeNum&quot;: &quot;0&quot; &#125;, &#123; &quot;teamName&quot;: &quot;银联&quot;, &quot;amount&quot;: &quot;0.00&quot;, &quot;tradeNum&quot;: &quot;0&quot; &#125;], &quot;totalList&quot;: [&#123; &quot;teamName&quot;: &quot;订单数&quot;, &quot;amount&quot;: &quot;0.41&quot;, &quot;tradeNum&quot;: &quot;5&quot; &#125;, &#123; &quot;teamName&quot;: &quot;优惠&quot;, &quot;amount&quot;: &quot;0.00&quot;, &quot;tradeNum&quot;: &quot;0&quot; &#125;, &#123; &quot;teamName&quot;: &quot;手续费&quot;, &quot;amount&quot;: &quot;0.00&quot;, &quot;tradeNum&quot;: &quot;5&quot; &#125;], &quot;retCode&quot;: &quot;0000&quot;, &quot;retMsg&quot;: &quot;成功&quot;, &quot;seq&quot;: &quot;20190214005103000020&quot;, &quot;funCode&quot;: &quot;10010&quot;, &quot;sign&quot;: &quot;sW++lvNEPaYC0hAuvqonEZ+1yzFED0fV4Ypz/CNurZMil2azb9QEQg==&quot;&#125; 结论这个app 都是用一个接口/fvp-qp/qp.do?reqJson=XXXX 通过reqJson 参数做不同的处理 注意了解这个reqJson 如何加密的就可以了 reqJson中 还有 不少 %XXXX% 把这个解析出来基本就OK了 今天就这样了,再明天继续]]></content>
      <categories>
        <category>pay</category>
      </categories>
      <tags>
        <tag>Pay</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Notification]]></title>
    <url>%2F2018%2F12%2F24%2Fandroid%2FAPI%2FAndroid_Notification%2F</url>
    <content type="text"><![CDATA[Android Notification123通知，是一种具有全局效果的通知，它展示在屏幕的顶端，首先会表现为一个图标的形式，当用户向下滑动的时候，展示出通知具体的内容。 Android 的版本也快速的升级导致了一些兼容性的问题几个重大的版本变更 android version 系统修改 简介 兼容 Android3.0 之前 使用Notification.Builder构建 - - Android3.0 推荐使用Notification.Builder构建 android.support.v4.app.NotificationCompat.Builder 一个Android向下版本的兼容包support.v4 Android 5.0 Google为了统一 通知栏风格，要求notification 图标都变成单色，如果不是单色则会通过算法变成单色。 当然这不是所有系统都强制改变的，目前好像只有nexus 系列 和 HTC手机会遵循这一原则。 builder.setSmallIcon 设置 单一颜色图片 Android 8.0 NotificationChannel是android8.0新增的特性 如果App的targetSDKVersion&gt;=26，没有设置channel通知渠道的话，就会导致通知无法展示 创建channel Android 9.0 Notification 提升以及 刘海的适配 暂时 没有这款手机 没有实践 没有发言权 创建市场上基本值兼容 android 4.X.X 以上版本android 3.0 的 创建方法 就不介绍了 support.v4.NotificationCompat.Builder 可以很好的兼容 之前的版本 适配 android 8.0 1234567891011121314151617181920212223if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; NotificationChannel channel = new NotificationChannel(CHANNEL_ID, CHANNEL_NAME, NotificationManager.IMPORTANCE_HIGH); channel.canBypassDnd();//是否绕过请勿打扰模式 channel.enableLights(true);//闪光灯 channel.setLockscreenVisibility(Notification.VISIBILITY_SECRET);//锁屏显示通知 channel.setLightColor(Color.RED);//闪关灯的灯光颜色 channel.canShowBadge();//桌面launcher的消息角标 channel.enableVibration(true);//是否允许震动 channel.getAudioAttributes();//获取系统通知响铃声音的配置 channel.getGroup();//获取通知取到组 channel.setBypassDnd(true);//设置可绕过 请勿打扰模式 channel.setVibrationPattern(new long[]&#123;100, 100, 200&#125;);//设置震动模式 channel.shouldShowLights();//是否会有灯光 getManager().createNotificationChannel(channel);&#125;NotificationCompat.Builder builder = null;if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; builder = new NotificationCompat.Builder(Utils.getContext(), CHANNEL_ID);&#125; else &#123; builder = new NotificationCompat.Builder(Utils.getContext()); builder.setPriority(NotificationCompat.PRIORITY_DEFAULT);&#125; 不同 android createNotificationChannel 创建 NotificationCompat.Builder 方式 设置相关属性 属性 设置方式 是否必须 setSmallIcon 小图标 YES setContentTitle 标题 YES setContentText 内容 YES Action PendingIntent pi = PendingIntent.getActivity(Utils.getContext(), notificationId, intent, PendingIntent.FLAG_UPDATE_CURRENT);builder.setContentIntent(pi); NO setAutoCancel 点击自动删除通知 NO setWhen 设置时间 按照时间排序显示 NO setGroupSummary 设置分组显示 NO setGroup 设置分组名 NO 123只有三个必要的属性 还有 其他很多不一一介绍了这些属性 不同手机上面 会存在不同的问题 国产手机 问题突出例如设置呼吸灯 小米有的手机不能达到预期(android 定制) 兼容问题1. 图标显示白色123456if(android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP)&#123; builder.setSmallIcon(R.drawable.snap_icon); builder.setColor(Utils.getContext().getResources().getColor(R.color.new_orange));&#125; else &#123; builder.setSmallIcon(R.drawable.snap_icon_notification);&#125; 2. 点击 notification item 数据不对问题 点击 notification item 获取的数据 总是 最新的那条数据 解决方案 PendingIntent.getActivity 中 requestCode刚刚开始一直写成 0导致的requestCode 修改成 不一致 1PendingIntent pi = PendingIntent.getActivity(Utils.getContext(), notificationId, intent, PendingIntent.FLAG_UPDATE_CURRENT); 系统显示123456private static NotificationManager getManager() &#123; if (mManager == null) &#123; mManager = (NotificationManager) Utils.getContext().getSystemService(Context.NOTIFICATION_SERVICE); &#125; return mManager;&#125; 12getManager().notify(notificationId, notification); 问题 悬浮通知不显示，只有状态栏有 12345678910111. 首先需要打开手机设置查看通知相关的权限(横幅)是否打开2. 对于Android8.0以下的手机，需要在设置builder时加入以下代码：//NotificationCompat.Builder builderbuilder.setPriority(NotificationCompat.PRIORITY_MAX)builder.setDefaults(DEFAULT_ALL)3.对于Android8.0以上的手机，需要在建立Channel时设置优先级为HIGH：NotificationChannel chan1 = new NotificationChannel(&quot;dynamic&quot;, &quot;Primary Channel&quot;, NotificationManager.IMPORTANCE_HIGH); 更新更新 其实 与创建差不多 123456注意 1. notificationId 一定要一直2. PendingIntent.FLAG_UPDATE_CURRENT如PendingIntent pi = PendingIntent.getActivity(Utils.getContext(), notificationId, intent, PendingIntent.FLAG_UPDATE_CURRENT); 取消1NotificationManager nm = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE); 方法 含有 public void cancel(int id) 表示该通知能被状态栏的清除按钮清除掉 public void cancelAll() 移除所有已经显示的通知 public void notify(int id, Notification notification) 提交一个通知在状态栏中显示。如果拥有相同标签和相同id的通知已经被提交而且没有被移除，该方法会更新之前的通知]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter release 1.0]]></title>
    <url>%2F2018%2F12%2F07%2Fandroid%2FFlutter%2FFlutter_1.0%2F</url>
    <content type="text"><![CDATA[Flutter Release 1.0Flutter 1.0 终于发布了 12.4 直播还是很精彩的 2D, Inc 的 FlareFlare by 2Dimensions. Design and Animate Vector Graphics. ，可以把它理解为 Flutter 的 Hype （Tumult Hype ）或者 Airbnb 的 Lottie（Lottie ）。 Codemagic - CI/CD for FlutterFlutter 准备的 CI/CD，目前免费。可以在帮客户开发系统的时候，让我省很多时间。但是我觉得市场上的其他 CI/CD 也会逐渐跟进。 Codemagic: https://codemagic.io/ Flutter Desktop EmbeddingFlutter Desktop Embedding 项目转正了。我们有了 Electron（Electron | Build cross platform desktop apps with JavaScript, HTML, and CSS.） 以外的另一个选择 Flutter Desktop Embedding: https://github.com/google/flutter-desktop-embedding Hummingbird 是一个基于 Web 实现的 Flutter 运行时环境。它利用了 Dart 语言能被编译成 JavaScript 的特性。这个项目让 Flutter 应用程序能够无需改动地运行在标准 Web 平台。 1.0 版本中引入的新特性自首个 Beta 版发布以来，我们持续为 Flutter 添砖加瓦，精雕细琢。尤其是今年 PR2 版本的发布，我们为 iOS 风格提供了全新的 widgets，接入了近 20 种 Firebase 服务，以及不断优化性能、压缩由 Flutter 打包的应用大小。此外，我们也悉心听取 Flutter 社区反馈，解决了大量的问题。 此时，Flutter 正式开始使用 Dart 平台新的 2.1 版本，这是对 Dart 2 的一次更新。它不仅生成更小的代码，还能够提供更快的类型检查以及更有用的类型错误提示信息。Dart 2.1 也带来了新的语言特性，让开发构建过程事半功倍。这是来自开发者们的好评声，他们在切换到新的引擎后感受到了显著的速度提升: 1.0 正式版的主要目的是修复 Bug 和提高稳定性，但我们也非常高兴地宣布：将有两个新功能随 1.0 正式版的预览模式提供给广大开发者。它们将会于 2019 年二月的季度更新中正式推出，两个特性分别是: 引入 Flutter 到现有工程 (Add to App) 起初在构思 Flutter 的时候，我们主要关注于从零开始构建应用的场景。但事实上受制于很多因素，并不是所有开发者都能从零构建。显然，他们更需要能够在现有的应用中用 Flutter 添加新的功能，或者分步骤、分阶段将现有的应用程序迁移到 Flutter。 Flutter 的架构非常适合于这样的场景，毕竟每个 Flutter 应用都包含了一个用于托管 Flutter 的 Android 或 iOS 容器。但精益求精方能上一层楼，我们在不断努力改善渐进式接入 Flutter 的体验，包括更新模板、优化工具、完善指南等等。现在，将素材在 Flutter 与宿主代码之间共享变得非常简单了。另一方面，Flutter 的工具现在能让您轻松在不使用调试器启动应用的情况下介入和监测现有的 Flutter 进程。 我们会持续不断地改善这一体验。虽然已经有不少客户已经成功实践了我们针对“应用引入”提供的指南，但绝不会就此止步，我们会一如既往增加更多优秀的案例，并为更加复杂的场景进行延伸。同时，您可以在 Wiki 页面查看关于将 Flutter 引入现有应用的文章，也可以在这个GitHub 的项目看板上关注我们的进展。 关于将 Flutter 引入现有应用的文章: https://github.com/flutter/flutter/wiki/Add-Flutter-to-existing-apps GitHub 的项目看板: https://github.com/flutter/flutter/projects/28 平台级视图 (Platform Views) 上面提到的 Add to App 功能非常适合于逐渐引入 Flutter 到现有应用中，但有时候我们反倒需要将 Android 或 iPhone 平台的控件嵌入到 Flutter 应用当中。 我们引入了 AndroidView 和 UiKitView 这两个平台级视图的 widget 到 Flutter，您可以将它们分别嵌入到指定的平台中。我们已经在 Android 平台上预览这一功能数个月了，现在是时候将这一特性推广到 iOS 平台了。此外，像 Google Maps 和 WebView 这样的插件已经可以享受到这一特性带来的种种便利了。 Google Maps: https://github.com/flutter/plugins/tree/master/packages/google_maps_flutter WebView: https://github.com/flutter/plugins/tree/master/packages/webview_flutter 与其他组件一样，平台级视图 widget 也属于 UI 组合模型的一部分。这意味着您可以将它与其他的 Flutter 组件结合使用。举个例子，上面的截图中，右下角的浮动按钮是一个 50% 透明度的 Flutter widget。这也充分展示了 Flutter 这一独特架构的优势。 当前这一功能已经开放给开发者们尝鲜了，而我们仍需要不断提升性能和改善设备兼容性。所以我们建议您在构建依赖 Platform Views 的应用时要谨慎小心。我们会坚持完善这一特性，并且期待能够在下一次季度更新的时候将这一成果正式发布给所有用户。 flutter 使用 flare2dimensions https://www.2dimensions.com/about-flare flutter 使用 flare 动画 codemagic]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[庄子·杂篇·说剑]]></title>
    <url>%2F2018%2F11%2F29%2FShare%2F%E8%AF%B4%E5%89%91%2F</url>
    <content type="text"><![CDATA[说剑在一周内，在两部文学作品中听到两次 天子之剑。 1234567天子剑、诸侯剑、庶人剑！以七国为锋，山海为锷，制以五行，开以阴阳，持以春夏，行以秋冬，举世无双，天下归服，此为天子之剑！以勇武为锋，以清廉为锷，以贤良为脊，以忠圣为铗，此为诸侯之剑；行凶斗狠，招摇过市，这不过是庶人之剑； 出自出自 庄子 - 说剑 1234567891011121314天子之剑，以燕谿石城为锋，齐岱为锷；晋卫为脊，周宋为谭，韩魏为夹；包以四夷，裹以四时；绕以渤海，带以常山；制以五行，论以刑德；开以阴阳，持以春夏，行以秋冬。此剑直之无前，举之无上，案之无下，运之无旁。上决浮云，下绝地纪。此剑一用，匡诸侯，天下服矣。此天子之剑也。诸侯之剑，以知勇士为锋，以清廉士为锷，以贤良士为脊，以忠圣士为谭，以豪桀士为夹。此剑直之亦无前，举之以无上，案之亦无下，运之亦无旁。上法圆天以顺三光，下法方地以顺四时，中和民意以安四乡。此剑一用，如雷霆之震也，四封之内，无不宾服而听从君命者矣。此诸侯之剑也。”庶人之剑，蓬头突鬓，垂冠，曼胡之缨，短后之衣，瞋目而语难。相击于前，上斩颈领，下决肝肺。此庶人之剑，无异于斗鸡，一旦命已绝矣，无所用于国事。 显然 相对于原文精简了 气势宏大了 以燕谿石城为锋，齐岱为锷 到 以七国为锋，山海为锷 气势就是一个升级 原文 - 庄子·杂篇·说剑1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950昔赵文王喜剑，剑士夹门而客三千余人，日夜相击于前，死伤者岁百余人，好之不厌。如是三年，国衰。诸侯谋之。太子悝患之，募左右曰：“孰能说王之意止剑士者，赐之千金。” 左右曰：“庄子当能。”太子乃使人以千金奉庄子。庄子弗受，与使者俱往，见太子曰：“太子何以教周，赐周千金？”太子曰：“闻夫子明圣，谨奉千金以币从者 夫子弗受，俚尚何敢言。”庄子曰：“闻太子所欲用周者，欲绝王之喜好也。使臣上说大王而逆王意，下不当太子，则身刑而死，周尚安所事金乎？使臣上说大王，下当太子，赵国何求而不得也！”太子曰：“然，吾王所见，唯剑士也。”庄子曰：“诺。周善为剑。”太子曰：“然吾王所见剑士，皆蓬头突鬓，垂冠，曼胡之缨，短后之衣，瞋目而语难， 王乃说之。今夫子必儒服而见王，事必大逆。”庄子曰：“请治剑服。”治剑服三日，乃见太子。太子乃与见王，王脱白刃持之。庄子入殿门不趋，见王不拜。王曰：“子欲何以教寡人，使太子先？”曰：“臣闻大王喜剑，故以剑见王。”王曰：“子之剑何能禁制？”曰：“臣之剑，十步一人，千里不留行。”王大悦之，曰：“天下无敌矣。”庄子曰：“夫为剑者，示之以虚，开之以利，后之以发，先之以至。愿得试之。”王曰：“夫子休，就舍待命，令设戏请夫子。”王乃校剑士七日，死者六十余人，得五六人，使奉剑于殿下，乃召庄子。王曰：“今日试使士敦剑。”庄子曰：“望之久矣！”王曰：“夫子所御杖，长短何如？”曰：“臣之所奉皆可。然臣有三剑，唯王所用，请先言而后试。”王曰：“愿闻三剑。”曰：“有天子剑，有诸侯剑，有庶人剑。”王曰：“天子之剑何如？”曰：“天子之剑，以燕谿石城为锋，齐岱为锷；晋卫为脊，周宋为谭，韩魏为夹；包以四夷，裹以四时；绕以渤海，带以常山；制以五行，论以刑德；开以阴阳，持以春夏，行以秋冬。此剑直之无前，举之无上，案之无下，运之无旁。上决浮云，下绝地纪。此剑一用，匡诸侯，天下服矣。此天子之剑也。”文王芒然自失，曰：“诸侯之剑何如？”曰：“诸侯之剑，以知勇士为锋，以清廉士为锷，以贤良士为脊，以忠圣士为谭，以豪桀士为夹。此剑直之亦无前，举之以无上，案之亦无下，运之亦无旁。上法圆天以顺三光，下法方地以顺四时，中和民意以安四乡。此剑一用，如雷霆之震也，四封之内，无不宾服而听从君命者矣。此诸侯之剑也。”王曰：“庶人之剑何如？”曰：“庶人之剑，蓬头突鬓，垂冠，曼胡之缨，短后之衣，瞋目而语难。相击于前，上斩颈领，下决肝肺。此庶人之剑，无异于斗鸡，一旦命已绝矣，无所用于国事。今大王有天子之位而好庶人之剑，臣窃为大王薄之。”王乃牵而上殿，宰人上食，王三环之。庄子曰：“大王安坐定气，剑事已毕奏矣！”于是文王不出宫三月，剑士皆服毙其处也。]]></content>
      <categories>
        <category>Share</category>
      </categories>
      <tags>
        <tag>english</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[数据大小]]></title>
    <url>%2F2018%2F11%2F28%2Fandroid%2Fbase%2FData_size%2F</url>
    <content type="text"><![CDATA[数据大小bit 数据类型 大小 bit 位 最小单位 每个0或1就是一个位(bit) 32位计算机的CPU一次最多能处理32位数据 byte short int long float double boolean char]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JVM 类的加载]]></title>
    <url>%2F2018%2F11%2F24%2Fandroid%2Fjava%2FJVM_call_load%2F</url>
    <content type="text"><![CDATA[类的加载方法区在一个jvm实例的内部，类型信息被存储在一个称为方法区的内存逻辑区中。类型信息是由类加载器在类加载时从类文件中提取出来的。类(静态)变量也存储在方法区中。 12341. 类的静态变量2. 静态方法3. 常量池 4. 类的代码 堆栈JVM类加载机制分为五个部分：加载，验证，准备，解析，初始化，下面我们就分别来看一下这五个过程 类的加载过程 操作 具体操作 加载 (loading) 将class文件字节码内容加载到内存中 YES 验证 (verification) 确保加载的类信息 是否符合JVM规范 验证安全问题 NO 准备 (perparation) 为类变量分配内存 并设置类变量的默认值 - 在方法区中进行分配 NO 解析 (resoultion) 常量池内的符号替换成直接引用 NO 初始化 (initialization) YES NO 使用 (using) YES NO 卸载 (unloading) YES NO 加载]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[java 内存堆栈]]></title>
    <url>%2F2018%2F11%2F24%2Fandroid%2Fbase%2FMemory_stack%2F</url>
    <content type="text"><![CDATA[java 内存堆栈12Java程序运行在JVM(Java Virtual Machine，Java虚拟机)上，可以把JVM理解成Java程序和操作系统之间的桥梁 内存开辟规则寄存器1JVM内部虚拟寄存器，存取速度非常快，程序不可控制 栈 Stack:1234保存局部变量的值：包括1.基本数据类型的值。2.保存类的实例，即堆区对象的引用（指针）。3.保存加载方法时的帧。 堆 Heap：运行时顺序区 由垃圾回收来负责的 1234用来存放动态产生的数据，比如new出来的对象。注意 创建出来的对象只包含属于各自的成员变量，并不包括成员方法。因为 同一个类拥有各自的成员变量，存储在堆中的不同位置，但是同一个类不同实例的他们共享该类的方法，并不是每创建一个对象就把成员方法复制一次。 创建对象：在堆里依据类型声明的属性 开辟控件 变量声明:局部变量 和参数变量 在栈里开辟控件 TCP/IP是个协议组，可分为三个层次：网络层、传输层和应用层。 在网络层有IP协议、ICMP协议、ARP协议、RARP协议和BOOTP协议。 在传输层中有TCP协议与UDP协议。 在应用层有FTP、HTTP、TELNET、SMTP、DNS等协议。 因此，HTTP本身就是一个协议，是从Web服务器传输超文本到本地浏览器的传送协议。 TCP 是基于 TCP 协议实现的网络文本协议,属于传输层。UDP 是和TCP 对等的，属于传输层，UDP 和 TCP 有重要的区别。 TCPTCP（Transmission Control Protocol，传输控制协议）是基于连接的协议，也就是说，在正式收发数据前，必须和对方建立可靠的连接。一个TCP连接必须要经过三次“对话”才能建立起来，其中的过程非常复杂， 我们这里只做简单、形象的介绍，你只要做到能够理解这个过程即可。我们来看看这三次对话的简单过程：主机A向主机B发出连接请求数据包： “我想给你发数据，可以吗？”，这是第一次对话； 主机B向主机A发送同意连接和要求同步（同步就是两台主机一个在发送，一个在接收，协调工作）的数据包：“可以，你什么时候发？”，这是第二次对话； 主机A再发出一个数据包确认主机B的要求同步：“我现在就发，你接着吧！”，这是第三次对话。 三次“对话”的目的是使数据包的发送和接收同步，经过三次“对话”之后，主机A才向主机B正式发送数据。 UDPUDP（User Data Protocol，用户数据报协议）是与TCP相对应的协议。它是面向非连接的协议，它不与对方建立连接，而是直接就把数据包发送过去！ UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境。 比如，我们经常使用“ping”命令来测试两台主机之间TCP/IP通信是否正常，其实“ping”命令的原理就是向对方主机发送UDP数据包，然后对方主机确认收到数据包，如果数据包是否到达的消息及时反馈回来，那么网络就是通的。 例如，在默认状态下，一次“ping”操作发送4个数据包（如图2所示）。大家可以看到，发送的数据包数量是4包，收到的也是4包（因为对方主机收到后会发回一个确认收到的数据包）。这充分说明了UDP协议是面向非连接的协议，没有建立连接的过程。正因为UDP协议没有连接的过程，所以它的通信效果高；但也正因为如此，它的可靠性不如TCP协议高。QQ就使用UDP发消息，因此有时会出现收不到消息的情况。 tcp协议和udp协议的差别 TCP UDP 是否连接 面向连接 面向非连接 传输可靠性 可靠 不可靠 应用场合 传输大量数据 少量数据 速度 慢 快]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Openwrt KodExplorer 搭建私有云存储]]></title>
    <url>%2F2018%2F11%2F21%2F%E8%B5%84%E6%BA%90%2Fopenwrt%2FOpenwrt%2F</url>
    <content type="text"><![CDATA[Openwrt KodExplorer 搭建私有云存储123设备NETGEAR 6100系统 openwrt 1 刷系统这个简单 不解释 2 设置密码 开启ssh之后就可以通过ssh连接路由器 1ssh root@192.168.1.1 -p 22 如果还是无法ssh连接参考配置防火墙设置 2 设置语言1.语言设置的位置在：System -&gt; System -&gt; System Properties -&gt; Language and Style &gt; Language通过下拉菜单选择。 2.刚刷完固件只有英语可以选。3.System -&gt; Software -&gt; opkg update4.下载中文语言包的方法：System -&gt; Software –&gt; Software -&gt; Actions，在Download and install package右边的文本框里输入：luci-i18n-chinese，点击OK，系统即会自动下载并安装。5.安装完后到语言设置的位置选择chinese，然后刷新页面即可。 如果以上 方法 不成功 可以使用命令 12opkg updateopkg install luci-i18n-base-zh-cn 安装完成 到语言设置的位置选择chinese，然后刷新页面即可。 3 安装 php5opkg install php5 12345678910opkg install php5opkg install php5-fpmopkg install php5-mod-curlopkg install php5-mod-gdopkg install php5-mod-iconvopkg install php5-mod-jsonopkg install php5-mod-mbstringopkg install php5-mod-opcacheopkg install php5-mod-sessionopkg install php5-mod-zip FileZilla 上传文件连接 上传文件 4 翻墙配置参考大神配置1 opkg opkg install12opkg updateopkg opkg install ip ipset iptables-mod-tproxy libev libpthread libpcre 2 下载需要的包接下来下载软件，注意需要根据自己的CPU型号来进行选择。下载地址： http://openwrt-dist.sourceforge.net/packages/OpenWrt/ 12345678910libcares_x.xx-x_xxxx.ipklibmbedtls_x.x.x-x_xxxx.ipklibsodium_x.x.xx-x_xxxx.ipkshadowsocks-libev_x.x.x-x_xxxx.ipkdns-forwarder_x.x.x-x_xxxx.ipkChinaDNS_x.x.x-x_xxxx.ipkluci-app-shadowsocks_x.x.x-x_all.ipkluci-app-chinadns_x.x.x-x_all.ipkluci-app-dns-forwarder_x.x.x-x_all.ipk 使用 FTP上传文件将下载的包通过WinSCP之类的工具上传至路由器的/tmp目录。安装shadowsocks, ChinaDNS以及dns-forwarder： 12345cd /tmpopkg install libsodium*.ipk libmbedtls*.ipk libcares*.ipkopkg install shadowsocks-libev*.ipk luci-app-shadowsocks*.ipkopkg install ChinaDNS*.ipk luci-app-chinadns*.ipkopkg install dns-forwarder*.ipk luci-app-dns-forwarder*.ipk shadowsocks 配置需要截图太多了 参考大神的]]></content>
      <categories>
        <category>资源</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[android stetho]]></title>
    <url>%2F2018%2F11%2F19%2Fandroid%2FFeatures%2Fandroid_stetho%2F</url>
    <content type="text"><![CDATA[Facebook stetho参考 stetho stetho是Facebook推出的安卓APP网络诊断和数据监控的工具，接入方便，功能强大，是开发者必备的好工具。 主要功能包括： 查看App的布局 网络请求抓包 数据库、sp文件查看 自定义dumpapp插件 对于JavaScript的支持 无需root，只要能通过adb连接设备，操作方便。 use stethoadb方式连接到设备 打开集成stetho功能的app测试页面 输入 open_log 开启测试 在Chrome浏览器地址栏中输入chrome://inspect 选择需要inspect的应用进程 1. 查看App的布局 2. 网络请求抓包 3. 数据库、sp文件查看 4. 自定义dumpapp插件暂 未实现 5. 对于JavaScript的支持]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>stetho</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android API 变更]]></title>
    <url>%2F2018%2F11%2F19%2Fandroid%2FAPI%2Fandroid_API_%E5%8F%98%E6%9B%B4%2F</url>
    <content type="text"><![CDATA[TimePicker`if(Build.VERSION.SDK_INT&gt;= 23 ) { myTimePickerView.getHour();} else{ myTimePickerView.getCurrentHour();}]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>API</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[wireguard]]></title>
    <url>%2F2018%2F11%2F18%2F%E8%B5%84%E6%BA%90%2Fgoogle%20cloud%20platform%2Fwireguard%2F</url>
    <content type="text"><![CDATA[wireguard 一键安装脚本123sudo -iyum install -y wget v2ray一键脚本1 升级内核 一键命令1wget https://raw.githubusercontent.com/yobabyshark/wireguard/master/wireguard_install.sh &amp;&amp; chmod +x wireguard_install.sh &amp;&amp; ./wireguard_install.sh 选择1 更新 内核重启后 在执行上面的命令选择2 安装 1cat /etc/wireguard/client.conf 复制配置信息 客户端安卓版google play 安装 wireguard windows版https://tunsafe.com/download iostunsafe:https://testflight.apple.com/join/9gbYAJLBwireguard:https://testflight.apple.com/join/63I19SDT MAC版使用 安装官网工具 brew install wireguard-tools 把配置文件复制保存成 wrieguard.conf（conf结尾）的文件 command + shift + .找到/etc 创建 wireguard 文件夹 将文件复制到wireguard 关闭wg wg-quick down 指原网卡的名字 一般为 wgopenwrt 开启wg wg-quick up wireguard [Interface] PrivateKey = 2C0aWJ9nKp8wovQu6h68ZBBYX2cxzh3nfVxEVpAtgHo= Address = 10.0.0.2/24 DNS = 8.8.8.8 MTU = 1420 [Peer] PublicKey = 5Q2o+ZOsS5ygpJsX/mmx/umFlPbjBWrC/p18nVqCKm4= Endpoint = 35.200.98.182:24090 AllowedIPs = 0.0.0.0/0, ::0/0 PersistentKeepalive = 25]]></content>
      <categories>
        <category>资源</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[v2ray+BBr]]></title>
    <url>%2F2018%2F11%2F18%2F%E8%B5%84%E6%BA%90%2Fgoogle%20cloud%20platform%2Fv2ray%2BBBr%2F</url>
    <content type="text"><![CDATA[v2ray一键脚本+BBr安装(GCP)v2ray一键脚本1bash &lt;(curl -s -L https://v2ray666.com/v2ray.sh) BBR加速安装123wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.shchmod +x bbr.sh./bbr.sh]]></content>
      <categories>
        <category>资源</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[1. go 环境搭建]]></title>
    <url>%2F2018%2F11%2F16%2F%E5%90%8E%E7%AB%AF%2Fgo%2F2018-11-16%2F</url>
    <content type="text"><![CDATA[go 环境搭建下载安装包下载地址为：https://golang.org/dl/。 如果打不开可以使用这个地址：https://golang.google.cn/dl/。 环境变量配置export PATH=$PATH:/usr/local/go/bin GO IDE直接 在IntelliJ IDEA 安装插件GO]]></content>
      <categories>
        <category>服务器端</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ShadowsocksR+BBR(GCP)]]></title>
    <url>%2F2018%2F11%2F15%2F%E8%B5%84%E6%BA%90%2Fgoogle%20cloud%20platform%2FShadowsocksR%2BBBR(GCP)%2F</url>
    <content type="text"><![CDATA[ShadowsocksR+BBR(GCP)了解 ShadowsocksR了解 google BBR 加速 系统要求系统支持： CentOS 6+ ， Debian 7+ ， Ubuntu 12+虚拟技术： 除OpenVZ （ KVM 、 Xen 、 VMware 等）内存要求： ≥ 128M 下面开始操作吧 在GCP中创建 VM实例进入GCP console 选择菜单 安装sudo -i yum -y install wget 使用问题]]></content>
      <categories>
        <category>资源</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[google cloud platform]]></title>
    <url>%2F2018%2F11%2F12%2F%E8%B5%84%E6%BA%90%2Fgoogle%20cloud%20platform%2Fgoogle%20cloud%20platform%2F</url>
    <content type="text"><![CDATA[google cloud platformGoogle Cloud Platformgoogle 云平台 新用户送300美金（12个月）的礼品卡 google cloud Platform 可以做什么 VPS 还在购买VPS 服务翻墙 轻松帮你搞定 kindle 推送 部署自己的服务 等等 我们来体验下吧 创建 google cloud platform 创建google cloud platform VPS翻墙 ShadowsocksR+BBR加速一键安装包 kindle 推送]]></content>
      <categories>
        <category>资源</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 8.routes 优化]]></title>
    <url>%2F2018%2F11%2F08%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%208.%20routes%20%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[Flutter routes 优化页面目前页面 SplashPage LoginPage RegisterPage MainPage AccountPage 页面跳转 启动app 时候 SplashPage 如果back `退出` SplashPage -&gt; LoginPage 如果back `退出` SplashPage -&gt; LoginPage -&gt; RegisterPage 如果 back `LoginPage` SplashPage -&gt; LoginPage -&gt; MainPage 如果 back `退出` app 中有个 home 的根节点 在根节点上 back 就要退出app 启动app 时候 SplashPage `根节点 SplashPage` SplashPage -&gt; LoginPage `根节点 LoginPage` SplashPage -&gt; LoginPage -&gt; RegisterPage `根节点 LoginPage` SplashPage -&gt; LoginPage -&gt; MainPage `根节点 MainPage` 更改路由线路通过推送给定路线，然后在新路线完成动画制作后处置前一路线，替换最紧密包围给定上下文的导航器的当前路线。 Navigator.pushReplacementNamed 正常切換 1Navigator.of(context).pushNamed or 123456Navigator.push( context, MaterialPageRoute( builder: (_) =&gt; MainPage(), ), ); 路由優化main.dart 12345678910void main() &#123;// debugPaintSizeEnabled = true; //打开视觉调试开关 runApp( new MaterialApp( title: &apos;Snap&apos;, home: SplashPage(), // 闪屏页, routes: UIData.getRouter(), ), );&#125; UIData 12345678910111213141516171819202122class UIData &#123; //routes static const String homeRoute = &quot;/Home&quot;; static const String splashRoute = &quot;/Splash&quot;; static const String loginRoute = &quot;/Login&quot;; static const String registerRoute = &quot;/Register&quot;; static const String accountRoute = &quot;/Account&quot;; static getRouter() &#123; return &lt;String, WidgetBuilder&gt;&#123; // 路由 UIData.splashRoute: (BuildContext context) =&gt; SplashPage(), UIData.loginRoute: (BuildContext context) =&gt; LoginPage(), UIData.registerRoute: (BuildContext context) =&gt; RegisterPage(), UIData.homeRoute: (BuildContext context) =&gt; MainPage(), UIData.accountRoute: (BuildContext context) =&gt; AccountPage(), &#125;; &#125;&#125; SplashPage.dart中 路線切換 跳轉登陸 12Navigator.pop(context); Navigator.pushReplacementNamed(context, UIData.loginRoute); 跳轉主頁面 12Navigator.pop(context);Navigator.pushReplacementNamed(context, UIData.homeRoute);]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[科學上網 - google cloud platfrom v2ray]]></title>
    <url>%2F2018%2F11%2F07%2F%E5%B7%A5%E5%85%B7%2Fshadowsocks%2Fgoogle%20cloud%20platfrom%20v2ray%2F</url>
    <content type="text"><![CDATA[科學上網 - google cloud platfrom v2ray创建 google cloud platfrom如果已经有账号了跳过 使用 google cloud platfrom 创建VM安装v2ray在浏览器窗口打开 进入控制台 切换 权限sudo -i 安装1bash &lt;(curl -s -L https://v2ray66.com/v2ray.sh) 123456789如果提示 curl: command not found ，那是因为你的 VPS 没装 Curlubuntu/debian 系统安装 Curl 方法: apt-get update -y &amp;&amp; apt-get install curl -ycentos 系统安装 Curl 方法: yum update -y &amp;&amp; yum install curl -y安装好 curl 之后就能安装脚本了]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CentOS Google BBR 加速VPS网络]]></title>
    <url>%2F2018%2F11%2F06%2F%E5%B7%A5%E5%85%B7%2Fshadowsocks%2FCentOS%20Google%20BBR%2F</url>
    <content type="text"><![CDATA[Google BBR 加速VPS网络Google BBR就是谷歌公司提出的一个开源TCP拥塞控制的算法。在最新的linux 4.9及以上的内核版本中已被采用。 有KVM架构的VPS才能使用本教程升级内核并使用，openvz的VPS用户若内核版本较低则无法使用！ 深度研究的可以参考 Google的TCP BBR拥塞控制算法解析 1.安装shadowsocks12345yum install epel-releaseyum updateyum install python-setuptools m2crypto supervisoreasy_install pippip install shadowsocks 2. 配置shadowsocks.json文件上边几条命令都执行完成后，输入下面这条命令，回车执行：1vi /etc/shadowsocks.json 之后按i键进入编辑模式，putty黑框的左下角会出现 – INSERT – 字样，然后一次性复制下面的内容（记得先修改再复制，将2333修改为想用的端口，范围 1 – 65535，mima12345改成你的密码，记住下面的内容，配置客户端的时候会用到；另外，下面是建了2333和6666两个账号，如果多了，可以删掉，不够可以再加。注意逗号，免得出错）, 在putty里右键，此时复制的内容应该已经粘贴到了putty里了。 123456789&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;port_password&quot;:&#123; &quot;2333&quot;:&quot;mima12345&quot;, &quot;6666&quot;:&quot;mima12345&quot; &#125;, &quot;timeout&quot;:600, &quot;method&quot;:&quot;aes-256-cfb&quot;&#125; 完成后，按ESC键退出编辑模式，putty黑框的左下角 – INSERT – 字样消失，输入:wq，回车执行，这时文件保存并返回。 3 添加到进程。继续输入下面这条命令，回车执行：1vi /etc/supervisord.conf 之后按i键进入编辑模式，putty黑框的左下角会出现 – INSERT – 字样，用方向键将光标移动到文件尾部空行处。然后一次性复制下面的内容，在putty里右键，此时复制的内容应该已经粘贴到了putty里了。 1234567[program:shadowsocks]command=ssserver -c /etc/shadowsocks.jsonautostart=trueautorestart=trueuser=rootlog_stderr=truelogfile=/var/log/shadowsocks.log 完成后，按ESC键退出编辑模式，putty黑框的左下角 – INSERT – 字样消失，输入:wq，回车执行，这时文件保存并返回。 4. 设置开机启动继续输入下面这条命令，回车执行：1vi /etc/rc.local 之后按i键进入编辑模式，putty黑框的左下角会出现 – INSERT – 字样，用方向键将光标移动到文件中部空行处。然后一次性复制下面的内容，在putty里右键，此时复制的内容应该已经粘贴到了putty里了。12service supervisord startssserver -c /etc/shadowsocks.json -d start 完成后，按ESC键退出编辑模式，putty黑框的左下角 – INSERT – 字样消失，输入:wq，回车执行，这时文件保存并返回。1reboot 客户端配置1.shadowsocks下载shadowsocks下载地址 2.配置 服务器IP ： 第一步获取到的ip服务器端口 ： 第二步第五小步设置的端口（port），比如：2333密码 ： 第二步第五小步设置的密码（password），比如:mima12345加密 ： 第二步第五小步设置的加密方式（method），默认为：aes-256-cfb备注 不用填代理端口 建议使用默认端口1080 配置完成，点击确定，然后在工具栏右键纸飞机图标，启动系统代理，现在打开 谷歌 看看墙外的世界。至于其他菜单的功能，靠你自己摸索了。 注意如果遇到问题启动12ssserver -c /etc/shadowsocks.json -d startssserver -c /etc/shadowsocks.json -d stop]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Earn Cash - 分享文件]]></title>
    <url>%2F2018%2F11%2F02%2F%E8%B5%84%E6%BA%90%2Fearn_cash%2F2018-11-02%2F</url>
    <content type="text"><![CDATA[分享文件介绍下 可以当做网盘 又可以赚钱的工具up-4 通过上传文件，别人下载赚钱]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>Earn Cash</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[金庸武侠]]></title>
    <url>%2F2018%2F10%2F30%2F%E8%B5%84%E6%BA%90%2Fjinyong%2F</url>
    <content type="text"><![CDATA[金庸武侠2018-18-30今天在公司加班 晚上八点多 同事突然 说金庸死了 刚刚开始不相信立即 登陆网易新闻 查看最新消息没有 任何消息 同事 用的是搜狐app 推送的消息 我立即百度了下震惊了 3分钟前的消息 金庸去世了 我在一个月前周末回顾了下天龙八部 和 侠客行 有了新的认识 ，在参考 youtub 的讲解 有不少顿悟的地方 当年看的是精彩 没体会到其中的内涵这两部 都与佛 有种莫大的关联 天龙八部天龙八部 本来就是 佛教术语 可以认为 佛教八大护法神 八部包括：一天众、二龙众、三夜叉、四乾达婆、五阿修罗、六迦楼罗、七紧那罗、八摩睺罗伽。 youtub 中 有讲解 不同的八部众 在居中都有相应的人物 八部众 特点 人物 人物特点 天 帝释天，佛教有几十诸天，其中帝释天是众天神的领袖 萧峰 人品、相貌、气概、武功，都犹如天神降世一般。释名中说“天神的寿命终了之后，也是要死的。天神临死之前有五种征状：衣裳垢腻、头上花萎、身体臭秽、腋下汗出、不乐本座，这就是所谓‘天人五衰’，是天神最大的悲哀。” 最后萧峰也死的如此惊天动地 龙 在中国人心中 地位很高 段誉 大理皇帝，地位高。并且，大理皇室历来自天龙寺出家 夜叉 是一种恶神，神憎魔厌，勇健暴恶，能食人，后受佛之教化而成为护法之神。 四大恶人 四大恶人虽然做了诸多恶事，可他们也有着自己的悲哀，并非良心全部泯灭。有时善恶只一线之间，一念而已，不存在绝对的善与恶。 乾达婆 为服侍因陀罗（帝释天）的乐神，负责为众神在宫殿里奏发美丽的音乐。在梵语中是变幻莫测的意思 阿朱 阿朱善于易容，变幻莫测，最后似一缕青烟消散。并服侍过萧峰 阿修罗 被视为恶神，属于凶猛好斗的鬼神，经常与帝释天争斗不休。能力不小，权力很大，疑心病也很重 慕容复 生性多疑，出身高贵，武功极高，却不是帝释天萧峰的对手。对于复国，一心希冀，最终由于过执偏激而疯疯癫癫。过犹不及。 迦楼罗 金翅鸟，它取龙为食，特别是毒龙，益于众生，最终因为腹中毒素积累太多而死，死时全身烧尽，只剩下如意珠。 鸠摩智 虽为“得道高僧”，却与天龙寺为敌，经常与段誉过不去，因执念于众武功而最终走火入魔，不过他幸运地地方在于，把“毒”全部还给了龙（段誉），没有像大棚金翅鸟一样自焚。 紧那罗 因其头上长角又被称为“人非人”。能歌善舞，也是服侍帝释天的乐神之一。 阿紫 自幼生活在星宿派的恶劣环境中，性情变得不可捉摸，一方面狠毒狡诈，一方面又单纯痴情，是为阿紫的“人非人” 摩呼罗迦 佛教传说中拥有蛇的神，是大莽蛇神，人身蛇的头，又称作地龙。原本是腹行类，但由于其智力较低而无知，反而能得道挽回前因，摆脱腹行类的命运，脱胎换骨成为神。 虚竹 笨头笨脑一根筋，却也因为为人善良正直，误打误撞的得了许多好处，最终飞上枝头做了驸马 剧中还隐含着佛家的人生八苦 《中阿含经》的说法：“云何苦圣谛？所谓生苦、老苦、病苦、死苦、怨憎恚苦、恩爱别苦、所求不得苦。略五盛阴苦 生苦老苦老的过程是一件很痛苦的事情秦始皇 李世民 求长生不老鉴宝的马末都 说过自己人年龄越大越怕死 我很认同 病苦剧中 萧峰 带着阿朱到处求药，明知九死一生 ，也去聚贤庄心爱的人，命悬一线，就算拿自己命换也愿意的心。（这或许很多家长当孩子病的时候能体会）外加上阿朱这伤和自己有部分责任 死苦死对于自己来说是件痛苦的事情，同时也是解脱。但是对家人的痛苦是无法估计的。 还是阿朱，阿朱的死，估计萧峰心里的苦。不说你也能体会。 怨憎恚苦段誉喜欢自由自在，不想当皇帝被束缚。始终逃脱不了。 爱别离苦萧峰和阿朱的别离 - 这不必说，想想都心酸阿紫 因为 萧峰的死 选择 自杀 - 可见阿紫 对乔峰的心 虚竹 父母的死 - 刚刚知道父母是谁了，突然间就没有了。喜极而悲，心里落差太大了。 求不得苦这个例子，到处都是。慕容复复国 ，鸠摩智对武学追求阿紫对萧峰的感情庄聚贤对阿紫的感情段誉对王语嫣的感情-刚刚开始一直是求不得 在老版本中 最后在一起了，据说在新版中最后在一起，段誉发现不是自己喜欢的。 自己的喜欢只是神仙姐姐的雕像，和心中对得不到的东西，越想得到。(想想自己是不是想起很多傻事情了) 高中的时候我喜欢班上一个同学，高考完表白被拒绝，大学事情完全放不下对方，但是对方已经有男朋友了。对方的一个群发短信都能让你高兴很久很久 工作之后还是念念不忘，一个偶然的机会，QQ又联系上了。知道他们分手了，异地网聊了一个多月她要去深圳和姐姐做外贸。我并没有让她来北京，我只是说做你想住的。大不了过几个月我就去深圳。结果一个月后，她说分了，我被拉黑了，她和前男友又好了。我还想着离职去深圳。被领导约谈了6次。 人的执念太重了，不要高估自己的控制了。 贪污的永远贪不够，赌徒永远都说戒毒，永远解不了 五阴盛苦这个就复杂了说实话我不能完全理解 这里面还讲述了佛家的贪嗔痴 贪嗔痴贪段王爷的贪恋美色 嗔白夫人 - 小时候的花衣服，白副帮主的死，萧峰的陷害，段王爷的加害 痴鸠摩智 对武学的痴 金庸小说的改版金庸小说是不停的研磨出来的不得不佩服 天龙八部经历三个大的版本改动其中金庸自己草稿上改动就不知道多少了 现在的网络小说就不行了，定期更新，关注人多了，想停下来修改都难 逍遥门 - 前期写的不错，后面就不怎么样了三体 - 不错但是不是武侠了 不写了明天还要去医院做手术呢 缅怀这位武侠界的 泰山北斗小时候用黑白电视追剧 您的作品 是我们的回忆您的用心 是我们的回味您的离开 是我们的损失 感谢您，以及您的作品一路走好]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>share</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[下载资源 方法]]></title>
    <url>%2F2018%2F10%2F27%2F%E8%B5%84%E6%BA%90%2Fdownload%2F%E4%B8%8B%E8%BD%BD%E8%B5%84%E6%BA%90%20%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[下载资源 方法电影资源pniao 审核高 基本没有抢先版 片源可靠 80s 更新快 含有抢先版 连接不太可靠 bt电影天堂 电影天堂 下载工具MAC破解版迅雷 mac/win链接: https://pan.baidu.com/s/1cAsHfulruF2fTCcpcOQ4hw 提取码: 65pv FOLX5 macFOLX5官网 proxyee-down mac/win百度云下载慢 proxyee-down 帮你解决 Proxyee Down 使用教程 speedpan winspeedpan官网：http://speedpan.com/ aria2 mac/winAria2是一款免费开源跨平台且不限速的多线程下载软件，Aria2的优点是速度快、体积小、资源占用少；支持 HTTP / FTP / BT / Magnet 磁力链接等类型的文件下载；支持 Win、Mac、Linux系统，甚至在树莓派、NAS、路由器等设备上都能安装它。 下载地址 敏感资源磁力搜索BT升级离线方式论坛黑科云http://lx.heikeyun.net/login.aspx]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>下载</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 编译问题 - Could not find play-services-basement.aar]]></title>
    <url>%2F2018%2F10%2F26%2Fandroid%2Fproblem%2Fandroid%20%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98_play-services-basement%2F</url>
    <content type="text"><![CDATA[最近 要发布版本 遇到一个问题 1234Could not find play-services-basement.aar (com.google.android.gms:play-services-basement:15.0.1).Searched in the following locations: https://jcenter.bintray.com/com/google/android/gms/play-services-basement/15.0.1/play-services-basement-15.0.1.aar 无论是否开启vpn都是这样的 访问 https://jcenter.bintray.com/com/google/android/gms/play-services-basement/15.0.1/play-services-basement-15.0.1.aar 12345678&#123; errors: [ &#123; status: 404, message: &quot;Could not find resource&quot; &#125; ]&#125; 访问https://repo.jfrog.org/artifactory/libs-release-bintray/com/google/android/ 发现目录下 gcm 没有了 解决问题下载aar 文件下载地址mvnrepository 选择 版本点击 aar 下载到本地 引入 aar 文件arr 文件放入 项目中的lib目录下 在项目 build.gradle 添加引用aar 在 dependencies 下添加 1234dependencies &#123; compile(name: &apos;play-services-basement-15.0.1&apos;, ext: &apos;aar&apos;)&#125; 屏蔽 所有库中的 play-services-basement在项目 build.gradle 添加引用aar 在 build.gradle 根节点下添加 123configurations &#123; all*.exclude group: &apos;com.google.android.gms&apos;, module: &apos;play-services-basement&apos;&#125; 搞定了 文章部分连接采用 短连接需要等待几秒跳转 最近google 出现不少问题 google 欧洲反垄断罚金 android 系统 手机策略变革 看来 还是有个企业的内网仓库 比较好啊相关的库 先从内网仓库获取 速度快稳定]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>problem</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 库依赖问题]]></title>
    <url>%2F2018%2F10%2F25%2Fandroid%2Fbase%2Fandroid_lib_depend%2F</url>
    <content type="text"><![CDATA[android 库依赖问题原因 库版本不一致 com.android.support的包版本号要保持一致 ，google gcm 与 firebase不一致 重复库 开源库中 包含 本项目中的库 解决方法 修改自己项目中的com.android.support的版本号，与所依赖的库版本号一致，但是当我们依赖的库中的com.android.support版本号有好几个版本就不行了。（不推荐） 依赖第三方库时候排除掉对com.android.support包的依赖，这样自己的项目随便依赖什么版本都可以，但是这种方法需要你先找到哪些库存在冲突 通过groovy脚本强制修改冲突的依赖库版本号 （推荐） 解决问题查看依赖报告命令行 ./gradlew :app:dependencies 查看 项目库依赖关系 排除传递性依赖12345678910111213141516171819202122232425262728293031323334353637+--- com.android.support:support-v4:27.1.1| +--- com.android.support:support-compat:27.1.1| | +--- com.android.support:support-annotations:27.1.1| | \--- android.arch.lifecycle:runtime:1.1.0| | +--- android.arch.lifecycle:common:1.1.0| | \--- android.arch.core:common:1.1.0| +--- com.android.support:support-media-compat:27.1.1| | +--- com.android.support:support-annotations:27.1.1| | \--- com.android.support:support-compat:27.1.1 (*)| +--- com.android.support:support-core-utils:27.1.1| | +--- com.android.support:support-annotations:27.1.1| | \--- com.android.support:support-compat:27.1.1 (*)| +--- com.android.support:support-core-ui:27.1.1| | +--- com.android.support:support-annotations:27.1.1| | +--- com.android.support:support-compat:27.1.1 (*)| | \--- com.android.support:support-core-utils:27.1.1 (*)| \--- com.android.support:support-fragment:27.1.1| +--- com.android.support:support-compat:27.1.1 (*)| +--- com.android.support:support-core-ui:27.1.1 (*)| +--- com.android.support:support-core-utils:27.1.1 (*)| +--- com.android.support:support-annotations:27.1.1| +--- android.arch.lifecycle:livedata-core:1.1.0| | +--- android.arch.lifecycle:common:1.1.0| | +--- android.arch.core:common:1.1.0| | \--- android.arch.core:runtime:1.1.0| | \--- android.arch.core:common:1.1.0| \--- android.arch.lifecycle:viewmodel:1.1.0+--- com.android.support:appcompat-v7:27.1.1| +--- com.android.support:support-annotations:27.1.1| +--- com.android.support:support-core-utils:27.1.1 (*)| +--- com.android.support:support-fragment:27.1.1 (*)| +--- com.android.support:support-vector-drawable:27.1.1| | +--- com.android.support:support-annotations:27.1.1| | \--- com.android.support:support-compat:27.1.1 (*)| \--- com.android.support:animated-vector-drawable:27.1.1| +--- com.android.support:support-vector-drawable:27.1.1 (*) 12345这里对gradle dependencies中的-&gt;、 (*)进行解释固定版本: 唯一的依赖固定版本(*):还存在该库其他版本的依赖或者间接依赖，并且默认选择(*)所标注的版本。这里rxjava版本就是使用rxbinding里的2.0.2版本1-&gt;版本2(*):还存在该库其他版本的依赖或者间接依赖，并且并且选择版本2。这里rxandroid版本就是使用2.0.1 强制制定一个版本 gradle会自动帮我们强制依赖最高版本的jar包 修改默认解决策略方法，不然很难发现版本冲突 取消gradle的默认高版本统一依赖，在bulid.gradle中添加： //取消gradle默认统一使用高版本依赖的策略（gradle默认依赖冲突解决策略） 12345configurations.all&#123; resolutionStrategy&#123; failOnVersionConflict() &#125; &#125; 排除传递性依赖的方法如下 1234compile(&apos;org.hibernate:hibernate-core:3.6.3.Final&apos;)&#123; exclude group:&quot;org.slf4j&quot;,module:&quot;slf4j-api&quot; //transitive=false &#125; 强制制定一个版本 123456configurations.all&#123; resolutionsStrategy&#123; force &apos;org.slf4j:slf4j-api:1.7.24&apos; &#125;&#125; 依赖方式 依赖类型 意义 Compile 默认配置，该依赖会参与编译并且打包到所有的build type以及flavors的apk中 Provided 对所有的build type以及flavors来说只在编译时使用，只参与编译并不打包到最终apk APK 只会打包到apk文件中而不参与编译，所以不能在代码中直接调用jar中的类或方法，否则在编译时会报错 - - - - Test compile 仅仅是针对单元测试代码编译以及最终打包测试apk时有效，而对正常的debug或者release apk包不起作用。 Debug compile 仅仅针对debug模式的编译和最终的debug打包时有效。 Release compile 仅仅针对release模式的编译和最终的release打包时有效 依赖远程文件compile &#39;io.reactivex.rxjava2:rxandroid:2.0.1&#39; 依赖本地文件当前模块下libs文件夹下的全部jar文件compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;) 指定路径下的全部jar文件compile fileTree(dir: &#39;../librarymodule/libs&#39;, include: &#39;*.jar&#39;) 加载aar文件 在项目build.gradle中 添加 12345repositories &#123; flatDir &#123; dirs &apos;libs&apos; &#125;&#125; 这意味着系统将在libs目录下搜索依赖。同样的如果你愿意的话可以加入多个目录。这里系统直接加载libs文件夹下的aar文件 compile(name: &#39;aar的名字（不用加后缀）&#39;, ext: &#39;aar&#39;) 依赖本地库工程compile project(&#39;:librarymodule&#39;) 冲突的解决方法先来看看几种不同的写法对库的加载有何区别 // 下载包含该库在内的其他所依赖的所有库compile &#39;io.reactivex.rxjava2:rxandroid:2.0.1&#39; // 只下载该库，其他所依赖的所有库不下载compile ‘io.reactivex.rxjava2:rxandroid:2.0.1@aar’ // 在使用@aar的前提下还能下载其他依赖库，则需要添加transitive=true的条件compile (&quot;io.reactivex.rxjava2:rxandroid::2.0.1@aar&quot;) { transitive=true } // 去除某一个依赖库compile (&quot;io.reactivex.rxjava2:rxandroid:$rootProject.ext.rxandroid&quot;) { transitive=true exclude group: &#39;io.reactivex.rxjava2&#39;, module: &#39;rxjava&#39; } configurationsconfigurations - 项目中的所有rxjava2引用都去除 configurations { all*.exclude group: &#39;io.reactivex.rxjava2&#39;, module: &#39;rxjava&#39; } 或者 configurations { compile.exclude module: &#39;rxjava&#39; } configurations DSL还可以通过Force强制约束某个库的版本，比如我这里将appcompat-v7包限定为25.1.0 12345configurations.all &#123; resolutionStrategy &#123; force &quot;com.android.support:appcompat-v7:25.1.0&quot; &#125;&#125; 外部配置依赖版本我们新建一个config.gradle作为配置文件 12345678910111213141516ext &#123; androidGradleVersion = &apos;2.3.1&apos; AndroidSupportVersion = &apos;25.3.1&apos; AndroidConstraintLayoutVerson = &apos;1.0.2&apos; compileSdkVersion = 25 buildToolsVersion = &apos;25.0.2&apos; defaultConfig = [ applicationId : &quot;com.renyu.gradledemo&quot;, minSdkVersion : 15, targetSdkVersion : 25, versionCode : 1, versionName : &quot;1.0&quot; ]&#125; 其中defaultConfig是一个map键值对，有别于上方的公共配置，这样看起来更清晰简洁 这里我们需要使用apply from来引用config.gradle。同理当你的gradle脚本太大的时候，你可以按照具体任务类型将一个大gradle脚本拆分成几个子脚本，然后分别apply from引入到主脚本中。 1234567891011121314151617181920212223242526// 这里的apply是为了让子模块使用apply from: &quot;config.gradle&quot;buildscript &#123; repositories &#123; jcenter() &#125; dependencies &#123; // root下build.gradle使用 apply from: &quot;config.gradle&quot; classpath &quot;com.android.tools.build:gradle:$androidGradleVersion&quot; // NOTE: Do not place your application dependencies here; they belong // in the individual module build.gradle files &#125;&#125;allprojects &#123; repositories &#123; jcenter() &#125;&#125;task clean(type: Delete) &#123; delete rootProject.buildDir&#125; 再看看app模块下的build.gradle的配置 123456789101112131415161718192021222324252627282930apply plugin: &apos;com.android.application&apos;android &#123; compileSdkVersion rootProject.ext.compileSdkVersion buildToolsVersion rootProject.ext.buildToolsVersion defaultConfig &#123; applicationId rootProject.ext.defaultConfig.applicationId minSdkVersion rootProject.ext.defaultConfig.minSdkVersion targetSdkVersion rootProject.ext.defaultConfig.targetSdkVersion versionCode rootProject.ext.defaultConfig.versionCode versionName rootProject.ext.defaultConfig.versionName testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot; &#125; buildTypes &#123; release &#123; minifyEnabled false proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; &#125;&#125;dependencies &#123; compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;]) androidTestCompile(&apos;com.android.support.test.espresso:espresso-core:2.2.2&apos;, &#123; exclude group: &apos;com.android.support&apos;, module: &apos;support-annotations&apos; &#125;) compile &quot;com.android.support:appcompat-v7:$rootProject.ext.AndroidSupportVersion&quot; compile &quot;com.android.support.constraint:constraint-layout:$rootProject.ext.AndroidConstraintLayoutVerson&quot; testCompile &apos;junit:junit:4.12&apos;&#125; layout进行模块化分包对layout进行模块化分包 main模块与main2模块他们的布局是相互独立保存的，没有堆叠在一起。那么这个是怎么做到的呢？之前大家从eclipse直接转项目到Android Studio上的时候， 不知道有没有注意到在app模块下的build.gradle有一个DSL叫sourceSets，通过修改sourceSets中的属性，可以指定哪些源文件（或文件夹下的源文件）要被编译，哪些源文件要被排除。 Gradle就是通过它实现项目的布局定义。Android Studio插件默认实现了两个sourceSet：main和test。每个sourceSet都提供了一系列的属性，通过修改这些属性，可以定义该sourceSet所包含的源文件，比如java.srcDirs，res.srcDirs 12345678910sourceSets &#123; main &#123; java res &#125; test &#123; java res &#125;&#125; 实现 步骤 按照自己的项目需求建立layout目录，例如本文就是/alllayouts/main/layout与/alllayouts/main2/layout在module对应的build.gradle下添加sourceSets配置 123456789sourceSets &#123; main &#123; res.srcDirs = [ &apos;src/main/res/alllayouts/main&apos;, &apos;src/main/res/alllayouts/main2&apos;, &apos;src/main/res&apos; ] &#125; &#125; 多渠道打包NDK篇abiFilters可以优先适配需要适配的cpu，其他做兼容处理。如本例我们放置了armeabi、armeabi-v7a、x86三种类型CPU的so，其他的就让手机自己去做兼容处理去了 1234ndk &#123; //选择要添加的对应cpu类型的.so库。 abiFilters &apos;armeabi&apos;, &apos;armeabi-v7a&apos;, &apos;x86&apos; // 还可以添加 &apos;armeabi-v8a&apos;, &apos;x86_64&apos;, &apos;mips&apos;, &apos;mips64&apos;&#125; 编译出错查看详情输出较详细的信息gradlew compileDebug --stacktrace 后面加上-info或者-debug的选项得到更详细的信息 gradlew compileDebug --stacktrace -info 或者gradlew compileDebug --stacktrace -debug gradlew compileDebugSources --stacktrace -info]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webview 与 JS 交互]]></title>
    <url>%2F2018%2F10%2F24%2Fandroid%2Fbase%2Fwebview_js_inferface%2F</url>
    <content type="text"><![CDATA[参考 webview 与 JS 交互Android与JS通过WebView互相调用方法，实际上是： 一 Android去调用JS的代码 通过WebView的loadUrl（） 通过WebView的evaluateJavascript（） 二 JS去调用Android的代码 通过WebView的addJavascriptInterface（）进行对象映射 通过 WebViewClient 的shouldOverrideUrlLoading()方法回调拦截 url 通过 WebChromeClient 的onJsAlert()、onJsConfirm()、onJsPrompt（）方法回调拦截JS对话框alert()、confirm()、prompt（） 消息 Android去调用JS的代码方式1：通过WebView的loadUrl（） 在js 中声明方法 1234567// JS代码&lt;script&gt; // Android需要调用的方法 function callJS()&#123; alert(&quot;Android调用了JS的callJS方法&quot;); &#125;&lt;/script&gt; 在android 中 调用 1234// 注意调用的JS方法名要对应上// 调用javascript的callJS()方法mWebView.loadUrl(&quot;javascript:callJS()&quot;); 特别注意：JS代码调用一定要在 onPageFinished（） 回调之后才能调用，否则不会调用。 onPageFinished()属于WebViewClient类的方法，主要在页面加载结束时调用 方式2：通过WebView的evaluateJavascript（）Android 4.4 后才可使用 在js 中声明方法 1234567// JS代码&lt;script&gt; // Android需要调用的方法 function callJS()&#123; alert(&quot;Android调用了JS的callJS方法&quot;); &#125;&lt;/script&gt; 在android 中 调用 12345678// 只需要将第一种方法的loadUrl()换成下面该方法即可mWebView.evaluateJavascript（&quot;javascript:callJS()&quot;, new ValueCallback&lt;String&gt;() &#123; @Override public void onReceiveValue(String value) &#123; //此处为 js 返回的结果 &#125; &#125;);&#125; WebView控件功能强大，除了具有一般View的属性和设置外，还可以对url请求、页面加载、渲染、页面交互进行强大的处理。 对比 调用方式 优点 缺点 使用场景 loadUrl() 方法简介 效率低 获取返回值麻烦 不需要返回值 ，对性能要求低时 evaluateJavascript() 效率高 兼容性差 android 4.4以上可用 android4.4+ 可用混合使用 12345678910111213// Android版本变量final int version = Build.VERSION.SDK_INT;// 因为该方法在 Android 4.4 版本才可使用，所以使用时需进行版本判断if (version &lt; 18) &#123; mWebView.loadUrl(&quot;javascript:callJS()&quot;);&#125; else &#123; mWebView.evaluateJavascript（&quot;javascript:callJS()&quot;, new ValueCallback&lt;String&gt;() &#123; @Override public void onReceiveValue(String value) &#123; //此处为 js 返回的结果 &#125; &#125;);&#125; JS通过WebView调用 Android 代码方式1：通过 WebView的addJavascriptInterface（）进行对象映射 定义一个与JS对象映射关系的Android类：AndroidtoJs 12345678910// 继承自Object类public class AndroidtoJs extends Object &#123; // 定义JS需要调用的方法 // 被JS调用的方法必须加入@JavascriptInterface注解 @JavascriptInterface public void hello(String msg) &#123; System.out.println(&quot;JS调用了Android的hello方法&quot;); &#125;&#125; 在Android里通过WebView设置Android类与JS代码的映射 123456789101112131415mWebView = (WebView) findViewById(R.id.webview);WebSettings webSettings = mWebView.getSettings();// 设置与Js交互的权限webSettings.setJavaScriptEnabled(true);// 通过addJavascriptInterface()将Java对象映射到JS对象//参数1：Javascript对象名//参数2：Java对象名mWebView.addJavascriptInterface(new AndroidtoJs(), &quot;test&quot;);//AndroidtoJS类对象映射到js的test对象// 加载JS代码 mWebView.loadUrl(&quot;&quot;); html 中设置 调用 1234567891011121314&lt;script&gt; function callAndroid()&#123; // 由于对象映射，所以调用test对象等于调用Android映射的对象 test.hello(&quot;js调用了android中的hello方法&quot;); &#125;&lt;/script&gt;&lt;body&gt; //点击按钮则调用callAndroid函数 &lt;button type=&quot;button&quot; id=&quot;button1&quot; onclick=&quot;callAndroid()&quot;&gt;&lt;/button&gt; &lt;/body&gt; 方式2：通过 WebViewClient 的方法shouldOverrideUrlLoading ()回调拦截 url 在JS约定所需要的Url协议 1234567891011&lt;script&gt; function callAndroid()&#123; /*约定的url协议为：js://webview?arg1=111&amp;arg2=222*/ document.location = &quot;js://webview?arg1=111&amp;arg2=222&quot;; &#125;&lt;/script&gt;&lt;!-- 点击按钮则调用callAndroid（）方法 --&gt; &lt;body&gt; &lt;button type=&quot;button&quot; id=&quot;button1&quot; onclick=&quot;callAndroid()&quot;&gt;点击调用Android代码&lt;/button&gt; &lt;/body&gt; 在android shou通过WebViewClient复写shouldOverrideUrlLoading （） 在android shouldOverrideUrlLoading 中可以监听到 加载的url 匹配参数 方式3：通过 WebChromeClient 的onJsAlert()、onJsConfirm()、onJsPrompt（）方法回调拦截JS对话框alert()、confirm()、prompt（） 消息]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCP and UDP]]></title>
    <url>%2F2018%2F10%2F24%2Fandroid%2Fbase%2FTCP%2F</url>
    <content type="text"><![CDATA[TCP/IP是个协议组，可分为三个层次：网络层、传输层和应用层。 在网络层有IP协议、ICMP协议、ARP协议、RARP协议和BOOTP协议。 在传输层中有TCP协议与UDP协议。 在应用层有FTP、HTTP、TELNET、SMTP、DNS等协议。 因此，HTTP本身就是一个协议，是从Web服务器传输超文本到本地浏览器的传送协议。 TCP 是基于 TCP 协议实现的网络文本协议,属于传输层。UDP 是和TCP 对等的，属于传输层，UDP 和 TCP 有重要的区别。 TCPTCP（Transmission Control Protocol，传输控制协议）是基于连接的协议，也就是说，在正式收发数据前，必须和对方建立可靠的连接。一个TCP连接必须要经过三次“对话”才能建立起来，其中的过程非常复杂， 我们这里只做简单、形象的介绍，你只要做到能够理解这个过程即可。我们来看看这三次对话的简单过程：主机A向主机B发出连接请求数据包： “我想给你发数据，可以吗？”，这是第一次对话； 主机B向主机A发送同意连接和要求同步（同步就是两台主机一个在发送，一个在接收，协调工作）的数据包：“可以，你什么时候发？”，这是第二次对话； 主机A再发出一个数据包确认主机B的要求同步：“我现在就发，你接着吧！”，这是第三次对话。 三次“对话”的目的是使数据包的发送和接收同步，经过三次“对话”之后，主机A才向主机B正式发送数据。 UDPUDP（User Data Protocol，用户数据报协议）是与TCP相对应的协议。它是面向非连接的协议，它不与对方建立连接，而是直接就把数据包发送过去！ UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境。 比如，我们经常使用“ping”命令来测试两台主机之间TCP/IP通信是否正常，其实“ping”命令的原理就是向对方主机发送UDP数据包，然后对方主机确认收到数据包，如果数据包是否到达的消息及时反馈回来，那么网络就是通的。 例如，在默认状态下，一次“ping”操作发送4个数据包（如图2所示）。大家可以看到，发送的数据包数量是4包，收到的也是4包（因为对方主机收到后会发回一个确认收到的数据包）。这充分说明了UDP协议是面向非连接的协议，没有建立连接的过程。正因为UDP协议没有连接的过程，所以它的通信效果高；但也正因为如此，它的可靠性不如TCP协议高。QQ就使用UDP发消息，因此有时会出现收不到消息的情况。 tcp协议和udp协议的差别 TCP UDP 是否连接 面向连接 面向非连接 传输可靠性 可靠 不可靠 应用场合 传输大量数据 少量数据 速度 慢 快]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCP]]></title>
    <url>%2F2018%2F10%2F24%2Fandroid%2Fbase%2FHttp_Https%2F</url>
    <content type="text"><![CDATA[TCPTCP 建立连接三次握手 客户端发送一个带SYN标志的TCP报文到server。这是三次握手过程中的报文1。 server端回应client的，这是三次握手中的第2个报文。这个报文同一时候带ACK标志和SYN标志。因此它表示对刚才clientSYN报文的回应。同一时候又标志SYN给client，询问client是否准备好进行数据通讯。 客户必须再次回应服务段一个ACK报文，这是报文段3。 这个过程 很早在博客上有人这么解释 很生动 A 和 B 通话 A 询问 B 能不能听到 —- 第一次握手 B 听到 A的询问 回复 A 我能听到，你能不能听到 —- 第二次 A听到B的消息 通知B 我也能听到 —- 第三次 这样三次 才能保证 服务器 与客户端 连接正常 连接终止协议（四次挥手） TCP 客户端发送一个FIN。用来关闭客户到server的数据传送（报文段4）。 server收到这个FIN。它发回一个ACK，确认序号为收到的序号加1（报文段5）。 server关闭client的连接，发送一个FIN给client（报文段6）。 客户段发回ACK报文确认。并将确认序号设置为收到序号加1（报文段7）。 A 和 B 通话 挂断电话 A 通知 B 结束通话 挂断吧 —- 第一次握手 B 听到 A的挂断消息 回复A 收到挂断消息 挂了吧 —- 第二次 A 听到 B的消息 确认B接收到挂断消息 B挂断电话 系统发送提示音 —- 第三次 B 收到系统提示音 知道A已经挂端了 B也挂断了 —- 第四次]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Earn Cash - shorte.st]]></title>
    <url>%2F2018%2F10%2F23%2F%E8%B5%84%E6%BA%90%2Fearn_cash%2FEarn%20Cash%20-%20shorte.st%2F</url>
    <content type="text"><![CDATA[网赚 - shorte.st使用短连接 网赚 注册注册时候需要google 认证 需要翻墙 第一次注册 赠送 $3 赚钱方式Cash SurveysCash OffersEarn PointsPaidEmail® 邮件方式My Account &gt; Your Profile 选择查看邮件的钱数 好的 坐等邮件明天继续更新 兑换方式]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>云存储</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Earn Cash - paid to read email]]></title>
    <url>%2F2018%2F10%2F23%2F%E8%B5%84%E6%BA%90%2Fearn_cash%2FEarn%20Cash%20-%20paid%20to%20read%20%2F</url>
    <content type="text"><![CDATA[网赚 - paid to read emailpaid to read email 注册注册时候需要google 认证 需要翻墙 第一次注册 赠送 $3 赚钱方式Cash SurveysCash OffersEarn PointsPaidEmail® 邮件方式My Account &gt; Your Profile 选择查看邮件的钱数 好的 坐等邮件明天继续更新 兑换方式]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>云存储</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AnyChat]]></title>
    <url>%2F2018%2F10%2F18%2Fandroid%2Fresearch%2FAndroid%20play%2F</url>
    <content type="text"><![CDATA[Android play1. mediaplay＋ surfaceView 2. VideoView 3. Jni play 4. 第三方 vitamio 5. 视频解码VLC ffmpeg MediaPlayer SurfaceView1 SurfaceView 用于显示SurfaceView 1采用双缓冲机制 ——－显示区 与缓冲区 这决定了它是播放器的最好选择2 SurfaceView 的独特支持 可以由子线程直接控制 但是必须由mainThread 创建 view 基本都是在mainThread控制 包括创建 与控制SurfaceView 的绘制可以在子线程完成 Code TestSurfaceView.Java SurfaceHolder可以把它当成surface的控制器，用来操纵surface mSurfaceView = (SurfaceView)this.findViewById(R.id.surfaceView_id); mSurfaceView.setZOrderOnTop(true); mSurHolder = mSurfaceView.getHolder(); mSurHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); mSurHolder.addCallback(Callback); public interface Callback { /** 创建时被调用 */ public void surfaceCreated(SurfaceHolder holder); /**surface 改变的时候 */ public void surfaceChanged(SurfaceHolder holder, int format, int width, int height); /* 销毁 */ public void surfaceDestroyed(SurfaceHolder holder); } MediaPlayerAndroid的MediaPlayer包含了Audio和video的播放功能，在Android的界面上，Music和Video两个应用程序都是调用MediaPlayer实现的。MediaPlayer在底层是基于OpenCore(PacketVideo)的库实现的 private void playVideo() { try{ if(!isBusyPlay||count&gt;2){ Log.d(TAG, &quot;----------&gt;playVideo&quot;); count = 0; isBusyPlay = true; if(player != null){ player.reset(); }else{ player = new MediaPlayer(); ／／MediaPlayer mp = MediaPlayer.create(this, R.raw.test);//这时就不用调用setDataSource了 } ／／8 Listener player.setOnPreparedListener(this); player.setOnCompletionListener(this); player.setOnBufferingUpdateListener(this); player.setOnErrorListener(this); player.setDataSource(path); player.setDisplay(mSurHolder); player.setAudioStreamType(AudioManager.STREAM_MUSIC); player.setScreenOnWhilePlaying(true); player.prepareAsync(); }else{ count++; Log.d(TAG, &quot;----------&gt;busy playing&quot;); } //设置监听事件 }catch(Exception e){ Log.d(TAG, &quot;mediaplayer error: &quot;+e.getMessage()); } } OnInfoListener ——视频加载中的控制 需要地处协调701 702 player.setOnInfoListener(new OnInfoListener() { @Override public booleanonInfo(MediaPlayer mp, int what, int extra) { // TODO Auto-generated method stub return false; } }); VideoViewVideoView extends SurfaceView implements MediaPlayerControl 其实就是google 将surfaceView mediaplay 封装一层给开发者方便调用 使用android的VideoView任然存在有些不足，比如说系统带的控制条太难看，全屏播放时无法全屏。 MediaController mController = new MediaController(this); mVideoView.setMediaController(mController); // Play Video public void onStart() { mVideoView.setVideoURI(mUri); mVideoView.start(); super.onStart(); } Jni play在java成直接调用，C的播放底层直接控制播放器 与显示 底层控制其实更方便java成的Mediaplay 都是调用底层方法 private native final intnative_setMetadataFilter(Parcel request); private static native final void native_init(); private native final void native_setup(Object mediaplayer_this); private native final void native_finalize(); SurfaceView的核心其实SurfaceFlinger应用层对SurfaceView 很熟悉framework 层SurfaceFlinger很熟悉 对于SurfaceFlinger其实我也不太明白是知道由这么一回事 开机启动时候init 创建MediaServer SurfaceFinger而其他的Systrm server 是zygote vitamio感觉没什么多说的https://www.vitamio.org/en/农民伯伯： http://www.cnblogs.com/over140/ 最新版 把播放器设置为新的进程使用的时候要注意 视频解码VLChttp://www.videolan.org/vlc/ Github codehttp://git.oschina.net/cuiran/vlc-android http://xhc66.iteye.com/blog/797291http://www.dotblogs.com.tw/jaelys/archive/2012/06/20/72934.aspx ffmpeghttp://www.ffmpeg.org/https://github.com/havlenapetr/FFMpeghttps://github.com/appunite/AndroidFFmpeg http://3xin2yi.info/wwwroot/tech/doku.php/tech:multimedia:ffmpeghttp://blog.csdn.net/conowen/article/details/7255776 http://blog.csdn.net/gobitan/article/details/22750719]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linphone]]></title>
    <url>%2F2018%2F10%2F18%2Fandroid%2Fresearch%2Flinphone%2F</url>
    <content type="text"><![CDATA[无意间发现 开源中国中有人回复 看见 以前的文章就想整理下 这是一份 2014年 研究视频通话 时候调研 的 文章 一直在有道笔记 linphone1 登陆 －－－ SetupActivity－saveCreatedAccount － native void setDefaultProxyConfig(long nativePtr,long proxyCfgNativePtr); 2 电话 －－－ ContactFragment－联系人LinphoneActivity.instance().setAddresGoToDialerAndCall(to, contact.getName(), contact.getPhotoUri());－－ CallManager.getInstance().inviteAddress(lAddress, false, isLowBandwidthConnection);－ native Object inviteAddressWithParams(long nativePtrLc,long to, long nativePtrParam); LinphoneActivity.instance().setAddresGoToDialerAndCall(to, contact.getName(), contact.getPhotoUri());5000250002null newOutgoingCall (String to, String displayName)50002null 3 电话监听 －－－LinphoneCore lc = LinphoneManager.getLcIfManagerNotDestroyedOrNull(); lc.addListener(mListener);LinphoneCoreListenerBase callState refreshCallList 声音 传输—??? 4 视频电话LinphoneManager.getInstance().addVideo();— native void enableCamera(long nativePtr, boolean enabled); native int updateCall(long ptrLc, long ptrCall, long ptrParams); 接受／取消 InCallActivity.instance().acceptCallUpdate(true);－－ nativevoid acceptCallUpdate(long nativePtr, long aCall, long params); AndroidVideoWindowImpl (SurfaceView renderingSurface, SurfaceView previewSurface, VideoWindowListener listener) VideoWindowListener—void onVideoRenderingSurfaceReady(AndroidVideoWindowImpl vw, SurfaceView surface); LinphoneManager.getLc().setVideoWindow(vw); mVideoView = surface;—void onVideoRenderingSurfaceDestroyed(AndroidVideoWindowImpl vw);—void onVideoPreviewSurfaceReady(AndroidVideoWindowImpl vw, SurfaceView surface); mCaptureView = surface; LinphoneManager.getLc().setPreviewWindow(mCaptureView);—void onVideoPreviewSurfaceDestroyed(AndroidVideoWindowImpl vw); native void setPreviewWindowId(long nativePtr, Object wid);LinphoneService switchCameraLinphoneManager.getLc().setVideoDevice(videoDeviceId);CallManager.getInstance().updateCall(); //LinphoneManager.getLc().setPreviewWindow(mCaptureView); AndroidVideoApi9JniWrapper - startRecording - onPreviewFrame － AndroidVideoApi5JniWrapper.putImage(nativePtr, data); nativevoid putImage(long nativePtr, byte[] buffer); Java_org_linphone_mediastream_video_capture_AndroidVideoApi5JniWrapper_putImageAndroidReaderContext camera.addCallbackBuffer(data); 聊天displayChatChatFragment sendTextMessage - native void sendChatMessage(long ptr, Object message, long messagePtr); C call java1 — globalStateClass = (jclass)env-&gt;NewGlobalRef(env-&gt;FindClass(“org/linphone/core/LinphoneCore$GlobalState”)); 账户1 创建 登陆 GenericLoginFragmentlogIn (String username, String password, String domain, boolean sendEcCalibrationResult)500015000150001@192.168.100.102false saveCreatedAccountString identity = “sip:” + username + “@” + domain;sip:50001@50001@192.168.100.102 AccountBuilder builder = new AccountBuilder(LinphoneManager.getLc()).setUsername(username)50001.setDomain(domain) 50001@192.168.100.102.setPassword(password);50001 saveNewAccountString identity = “sip:” + tempUsername + “@” + tempDomain; －sip:50001@50001@192.168.100.102 proxy += tempDomain; － sip:50001@192.168.100.102 addProxyConfig]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AnyChat]]></title>
    <url>%2F2018%2F10%2F18%2Fandroid%2Fresearch%2FAnycha%2F</url>
    <content type="text"><![CDATA[无意间发现 开源中国中有人回复 看见 以前的文章就想整理下 这是一份 2014年 研究视频通话 时候调研 的 文章 一直在有道笔记 与最新版本 AnyChat SDK 有差异 请谅解 不更新 AnyChat跨平台的音视频即时通讯解决方案，基于先进的H.264视频编码标准、AAC音频编码标准与P2P技术， 支持高清视频，整合了佰锐科技在音视频编码、多媒体通讯 Android2.3以上版本 音视频即时通讯：提供语音、视频一对一、一对多的实时通讯，支持高清视频和高品质音频效果。 音视频即时通讯：提供语音、视频一对一、一对多的实时通讯，支持高清视频和高品质音频效果。 录像：支持针对单个人的音视频录制、整个视频通话过程内容的合成音视频录制以及集中服务器保存录制 抓拍：可对本地视频和正在视频的对象进行抓拍； 文字聊天：支持多用户之间的文字交流； 透明通道：提供客户端之间、客户端跟服务器之间的数据通讯能力； 文件传输：支持客户端直接、客户端跟服务器之间的文件传输功能，支持断点续传； 动态设置音视频参数：提供音视频参数设置的接口，可以根据需要动态设置分辨率、码率、帧率等视频参数，满足各种应用场景的需求； 外部音视频输入：支持非标准采集设备以外的音视频源输入，满足更多的应用场景； 集成第三方外部音视频编解码器：可集成第三方音视频编解码器，满足特殊环境下面的硬件编解码要求 AnyChatBaseEvent public void OnAnyChatConnectMessage(boolean bSuccess);连接服务器消息, bSuccess表示是否连接成功 public void OnAnyChatLoginMessage(int dwUserId, int dwErrorCode);用户登录消息，dwUserId表示自己的用户ID号，dwErrorCode表示登录结果：0 成功，否则为出错代码 public void OnAnyChatEnterRoomMessage(int dwRoomId, int dwErrorCode);用户进入房间消息，dwRoomId表示所进入房间的ID号，dwErrorCode表示是否进入房间：0成功进入，否则为出错代码 public void OnAnyChatOnlineUserMessage(int dwUserNum, int dwRoomId);房间在线用户消息，进入房间后触发一次，dwUserNum表示在线用户数（包含自己），dwRoomId表示房间ID public void OnAnyChatUserAtRoomMessage(int dwUserId, boolean bEnter);用户进入/退出房间消息，dwUserId表示用户ID号，bEnter表示该用户是进入（TRUE）或离开（FALSE）房间 public void OnAnyChatLinkCloseMessage(int dwErrorCode);网络断开消息，该消息只有在客户端连接服务器成功之后，网络异常中断之时触发，dwErrorCode表示连接断开的原因 功能1 视频通话anychatcallcenter —— 上线下线通知 视频通话提醒 视频终端处理 2 认证 - 上传照片 视频AnyChatSelfRecord— 3 AnyChatFeatures 1 音视频互动 —简单功能实现 ok 详细问题解决 参考anychatcallcenter 2 文字聊天—功能ok 问题 1.消息过滤— OnAnyChatTextMessage获取的是所有的消息 同时接收到多人信息 2.消息记录// 文字聊天通知接口public interface AnyChatTextMsgEvent { // 文字消息通知,dwFromUserid表示消息发送者的用户ID号，dwToUserid表示目标用户ID号，可能为-1，表示对大家说，bSecret表示是否为悄悄话 public void OnAnyChatTextMessage(int dwFromUserid, int dwToUserid, boolean bSecret, String message);} 3 透明通道 －－－文字聊天 // 数据传输通知接口public interface AnyChatTransDataEvent { // 文件传输回调函数定义 public void OnAnyChatTransFile(int dwUserid, String FileName, String TempFilePath, int dwFileLength, int wParam, int lParam, int dwTaskId); // 透明通道数据回调函数定义 public void OnAnyChatTransBuffer(int dwUserid, byte[] lpBuf, int dwLen); // 扩展透明通道数据回调函数定义 public void OnAnyChatTransBufferEx(int dwUserid, byte[] lpBuf, int dwLen, int wparam, int lparam, int taskid); // SDK Filter 通信数据回调函数定义 public void OnAnyChatSDKFilterData(byte[] lpBuf, int dwLen);} 4 文件传输 －－－anyChatSDK.TransFile(mUserID, strFilePath, 0, 0, 0, mAnyChatOutParam); // 文件传输接受@Overridepublic void OnAnyChatTransFile(int dwUserid, String FileName,String TempFilePath, int dwFileLength, int wParam, int lParam, int dwTaskId) ｛｝ http://www.anychat.cn/faq/index.php?action=artikel&amp;cat=2&amp;id=175&amp;artlang=zh 关于视频帧率与关键帧间隔的参数设置可参考如下原则： 1、帧率越高，视频越流畅（最大值为25fps），同时帧率也会对码率和CPU资源占用产生一定的影响，通常的建议是互联网应用（8-12fps），局域网应用（18-25fps）； 2、关键帧间隔是指在编码的过程中，两个关键帧之间非关键帧的数量，值越大，码率越小，但会降低视频的质量，值越小，码率越大，视频质量较好，但不宜过小，通常的建议是互联网应用（帧率的3、4倍），局域网应用（等于帧率），不要小于帧率； 关于本地视频编码的预设参数：BRAC_SO_LOCALVIDEO_PRESETCTRL，其取值范围为1-5，主要用来控制CPU资源占用率和画面细节，值越小，编码时的CPU占用率越低，但会损失对画面细节的处理；值越大，编码时的CPU占用率越高，但对画面细节的处理会更细腻，该参数主要针对高码率有效，低码率时由于码率的限制，视频画面细节无法表现出来，所以低码率模式下，可以将该参数调节低一些，以降低CPU的利用率。 关于本地视频编码的码率参数：BRAC_SO_LOCALVIDEO_BITRATECTRL，单位为bps，码率越小，视频质量越差；码率越高，视频质量越好，同时该参数还与视频画面的分辩率有关，不同的分辨率有不同的取值范围，如在互联网应用状态下，分辩率是176x144典型的取值范围是（10kbps ~ 60kbps），分辨率是320x240典型的取值范围是50kbps ~ 120kbps，如果是局域网应用，则码率可适当提高。 关于本地视频编码的质量因子参数：BRAC_SO_LOCALVIDEO_QUALITYCTRL，取值范围为1-6，值越小，画面质量越低，输出码率也越低，值越大，画面质量越高，输出码率也越高。 关于“平均码率模式”和“质量因子模式”两种视频质量控制模式的区别和应用，可参考如下原则： 1、“平均码率模式”：视频编码时以输出码率为优先考虑条件，当画面静止时，输出的码率较低，动态画面码率会较高，瞬时码率可能会超过设置的参数（最高不会超过10%），但是其输出的视频数据平均码率将会维持在设置的参数附近，当画面运动量过大时，编码器为了维持平均码率，将会损失画面的质量，通常互联网应用可采用该模式； 2、“质量因子模式”：当码率参数设置为0时，该模式生效，视频编码时以视频质量为优先考虑条件，静止的画面和动态画面将会用不同的量化因子进行编码，维持在一个固定的画面质量下，当画面静止时，码率较低，当画面运动时，码率较高，通常局域网应用可采用该模式。由于该模式下没有限制码率，所以大运动量画面时，为了保持固定的画面质量，码率的变化将会比较大，所以该模式不适合于互联网应用。 3、如果希望在互联网的环境下获得较高质量的视频效果（在网络带宽许可的情况下），建议采用“平均码率模式”，只是可以适当提高视频质量参数（VideoQuality）的值，视频码率参数根据需要进行设置。低码率，配置较低的视频质量，高码率就需要配置较高的视频质量。 注：“AnyChat Platform Core SDK” V4.0版本开始支持每个用户单独设置视频采集分辩率，当上层应用程序没有设置视频采集分辨率以及视频质量控制相关参数时，客户端将采用服务器默认配置参数。 http://www.anychat.cn/faq/index.php?action=artikel&amp;cat=2&amp;id=243&amp;artlang=zh 目前常见的网络主要有四种类型：ADSL拨号接入方式、光纤接入方式、3G拨号接入方式、局域网。 ADSL拨号接入方式是一种非对称的网络接入，下行流量通常有2Mbps、4Mbps、6Mbps等，而上行流量通常都是512kbps，即上行速率和下行速率是不对称的。此时如果需要使用AnyChat进行音视频的交互，则上传流量只能用512kbps作为参考值，适合的分辨率有：QVGA（320x240）、CIF（352x288）、VGA（640x480）。 光纤接入方式是一种对称的网络接入，通常上行速率和下行速率相同。光纤接入的网络通常非常稳定，适合传输较高质量的视频，当网络带宽允许的情况下，适合的分辩率有：QVGA（320x240）、CIF（352x288）、VGA（640x480）、SVGA（800x600）、720P（1280x720）。 3G拨号接入方式也是一种非对称的网络接入，不同的网络运营商所提供的网络带宽各不相同，而且和ADSL一样上行网络带宽远远低于下行网络带宽，如联通的3G宣传的7.2Mbps网络带宽便是指下行带宽，而且3G的网络带宽质量与位置相关，如离信号基站越近，质量就越好，同一个基站下使用3G的用户越少，质量也就越好。在这种接入方式下，适合上传的分辨率有：QVGA（320x240）、CIF（352x288）。 局域网，或是专网网络带宽都非常充裕，选择多大的分辨率主要根据PC的性能来决定，通常局域网可以选择CIF（352x288）、VGA（640x480）、SVGA（800x600）、720P（1280x720）等分辨率。 AnyChat质量模式分辨率、码率对应表（单位：kbps） Static—静态画面， motion—运动图像峰值， agv—平均码率 AnyChat的视频质量分为“码率控制模式”和“质量控制模式”，在“码率控制模式”下，视频流的目标码率会在设定码率的上下浮动，而在“质量控制模式”下，目标码率会根据视频图像的运动场景自动进行调节，静态画面时输出较低的码率，而运动画面时，会输出较高的码率，以保障视频的细节得到展现。通常来说，光纤接入方式、局域网等网络带宽比较充裕的场合可使用“质量控制模式”，而ADSL拨号接入和3G拨号接入则采用“码率控制模式”比较合适。 关于视频的帧率，帧率越高，视频越流畅，同时给网络的压力也会增大，输出的码率也会增加，通常来说，光纤接入方式、局域网等网络带宽比较充裕的场合可使用高帧率，如20fps、25fps，而ADSL拨号接入和3G拨号接入则采用低帧率比较合适，如8fps、12fps等 总结手机用户 网络情况 有wifi 3G 4G 2G 分辨率 建议 QVGA（320x240）、CIF（352x288）帧率 建议8-12fps 码率分辩率是176x144典型的取值范围是10kbps ~ 60kbps，－－－no分辨率是320x240典型的取值范围是50kbps ~ 120kbps，－－no 默认分辨率 320-240 码率在100-500都比较合适－－－wifi 模式下 实际测试的 视频质量参数public static final int VIDEO_QUALITY_GOOD = 3; // 中等视频质量// 设置本地视频编码的质量AnyChatCoreSDK.SetSDKOptionInt(AnyChatDefine.BRAC_SO_LOCALVIDEO_QUALITYCTRL, configEntity.videoQuality);关于本地视频编码的质量因子参数：BRAC_SO_LOCALVIDEO_QUALITYCTRL，取值范围为1-6，值越小，画面质量越低，输出码率也越低，值越大，画面质量越高，输出码率也越高。 预设参数：默认3 （3-4）BRAC_SO_LOCALVIDEO_PRESETCTRL，其取值范围为1-5，主要用来控制CPU资源占用率和画面细节，值越小，编码时的CPU占用率越低，但会损失对画面细节的处理；值越大，编码时的CPU占用率越高，但对画面细节的处理会更细腻，该参数主要针对高码率有效，低码率时由于码率的限制，视频画面细节无法表现出来，所以低码率模式下，可以将该参数调节低一些，以降低CPU的利用率。]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>research</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 监听 支付宝微信 消息]]></title>
    <url>%2F2018%2F10%2F18%2Fandroid%2Fdemo%2Fandroid%20%E7%9B%91%E5%90%AC%E6%94%AF%E4%BB%98%E5%AE%9D%E5%BE%AE%E4%BF%A1%E8%BD%AC%E8%B4%A6%E6%B6%88%E6%81%AF%2F</url>
    <content type="text"><![CDATA[原理使用 NotificationListenerService 监听 Notification 消息 从消息中获取 信息 确定是 支付消息 开源code 问题支付消息 是否可以接收 支付消息 微信 支付宝 app在前台 YES YES app 被杀掉 YES NO 无网络 NO NO 无网络 到 恢复网络(app杀掉) YES NO 无网络 - 恢复网络 (app杀掉) 到 启动 APP YES NO 支付宝接口1 订单查询查询当前登陆用户的所有 SNAP 设备列表，以及设备的状态。 注意：本接口应该包含主账户不是‘我’，但是在我名下的设备。 Url - GET https://mbillexprod.alipay.com/enterprise/simpleTradeOrderQuery.json?beginTime=1548056474282&amp;limitTime=1548920474282&amp;pageSize=20&amp;pageNum=1&amp;channelType=ALL 参数 类型 含有 beginTime long 开始时间时间戳 limitTime long 截止时间 pageSize int 每页数量 pageNum int 页数 channelType String 查询渠道类型 HTTP request body: 空 HTTP request head: 123Cookie:ALIPAYJSESSIONID=RZ17ERqaBVHZRIwCoO8C7siz1tkRE559mobilegwRZ17; zone=RZ17BReferer: https://render.alipay.com/p/z/merchant-mgnt/simple-order.html?beginTime=2019-01-31&amp;endTime=2019-01-31&amp;fromBill=true&amp;channelType=ALL HTTP resonse body: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327&#123; &quot;orderTradeForm&quot;: &#123; &quot;beginTime&quot;: &quot;1548056474282&quot;, &quot;billUserId&quot;: &quot;2088902662874592&quot;, &quot;channelType&quot;: &quot;ALL&quot;, &quot;limitId&quot;: &quot;&quot;, &quot;limitTime&quot;: &quot;1548920474282&quot;, &quot;merchantType&quot;: &quot;&quot;, &quot;pageNum&quot;: &quot;1&quot;, &quot;pageSize&quot;: &quot;20&quot;, &quot;querySize&quot;: &quot;&quot;, &quot;reqUserId&quot;: &quot;&quot;, &quot;searchableCardListJson&quot;: &quot;&quot;, &quot;securityBizType&quot;: &quot;&quot;, &quot;securityId&quot;: &quot;&quot;, &quot;shopId&quot;: &quot;&quot;, &quot;source&quot;: &quot;&quot; &#125;, &quot;queryForm&quot;: &#123; &quot;beginTime&quot;: &quot;1548056474282&quot;, &quot;billUserId&quot;: &quot;2088902662874592&quot;, &quot;channelType&quot;: &quot;ALL&quot;, &quot;limitId&quot;: &quot;&quot;, &quot;limitTime&quot;: &quot;1548920474282&quot;, &quot;merchantType&quot;: &quot;&quot;, &quot;pageNum&quot;: &quot;1&quot;, &quot;pageSize&quot;: &quot;20&quot;, &quot;querySize&quot;: &quot;&quot;, &quot;reqUserId&quot;: &quot;&quot;, &quot;searchableCardListJson&quot;: &quot;&quot;, &quot;securityBizType&quot;: &quot;&quot;, &quot;securityId&quot;: &quot;&quot;, &quot;shopId&quot;: &quot;&quot;, &quot;source&quot;: &quot;&quot; &#125;, &quot;status&quot;: &quot;succeed&quot;, &quot;success&quot;: &quot;true&quot;, &quot;result&quot;: &#123; &quot;limitTime&quot;: &quot;&quot;, &quot;limitTimeDate&quot;: &quot;&quot;, &quot;limitId&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.00&quot;, &quot;list&quot;: [ &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548920462000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019013122001469001023966388&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548919957000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019013122001469001023895767&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548919590000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019013122001469001023856618&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.10&quot;, &quot;gmtCreateStamp&quot;: 1548689565000, &quot;totalAmount&quot;: &quot;0.10&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023463886&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.10&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.10&quot;, &quot;gmtCreateStamp&quot;: 1548689383000, &quot;totalAmount&quot;: &quot;0.10&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023459762&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.10&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.10&quot;, &quot;gmtCreateStamp&quot;: 1548688282000, &quot;totalAmount&quot;: &quot;0.10&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023392120&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.10&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548688044000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023463883&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548683911000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023394410&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548683195000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023463031&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548682917000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023458947&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548682218000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023378860&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548681159000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023464391&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548680738000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023467122&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548680360000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023439607&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548679913000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023428278&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548679439000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023281087&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.10&quot;, &quot;gmtCreateStamp&quot;: 1548679312000, &quot;totalAmount&quot;: &quot;0.10&quot;, &quot;tradeNo&quot;: &quot;2019012822001469001023484886&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.10&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;&quot;, &quot;consumerName&quot;: &quot;*文志&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548678676000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001430421014249021&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;http://tfs.alipayobjects.com/images/partner/T162plXaddXXXXXXXX&quot;, &quot;consumerName&quot;: &quot;*立勋&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;0.01&quot;, &quot;gmtCreateStamp&quot;: 1548665666000, &quot;totalAmount&quot;: &quot;0.01&quot;, &quot;tradeNo&quot;: &quot;2019012822001420121015883418&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;0.01&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;http://tfs.alipayobjects.com/images/partner/TB1.IN6XdC2aKRkUvMHXXaPkFXa&quot;, &quot;consumerName&quot;: &quot;*立勋&quot; &#125;, &#123; &quot;totalPayedAmount&quot;: &quot;10.10&quot;, &quot;gmtCreateStamp&quot;: 1548568246000, &quot;totalAmount&quot;: &quot;10.10&quot;, &quot;tradeNo&quot;: &quot;2019012722001440641013951421&quot;, &quot;tradeStatusView&quot;: &quot;&quot;, &quot;tradeStatus&quot;: &quot;&quot;, &quot;tradeTransAmount&quot;: &quot;10.10&quot;, &quot;tradeRefundAmount&quot;: &quot;0.00&quot;, &quot;id&quot;: &quot;&quot;, &quot;gmtCreate&quot;: &quot;&quot;, &quot;url&quot;: &quot;http://tfs.alipayobjects.com/images/partner/T13YNkXkBdXXXXXXXX&quot;, &quot;consumerName&quot;: &quot;*立勋&quot; &#125; ] &#125;, &quot;isEntOperator&quot;: false&#125; 12345678910112019-02-24 12:23:13.323 13706-13706/com.tools.payhelper I/NotificationMonitorService: Notification posted [com.eg.android.AlipayGphone]:支付宝通知 &amp; 成功收款0.01元。享免费提现等更多专属服务，点击查看2019-02-24 12:23:13.337 13706-13706/com.tools.payhelper E/postMethod: ALIPAY 0.01 支付宝用户 false2019-02-24 12:23:13.338 13706-13706/com.tools.payhelper I/xiaolong: open-----com.eg.android.AlipayGphone2019-02-24 12:23:13.338 13706-13706/com.tools.payhelper I/xiaolong: open------成功收款0.01元。享免费提现等更多专属服务，点击查看2019-02-24 12:23:13.339 13706-13706/com.tools.payhelper I/xiaolong: open-----支付宝通知2019-02-24 12:23:13.339 13706-13706/com.tools.payhelper I/xiaolong: open-----成功收款0.01元。享免费提现等更多专属服务，点击查看2019-02-24 12:23:13.339 13706-13706/com.tools.payhelper I/NotificationMonitorService: Notification posted [com.eg.android.AlipayGphone]:null &amp; null2019-02-24 12:23:13.364 13706-13706/com.tools.payhelper E/SPUtils: put Log1 日志输出: 2019-02-24 12:23:13: 结果: playType 5 ALIPAY 0.01 支付宝用户 false 通知消息监听 支付消息 微信 支付宝 e卡支付 包名 com.tencent.mm com.eg.android.AlipayGphone com.buybal.buybalpay.nxy.fkepay title YES 支付宝通知 收款通知 text YES 成功收款0.01元。享免费提现等更多专属服务，点击查看 一笔收款交易已完成，金额0.10元]]></content>
      <categories>
        <category>android</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[android shadowsocksr-android]]></title>
    <url>%2F2018%2F10%2F11%2Fandroid%2FOpen%20source%20project%2Fshadowsocksr-android%2F</url>
    <content type="text"><![CDATA[参考 shadowsocksr-androidJDK 1.8SBT 0.13.0+Android SDK Build Tools 25+ Android Support Repository and Google Repository (see build.sbt for version)Android NDK r12b+GO [error] sbt.librarymanagement.ResolveException: unresolved dependency: org.scala-android#sbt-android;1.6.10: not found[error] unresolved dependency: com.timushev.sbt#sbt-updates;0.1.10: not found[error] unresolved dependency: net.virtual-void#sbt-dependency-graph;0.8.2: not found[error] at sbt.internal.librarymanagement.IvyActions$.resolveAndRetrieve(IvyActions.scala:332)]]></content>
      <categories>
        <category>Open source project</category>
      </categories>
      <tags>
        <tag>shadowsocksr-android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 7.Me]]></title>
    <url>%2F2018%2F09%2F28%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%207.Me%2F</url>
    <content type="text"><![CDATA[Flutter app 7.Me1.修改UI创建启动页pages/MyTabPage.dart 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168class MyTabPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() &#123; return new MyTabPageState(); &#125;&#125;class MyTabPageState extends State&lt;MyTabPage&gt; &#123; static const double IMAGE_ICON_WIDTH = 30.0; static const double ARROW_ICON_WIDTH = 16.0; var titleTextStyle = new TextStyle(fontSize: 16.0); // 箭头 var rightArrowIcon = new Image.asset( &apos;images/ic_arrow_right.png&apos;, width: ARROW_ICON_WIDTH, height: ARROW_ICON_WIDTH, ); @override void initState() &#123; super.initState(); &#125; @override Widget build(BuildContext context) &#123; return new ListView( children: &lt;Widget&gt;[ _buildAvatar(), new Divider( height: 1.0, ), _buildMessages(), new Divider( height: 1.0, ), _buildCoupons(), new Divider( height: 1.0, ), ], ); &#125; _buildAvatar() &#123; User user = new UserHelper().getUser(); var avatarContainer = new Container( color: const Color(0xFFF39B63), height: 200.0, child: new Center( child: new Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ new Image.asset(&quot;images/ic_avatar_default.png&quot;, width: 60.0 ), new Padding( padding: new EdgeInsets.only(top:5.0, bottom: 5.0), child: new Text( user.account, style: new TextStyle( fontSize: 18.0, color: const Color(0xffFFFFFF), ), ), ), new Padding( padding: new EdgeInsets.only(top:5.0, bottom: 5.0), child: new Text( &quot; Manage Account &quot;, style: new TextStyle( fontSize: 23.0, color: const Color(0xffFFFFFF), ), ), ), ], ), ) ); return new GestureDetector( onTap: () &#123;// DataUtils.isLogin().then((isLogin) &#123;// if (isLogin) &#123;// // 已登录，显示用户详细信息// _showUserInfoDetail();// &#125; else &#123;// // 未登录，跳转到登录页面// _login();// &#125;// &#125;); &#125;, child: avatarContainer, ); &#125; _buildMessages() &#123; var listItemContent = new Padding( padding: const EdgeInsets.fromLTRB(10.0, 15.0, 10.0, 15.0), child: new Row( children: &lt;Widget&gt;[ new Padding( padding: const EdgeInsets.fromLTRB(0.0, 0.0, 10.0, 0.0), child: new Image.asset(&quot;images/ic_my_message.png&quot;, width: IMAGE_ICON_WIDTH, height: IMAGE_ICON_WIDTH), ), new Expanded( child: new Text( &quot;Message&quot;, style: titleTextStyle, )), rightArrowIcon ], ), ); return new InkWell( child: listItemContent, onTap: () &#123;// _handleListItemClick(title);// Navigator// .of(context)// .push(new MaterialPageRoute(builder: (context) =&gt; new CommonWebPage(title: &quot;Test&quot;, url: &quot;https://my.oschina.net/u/815261/blog&quot;))); &#125;, ); &#125; _buildCoupons() &#123; var listItemContent = new Padding( padding: const EdgeInsets.fromLTRB(10.0, 15.0, 10.0, 15.0), child: new Row( children: &lt;Widget&gt;[ new Divider( height: 2.0, ), new Padding( padding: const EdgeInsets.fromLTRB(0.0, 0.0, 10.0, 0.0), child: new Image.asset(&quot;images/ic_my_message.png&quot;, width: IMAGE_ICON_WIDTH, height: IMAGE_ICON_WIDTH), ), new Expanded( child: new Text( &quot;Coupons&quot;, style: titleTextStyle, )), rightArrowIcon ], ), ); return new InkWell( child: listItemContent, onTap: () &#123;// _handleListItemClick(title);// Navigator// .of(context)// .push(new MaterialPageRoute(builder: (context) =&gt; new CommonWebPage(title: &quot;Test&quot;, url: &quot;https://my.oschina.net/u/815261/blog&quot;))); &#125;, ); &#125;&#125; UI 布局 没什么好解释的 第一看见这样的UI 布局 就想骂人 万马崩腾与心中瞬间想放弃 写多了 就习惯了 虽然 还是很生疏 感觉用的不爽 底部添加版本信息在 https://pub.dartlang.org/ 中找到 get_versionhttps://pub.dartlang.org/packages/get_version#-installing-tab- 不知道 好不好用 get_version 1234Package get_version has no versions that match &gt;=0.0.6 &lt;0.1.0 derived from:- flutter_snap depends on version ^0.0.6pub upgrade failed (1)main.dart 这个找不到]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[简介]]></title>
    <url>%2F2018%2F09%2F28%2F%E5%B7%A5%E5%85%B7%2Fkylinhuang%2F</url>
    <content type="text"><![CDATA[简介kylinhuang 黄文志android 工程师(2012-)Mobil:153 1379 2723QQ:1029755440微信:kylinhuang1029facebook:Kylin HuangGithub：https://github.com/kylinhuangE-Mail:kylinhuang1029755440@gmail.com 工作经验 深圳市麒麟花园网络有限公司 时间 工作 职位 2011/2-2011/5 只是协助完成相关的文档编写和完成用户的登陆，注册，验证码，模板的编写等。 java实习 2011/8—2012/4 在项目前期与客户进行需求分析，确定系统功能，参与系统设计以及功能模块的详细设计开发阶段 责功能模块的实现。项目后期主要负责用户使用文档的编写。 java工程师 2012/4—2012/12 绘制，UI产品维护，新增功能实现，改bug兼测试。 android工程师 北京家视天下科技有限公司2013/3—2014/2android研发工程师大麦电视 机顶盒的研发，分析需求搭建框架，维护爱奇艺GITV浙江广东项目。 北京创维海通数字技术有限公司2014/2—2015/4android研发工程师 1.android 机顶盒的研发，分析需求搭建框架，2.与C的对接播放器 CA卡认证,3.多平台统计SDK and 云自定义Launcher4.烟草项目 北京数字家园科技有限公司2015/4—2016/6android研发工程师android 社交软件WithU的开发1.主要负责虾米音乐SDK集成播放2.第三方分享模块maven库管理3.群相册模块， Voip视频通话 rtmp 视频直播 等功能 北京生迪科技有限公司2016/6—：android研发工程师1.维护智能灯snap android 客户端 包含组网 直播 回看 对讲等2.参与 Home 项目中 cordova 开发 与 cordova 插件开发(直播 回看 小视频插件)3.Snap Settings 网页开发 项目经验 Snap（带摄像头智能灯）2016/5—项目描述：智能家居 安防类 单独负责 snap 项目android 端维护 重构网络请求 播放器模块 替换以及优化 Snap Settings 网页开发 以及集成 WithU(原 亲见 )2015/4—2016/6项目描述：社交类应用，聊天，feed动态，图片标签，Voip视频通话，音乐，视频直播主要负责1 虾米音乐SDK集成播放 - 音乐播放模块2 第三方分享模块maven库管理 - 分享模块3 群相册模块4 voip 视频/语音电话5 群直播模块 负责 直播功能 永新高安CA认证2014/12—2015/1开发工具：x86 ADT 歌华主板项目描述：实现搜台，硬件信息获取，邮件，指纹，OSD等功能个人职责：android这边一个人负责，主要是与C组工程师配合玩，完成与C的对接，实现功能。 信息采集2014/11–2014/12开发工具：x86 ADT 歌华主板项目描述：采集功能包，实现用户的行为与设备信息的采集与提交，功能包的实现，在STB/OTT/android phone/android pad 不同的设备不同的项目上都可以使用个人职责：此项目本人负责，共3人开放，包括需求分析，框架结构。模块划分，任务分配。 歌华项目(android STB机顶盒)2014 /9–2014 /11开发工具：x86 ADT 歌华主板项目描述：歌华与百事通合作推出的盒子，百事通提供Launcher，我方提供设置，回看，直播。个人职责：负责歌华设置，以及提供百事通相应的jar包，实现播放。 重庆一体机4K 智能电视 项目2014 /7–2014 /9开发工具：x86 ADT 酷开一体机项目描述：带直播，回看的应用，添加收藏，历史记录，预定等功能个人职责：负责Home 模块，用户的收藏，预定，历史观看，小视屏窗口的直播；数据的整体重构；http 请求 的封装；contentprovider 数据库的封装。 赣州OTT项目 (android OTT机顶盒)2014 /5–2014 /7开发工具：x86 ADT Skyworth A300项目描述：江西赣州酒店 机顶盒 整个项目包括 Launcher ，stbPlay,个人职责：本人负责Launcher的开放，包括小屏幕的直播观看，应用后门控制。 STBSearchLauncher (android STB机顶盒 nagra CA认证)2014 /2–2014 /4开发工具：x86 ADT Skyworth 开发板项目描述：StbLauncher研发STB机顶盒 3C认证的Launcher Android这边我一人负责；配合C工程师们完成功能，通过电视线 进行单频点搜索，全频点搜索，以及视频播放；CA卡用户认证，邮件等功能；主要采用JNI调用，Socket 获取数据，以及CA卡信息，及用户邮件。个人职责：Android这边我一人负责,与C开发组协同完成整个项目；采用jni调用实现播放，搜台，以及待机的逻辑 ；采用socket 解析数据，获取搜台结果，CA卡信息，用户邮件； Gitv浙江项目，Gitv广东项目(android机顶盒)2013 /11–2014/2开发工具： ADT 浙江浪潮盒子，浙江Bell鸟巢盒子项目描述：Gitv 银河开发，我们公司负责维护，Gitv 和hiveviewTV 很相似，支持直播（银河有直播牌照），点播（电视剧，电影，综艺）个人职责：DomyBoxLauncher结束后， 负责维护银河Gitv浙江项目， 江苏项目的技术难点的突破,保证浙江项目上线， 广东项目新功能的开发 ，以及广东项目质量的把关 DomyBoxLauncher（android机顶盒）2013 /8–2013 /10开发工具：x86 ADT 大麦盒子（鹏博士）项目描述：2013.10.30 鹏博士Domybox 新闻发布会,DomyBoxLauncher绑定盒子开发与广东厂商定制ROM，免费赠送给鹏博士的百兆用户DomyBoxLauncher —-支持天气，应用市场，嵌入银河gitv，蜂巢tv简介版（改蓝光极清），技术点（应用市场中应用的升级，系统组件升级，DomyBoxLauncher的升级）个人职责：本项目基本上，两个人开发，主要我负责这个项目 1.框架的搭建，首页的双层动画的嵌套—UI中难点 2.应用模块—包括应用的升级，系统组件的升级，DomyBoxLauncher的升级 3.与硬件厂商，交涉ROM问题（前期我负责—10.1项目经理负责 蜂巢TV1.0-1.5（android机顶盒）2013 /3–2013 /8开发工具：x86 ADT 三菱凯天机顶盒项目描述：开发我们自己的产品—hiveviewTV。 支持在线直播，点播，新闻整个项目三大技术难点1，viewpager列表页加载卡顿显现2，直播换台anr3，遥控器（手机控制盒子）个人职责：搜索模块，所有的列表模块，用户模块（除直播提醒EPG），详情页，升级，等 列表页异步加载图片滑动时出现卡顿情况 后期维护倒影的增加，获得焦点的放大等等新功能的实现 深圳书城（android客户端）开发工具：x86 Eclipse Moto XT316项目描述：完成深圳书城的图书查询，及南山书城，中心书城，罗湖书城的图书相关的库存信息，编号，位置等；图片的双缓冲，本地保存图片，使用软引用实现收藏功能，收藏的图书，返回服务器，在其他地方登陆获取相关的数据，个人职责：本人主要负责排行榜板块，图书详情、查询模块等模块的开发。 UncaughtExceptionHandler捕获异常的异常，上传服务器 旋转动画的制作 友谊书城软件环境：Struts+Spring+Hibernate+Lucene+WebSerivce开发工具：Eclipse项目描述：包含用户模块，购书模块，购买支付模块，搜索模块，图书收藏模块等。用户模块：主要负责用户的注册登录以及在支付时使用filter进行拦截判断用户是否登录，套用模板；搜索模块：完成数据的查询，图书的搜索，图书的详细信息等等。图书收藏模块：实现图书的收藏功能；购买支付模块：实现购物车，实现网上支付的接口。个人职责：实习期间，只是协助完成相关的文档编写和完成用户的登陆，注册。后期负责模板的编写，过滤器拦截。 个人项目：softwareManager （个人项目 应用汇已上线）个人项目：kylinPlayer （个人项目 应用汇已上线） 教育背景 2008.9—2011.7 九江职业技术学院 机械工程学院 模具设计与制造专业 大专在校三年连续三年获得奖学金]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>简历</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 6.下拉刷新]]></title>
    <url>%2F2018%2F09%2F27%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%206.%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%2F</url>
    <content type="text"><![CDATA[Flutter app 6.下拉刷新 1.添加 下拉刷新创建启动页pages/SnapTabPage.dart 123456789101112131415161718192021222324@override Widget build(BuildContext context) &#123; print(&quot; build &quot;); if (listData == null ) &#123; return new Center( child: new CircularProgressIndicator(), ); &#125; else &#123; print(&quot; listData &quot; + listData.toString()); var refreshIndicator = new RefreshIndicator( key: _refreshIndicatorKey, onRefresh: _pullToRefresh, // onRefresh 参数是一个 Future&lt;Null&gt; 的回调 child: new ListView.builder( // 这句是在list里面的内容不足一屏时，list可能会滑不动，加上就一直都可以滑动 physics: const AlwaysScrollableScrollPhysics(), itemCount: this.listData.length, itemBuilder: (_, int index) =&gt; _createItem(listData[index]), ), ); return refreshIndicator; &#125; &#125; 完整代码main.dart123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142class SnapTabPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() &#123; return new SnapTabPageState(); &#125;&#125;class SnapTabPageState extends State&lt;SnapTabPage&gt; &#123; // 这个key用来在不是手动下拉，而是点击某个button或其它操作时，代码直接触发下拉刷新 final GlobalKey&lt;RefreshIndicatorState&gt; _refreshIndicatorKey = new GlobalKey&lt;RefreshIndicatorState&gt;(); var listData; ScrollController _controller = new ScrollController(); @override void initState() &#123; super.initState(); print(&quot; initState &quot;); getList(false); &#125; SnapTabPageState() &#123; print(&quot; SnapTabPageState &quot;); &#125; @override Widget build(BuildContext context) &#123; print(&quot; build &quot;); if (listData == null ) &#123; return new Center( child: new CircularProgressIndicator(), ); &#125; else &#123; print(&quot; listData &quot; + listData.toString()); var refreshIndicator = new RefreshIndicator( key: _refreshIndicatorKey, onRefresh: _pullToRefresh, // onRefresh 参数是一个 Future&lt;Null&gt; 的回调 child: new ListView.builder( // 这句是在list里面的内容不足一屏时，list可能会滑不动，加上就一直都可以滑动 physics: const AlwaysScrollableScrollPhysics(), itemCount: this.listData.length, itemBuilder: (_, int index) =&gt; _createItem(listData[index]), ), ); return refreshIndicator; &#125; &#125; getList(bool isLoadMore) async &#123; var session = await new DataHelper().getSession(); String url = Api.queryAll + Api.session + session.toString(); print(&quot;queryAll : $url&quot;); NetUtils.get(url).then((data) &#123; if (data != null) &#123; Map&lt;String, dynamic&gt; map = json.decode(data); print(&quot;map : $map&quot;); if (map[&apos;messageCode&apos;] == 200 || &apos;ok&apos; == map[&apos;message&apos;]) &#123; var data = map[&apos;data&apos;]; setState(() &#123; if (null != data )&#123; List list1 = new List(); list1.addAll(data); listData = list1 ; &#125; &#125;); &#125; &#125; &#125;); &#125; Future&lt;Null&gt; _pullToRefresh() async &#123; getList(false); return null; &#125; Widget renderRow(i) &#123; var layout = new Column( children: &lt;Widget&gt;[ new Text(&apos;Deliver features faster&apos;), new Text(&apos;Craft beautiful UIs&apos;), new Expanded( child: new FittedBox( fit: BoxFit.contain, // otherwise the logo will be tiny child: const FlutterLogo(), ), ), ], ); return new InkWell( child: layout, onTap: () &#123; Navigator.of(context).push(new MaterialPageRoute( builder: (ctx) =&gt; null )); &#125;, ); &#125; _createItem(listData) &#123; print(&quot; _createItem &quot;+ listData.toString() ); return new Column( children: &lt;Widget&gt;[ new Container( height: 24.0, margin: const EdgeInsets.all(10.0), alignment: Alignment.center, child: new Text(listData[&quot;name&quot;]), ), new Container( height: 200.0, ), new Divider( height: 0.5, ) ], ); &#125;&#125; UI 布局1.开启 视觉调试开关 1布局控件也是可以模拟显示的，通常用于调试布局样式时用到的网格线、标尺、动画帧等。启用方式： 在main.dart中，引入包：1import &apos;package:flutter/rendering.dart&apos; show debugPaintSizeEnabled; 打开视觉调试开关12345678910111213void main() &#123; debugPaintSizeEnabled = true; //打开视觉调试开关 runApp( new MaterialApp( title: &apos;Snap&apos;, home: new SplashPage(), // 闪屏页, routes: &lt;String, WidgetBuilder&gt;&#123; // 路由 &apos;/LoginPage&apos;: (BuildContext context) =&gt; new LoginPage(), &apos;/HomePage&apos;: (BuildContext context) =&gt; new MainPage(), &#125;, ), );&#125; 开启后效果 调整UI123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566_createItem(listData) &#123; print(&quot; _createItem &quot;+ listData.toString() ); print(&quot; thumbUrl &quot;+ listData[&quot;thumbUrl&quot;] ); var imgUrl = listData[&apos;thumbUrl&apos;]; return new Column( children: &lt;Widget&gt;[// title new Container( height: 24.0, margin: const EdgeInsets.all(10.0), alignment: Alignment.center, child: new Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, children: &lt;Widget&gt;[ new Text(listData[&quot;name&quot;]), new Row( children: &lt;Widget&gt;[ new Container( decoration: new BoxDecoration(// color: const Color(0xfffce5cd), border: new Border.all( color: Colors.grey, width: 1.0), borderRadius: new BorderRadius.circular(50.0), ), child: new Row( children: &lt;Widget&gt;[ new Padding( padding: new EdgeInsets.only(top:2.0, bottom: 2.0, left: 2.0), child: new Image.asset(&quot;images/brightness_selected.png&quot;, width: 30.0 , height: 30.0, fit: BoxFit.contain, ), ), new Padding( padding: new EdgeInsets.only(right: 5.0), child: new Text(&quot;OFF&quot;), ), ], ), ), new Image.asset(&quot;images/btn_settings_enable.png&quot;, width: 60.0), ], ), ], ), ), new Container( child: new AspectRatio( aspectRatio:16/9, //横纵比 长宽比 3:2 child: new Image.network(imgUrl),//项目资源文件 ), ), new Divider( height: 0.5, ) ], ); &#125; 顶部 左右对齐使用 1mainAxisAlignment: MainAxisAlignment.spaceBetween, 圆角 1234567new Container( decoration: new BoxDecoration( // color: const Color(0xfffce5cd), border: new Border.all( color: Colors.grey, width: 1.0), borderRadius: new BorderRadius.circular(50.0), ),&#125; padding只好这么写了 12345678new Padding( padding: new EdgeInsets.only(top:2.0, bottom: 2.0, left: 2.0), child: new Image.asset(&quot;images/brightness_selected.png&quot;, width: 30.0 , height: 30.0, fit: BoxFit.contain, ),), 宽高比 1234new AspectRatio( aspectRatio:3/2, //横纵比 长宽比 3:2 child: new Image(image: new AssetImage(&apos;images/img1.jpg&apos;)),//项目资源文件), 虽然 对 flutter 的UI 有各种怨言 但是 还是强忍着 学吧]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 5.添加启动页]]></title>
    <url>%2F2018%2F09%2F26%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%205.%E6%B7%BB%E5%8A%A0%E5%90%AF%E5%8A%A8%E9%A1%B5%2F</url>
    <content type="text"><![CDATA[Flutter app 5.添加启动页 1.创建启动页创建启动页pages/SplashPage.dart 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576class SplashPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() &#123; return new _SplashPageState(); &#125;&#125;class _SplashPageState extends State&lt;SplashPage&gt; &#123; @override Widget build(BuildContext context) &#123; return new Container( color: Colors.white, child: new Center( child: new Image.asset(&quot;images/snap_icon_launcher.png&quot;, width: 60.0) ), ); &#125; @override Future initState() &#123; super.initState(); initData(); &#125; Future getUserInfo() async &#123; Map map = &#123;&#125;; String result = await NetUtils.apiRequest(Api.getUserInfo, map); Map&lt;String, dynamic&gt; resultMap = json.decode(result); print(resultMap); if( null != resultMap )&#123; if( 200 == resultMap[&apos;messageCode&apos;] || &quot;ok&quot; == resultMap[&apos;message&apos;])&#123; var data = resultMap[&apos;data&apos;]; if ( null != data )&#123; num id = data[&apos;id&apos;]; var account = data[&apos;account&apos;]; var nickName = data[&apos;nickName&apos;]; var profile = data[&apos;profile&apos;]; var sengledWebsite = data[&apos;sengledWebsite&apos;]; var privacyPolicyStatus = data[&apos;privacyPolicyStatus&apos;]; var upgradeAppType = data[&apos;upgradeAppType&apos;]; User userInfo = new User( id:id, name:nickName, avatar:profile, account:account); new UserHelper().setUser(userInfo) ; DataUtils.saveUserInfo(userInfo); Navigator.of(context).pushReplacementNamed(&apos;/HomePage&apos;); &#125; &#125; else &#123; Navigator.of(context).pushReplacementNamed(&apos;/LoginPage&apos;); &#125; &#125; &#125; Future initData() async &#123; String session = await new DataHelper().getSession(); if (null != session)&#123; getUserInfo(); &#125;else &#123; Navigator.of(context).pushReplacementNamed(&apos;/LoginPage&apos;); &#125; &#125;&#125; 主页面 设置路由main.dart123456789101112void main() &#123; runApp( new MaterialApp( title: &apos;Snap&apos;, home: new SplashPage(), // 闪屏页, routes: &lt;String, WidgetBuilder&gt;&#123; // 路由 &apos;/LoginPage&apos;: (BuildContext context) =&gt; new LoginPage(), &apos;/HomePage&apos;: (BuildContext context) =&gt; new MainPage(), &#125;, ), );&#125; 问题 同步 异步问题123String session = new DataHelper().getSession();没有 await 第一次 session 一直 获取不到]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android app App事故 解决方案]]></title>
    <url>%2F2018%2F09%2F26%2Fandroid%2Fandroid%20app%20App%E4%BA%8B%E6%95%85%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[android app App事故 解决方案问题 如何降低App 事故率 出现事故 如何应对 如何降低App 事故率 开发 测试 版本发布 1. 开发1.1 android 版本API变更 android系统bug (兼容性问题)123每个版本 相应的文档 以及 APP中代码 (记录wiki)公司 https://git.cloud.sengled.com/kylinhuang/SnapDoc 1.2 app 内部测试1(组内成员 全部测试通过后再提交测试) 2. 测试 使用 google play 测试平台测试 使用 使用 google play 平台脚本测试 测试用例 人工测试 以及 服务器端接口测试 采用三者结合方式 3. 版本发布Google Play 版本发布 采用 灰度发布 (概率发布) 降低 事故 影响 当APP 测试通过采用灰度发布 对于Android应用，可以使用Google的分阶段发布.Google开发者后台可以设置灰度发布的百分比，5%，10%，20%，50%，100% 出现事故 如何应对问题来源1. 统计问题1app 崩溃统计 每天统计平台 查看崩溃信息 (这样的问题修改快 可以指定 哪一行代码出现问题) 2. 用户反馈问题反馈问题123456系统版本号app版本号用户账户 出现事故 时间 出现事故 操作流程 问题严重的 必须一周内解决 3. google play 反馈问题1这一块 一直很缺失 修复方式1. 热补丁参考https://www.cnblogs.com/popfisher/p/8543973.html 阿里巴巴收费腾讯 微信团队 需要搭建服务 不建议使用 google play 灰度推送google play 审核时间快 2. 发布新版本服务器端问题 修复 -&gt; 测试 -&gt; 部署 app 端问题 修复 -&gt; 发布版本 -&gt; 测试 -&gt; 发布 app 发布测试 整体流程研发 研发 app 发布版本时间 下班前在平台 google play 内部测试渠道(平台会根据 app自动测试) google play 自动测试通过 发布到 开放式渠道 Beta 版 封闭式渠道Alpha 版 (再 相应的渠道能看到 需要两个小时左右 以便测试 第二天测试) 测试1. 收到邮件 使用自己的google 账号 加入 开放式渠道测试 2. 使用 google play 更新 app 3. 在 google play 脚本测试 自动测试Robo 测试 Instrumentation 测试 Snap 代码 对测试开放测试 使用 测试分支 创建新分支 建议 test_功能名 firebase 中也有一套 但是这是针对 特殊机型 每次测试项目 有限制https://console.firebase.google.com 4. 人工用例测试此处省略 12345注意 1. 测试过程中经历避免 卸载安装 尽量模拟用户更新app 的方式(除非遇到特殊情况)2. 尽量在google play 测试渠道更新 app 没有google play 服务手机 官网下载测试app 覆盖更新 3. app google play 发布版本 会一直累计增加 避免 code 低 更新不了的问题 (研发)4. app 历史版本保存 保存 在readme http://redmine.cloud.sengled.com:8000/projects/par38/files IOS无法直接 下载安装 采用 - 用itunes或同步助手安装 这一步 教程 后期补充 google play / firebase 测试平台google play / firebase使用 各自账号 分配权限 1. Robo 测试参考https://support.google.com/googleplay/android-developer/answer/7002270#upload_script https://firebase.google.com/docs/test-lab/test-lab-play?utm_campaign=firebase_launch_testlab_080416&amp;utm_source=Play&amp;utm_medium=console 使用 android studio Record Robo Script https://firebase.google.com/docs/test-lab/android/robo-ux-test#scripting 自己录制 简单 登陆 修改用户名以及退出登录等操作 2. Instrumentation 测试这一块 就属于白盒 测试 代码有关了 不解释 https://blog.csdn.net/yiwachen/article/details/52464635 https://github.com/yatou252303/android-testing 平台使用https://console.firebase.google.com/project/snap-cb615/config TestLab]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 4.添加主页面]]></title>
    <url>%2F2018%2F09%2F22%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%204.%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%A1%B5%E9%9D%A2%2F</url>
    <content type="text"><![CDATA[Flutter app 4.添加主页面 1.创建主页面创建主页面pages/MainPage.dart 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104import &apos;package:flutter/cupertino.dart&apos;;import &apos;package:flutter/material.dart&apos;;class MainPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() &#123; return new _MainPageState(); &#125;&#125;class _MainPageState extends State&lt;MainPage&gt; &#123; int _tabIndex = 0; final tabTextStyleNormal = new TextStyle(color: const Color(0xff969696)); final tabTextStyleSelected = new TextStyle(color: const Color(0xFFf39b63)); var tabImages; var _body; var appBarTitles = [&apos;MySnap&apos;, &apos;Security&apos;, &apos;Me&apos;]; Image getTabImage(path) &#123; return new Image.asset(path, width: 20.0, height: 20.0); &#125; void initData() &#123; if (tabImages == null) &#123; tabImages = [ [ getTabImage(&apos;images/tab_icon_snap_0.png&apos;), getTabImage(&apos;images/tab_icon_snap_1.png&apos;) ], [ getTabImage(&apos;images/tab_icon_security_0.png&apos;), getTabImage(&apos;images/tab_icon_security_1.png&apos;) ], [ getTabImage(&apos;images/tab_icon_me_0.png&apos;), getTabImage(&apos;images/tab_icon_me_1.png&apos;) ] ]; &#125; _body = new IndexedStack( children: &lt;Widget&gt;[ new MyTabPage(), new MyTabPage(), new MyTabPage() ], index: _tabIndex, ); &#125; TextStyle getTabTextStyle(int curIndex) &#123; if (curIndex == _tabIndex) &#123; return tabTextStyleSelected; &#125; return tabTextStyleNormal; &#125; Image getTabIcon(int curIndex) &#123; if (curIndex == _tabIndex) &#123; return tabImages[curIndex][1]; &#125; return tabImages[curIndex][0]; &#125; Text getTabTitle(int curIndex) &#123; return new Text(appBarTitles[curIndex], style: getTabTextStyle(curIndex)); &#125; @override Widget build(BuildContext context) &#123; initData(); return new MaterialApp( theme: new ThemeData( primaryColor: const Color(0xFFf39b63) ), home: new Scaffold( appBar: new AppBar( title: new Text(appBarTitles[_tabIndex], style: new TextStyle(color: Colors.white)), iconTheme: new IconThemeData(color: Colors.white) ), body: _body, bottomNavigationBar: new CupertinoTabBar( items: &lt;BottomNavigationBarItem&gt;[ new BottomNavigationBarItem( icon: getTabIcon(0), title: getTabTitle(0)), new BottomNavigationBarItem( icon: getTabIcon(1), title: getTabTitle(1)), new BottomNavigationBarItem( icon: getTabIcon(2), title: getTabTitle(2)), ], currentIndex: _tabIndex, onTap: (index) &#123; setState(()&#123; _tabIndex = index; &#125;); &#125;, ), ), ); &#125;&#125; 2.添加图片资源目录images/ 图片 放在 images/ 下 在 pubspec.yaml 中 修改 添加123456789assets: - images/tab_icon_snap_0.png - images/tab_icon_snap_1.png - images/tab_icon_security_0.png - images/tab_icon_security_1.png - images/tab_icon_me_0.png - images/tab_icon_me_1.png 创建 /pages/MyTabPage.dart1234567891011121314151617181920212223import &apos;package:flutter/material.dart&apos;;class MyTabPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() &#123; return new MyTabPageState(); &#125;&#125;class MyTabPageState extends State&lt;MyTabPage&gt; &#123; @override void initState() &#123; super.initState(); &#125; @override Widget build(BuildContext context) &#123; return new Center( child: new Text(&apos;提示&apos;), ); &#125;&#125; 3.启动主页面管理多个用户界面有两个核心概念和类：路由（Route）和导航器（Navigator）， 路由（Route）是应用程序的“屏幕”或“页面”的抽象，导航器（Navigator）是管理路由的控件。 导航器（Navigator）可以推送（push）和弹出（pop）路由来帮助用户从当前屏幕移动到另一个屏幕。 Navigator的跳转有两种，一种是显示跳转，需要我们在MaterialPageRoute中指定widget1234Navigator.of(context).push(new MaterialPageRoute(builder: (context) &#123; //指定跳转的页面 return new Demo1(); &#125;,)); 另一种是隐身跳转，这种跳转需要先定义，后使用，跳转方式就像Arouter一样的路径方式，定义部分需要在MaterialApp下定义routes，routes就跟一个Map&lt;path,Page&gt;集合一样，定义好了path对应的page，那么下次跳转，我们就可以针对path去跳转了 1234567891011@overrideWidget build(BuildContext context) &#123; return new MaterialApp( home: new Scaffold( body: new Center(child: new RaisedButton(onPressed: _pushPage,child: new Text(&quot;跳转&quot;))), ), //定义路由 routes: &lt;String,WidgetBuilder&gt;&#123; &quot;/demo1&quot;:(BuildContext context)=&gt;new Demo1(), &#125;, ); 跳转使用1Navigator.of(context).pushNamed(&quot;/demo1&quot;); 注意 context 表示 不对跳转 效果也不对 参考 https://blog.csdn.net/u013000152/article/details/80940682 在 LoginPage.dart 登陆完成 启动主页面 123Navigator.of(context).push(new MaterialPageRoute( builder: (ctx) =&gt; new MainPage() ));]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 3.添加 loading toast]]></title>
    <url>%2F2018%2F09%2F19%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%203.%E6%B7%BB%E5%8A%A0loading%20toast%E6%8F%90%E7%A4%BA%2F</url>
    <content type="text"><![CDATA[Flutter app 3.添加 loading toast1.添加loading创建 Loading WidgetLoginPage.dart 中123456789101112131415Widget _buildBody()&#123; if (_isLoading) &#123; return _buildLoading(); &#125; else &#123; return new ListView( children: &lt;Widget&gt;[ _buildCustomBar(), _buildAccountEdit(), _buildPWDEdit(), _buildLogin(), _buildTips(), ], ); &#125; &#125; loading12345678910Widget _buildLoading() &#123; return new Container( padding: const EdgeInsets.all(32.0), child: new Center( child: new CircularProgressIndicator(), ), ); &#125; 1var _isLoading = false ; 更新 状态123456void showLoading(bool isshowLoading) &#123; setState( () &#123; _isLoading = isshowLoading; &#125;, ); &#125;&#125; 显示1showLoading(true); 2. Toast参考https://pub.dartlang.org/packages/fluttertoast#-installing-tab- 1. Depend itAdd this to your package’s pubspec.yaml file:12dependencies: fluttertoast: ^2.0.7 2. Install itYou can install packages from the command line: with Flutter: 1$ flutter packages get Alternatively, your editor might support flutter packages get. Check the docs for your editor to learn more. 使用 util/ToastUtils.dart 1234567891011121314151617181920212223242526272829303132333435363738394041424344import &apos;package:fluttertoast/fluttertoast.dart&apos;;class ToastUtils &#123; static void showLongToast(String msg) &#123; Fluttertoast.showToast( msg: msg, toastLength: Toast.LENGTH_LONG, ); &#125; static void showColoredToast(String msg,String bgcolor,String textcolor) &#123; Fluttertoast.showToast( msg: msg, toastLength: Toast.LENGTH_SHORT, bgcolor: bgcolor, textcolor: textcolor ); &#125; static void showShortToast(String msg) &#123; Fluttertoast.showToast( msg: msg, toastLength: Toast.LENGTH_SHORT, timeInSecForIos: 1 ); &#125; static void showTopShortToast(String msg) &#123; Fluttertoast.showToast( msg: msg, toastLength: Toast.LENGTH_SHORT, gravity: ToastGravity.TOP, timeInSecForIos: 1 ); &#125; static void showCenterShortToast(String msg) &#123; Fluttertoast.showToast( msg: msg, toastLength: Toast.LENGTH_SHORT, gravity: ToastGravity.CENTER, timeInSecForIos: 1 ); &#125;&#125; LoginPage.dart 1ToastUtils. showShortToast(&quot;登陆成功&quot;) ;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 2.save session]]></title>
    <url>%2F2018%2F09%2F19%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%202.save%20session%2F</url>
    <content type="text"><![CDATA[Flutter app 2.save session本地保存 方式 使用shared_preferences 参考 https://flutter.io/cookbook/persistence/key-value/ 1. Add the dependency 添加依赖https://pub.dartlang.org/ 中查找最新版本 Add this to your package’s pubspec.yaml file: 12dependencies: shared_preferences: ^0.4.2 更新 flutter packages get 2. 使用 shared_preferences 保存引入1import &apos;package:shared_preferences/shared_preferences.dart&apos;; 创建 util/DataUtils.dart12345678910111213141516import &apos;package:shared_preferences/shared_preferences.dart&apos;;import &apos;dart:async&apos;;class DataUtils &#123; static final String SP_SESSION = &quot;SESSION&quot;; static Future&lt;String&gt; getAccessToken() async &#123; SharedPreferences sp = await SharedPreferences.getInstance(); return sp.getString(SP_SESSION); &#125; static Future&lt;bool&gt; setAccessToken(String session) async &#123; SharedPreferences sp = await SharedPreferences.getInstance(); return await sp.setString(SP_USER_NAME, session); &#125;&#125; 3. LoginPage.dart 中使用 保存用户信息 以及session1. 登陆完成保存 session创建单例 保存 app 缓存数据 session /helper/DataHelper.dart123456789101112131415161718192021222324252627282930313233343536373839import &apos;package:flutter_snap/util/DataUtils.dart&apos;;class DataHelper &#123; static final DataHelper _singleton = new DataHelper._internal(); factory DataHelper() &#123; return _singleton; &#125; DataHelper._internal(); String session; void setSession(String session)&#123; print(session); if (session != this.session)&#123; this.session = session ; var result = DataUtils.setAccessToken(session); print(&quot;setSession&quot;); print(result); &#125; &#125; String getSession()&#123; if (null == this.session)&#123; var jsession = DataUtils.getAccessToken(); print(&quot;getSession&quot;); print(jsession); this.session = jsession.toString(); &#125; return session ; &#125;&#125; LoginPage.dart 123456789101112131415161718192021222324252627282930313233343536373839404142showTips() async &#123; //TODO loading setState( () &#123; _isLoading = true; &#125;, ); Map map = &#123; &apos;user&apos;: &apos;las@sengled.com&apos;, &apos;pwd&apos;: &apos;123456&apos;, &apos;osType&apos;:&apos;android&apos;, &apos;uuid&apos;:&apos;4CC09670-0623-497B-AB82-F48611FA4C42&apos;, &apos;appCode&apos;:&apos;snap&apos;, &apos;productCode&apos;:&apos;snap&apos; &#125;; print(Api.AuthenCross); print(json.encode(map)); String result = await apiRequest(Api.AuthenCross, map); Map&lt;String, dynamic&gt; resultMap = json.decode(result); if( null != resultMap )&#123; if( 0 == resultMap[&apos;ret&apos;] || &quot;success&quot; == resultMap[&apos;msg&apos;])&#123; var jsessionId = resultMap[&apos;jsessionId&apos;]; print(jsessionId) ; if( jsessionId.length &gt; 0 )&#123; new DataHelper().setSession(jsessionId); &#125; getUserInfo(); &#125; else &#123; &#125; &#125; &#125; LoginPage login 调用DataHelper 保存 session在 调用 getUserInfo 获取用户信息 2. 获取用户信息 在 head 中添加 sessionhttp 代码 util/NetUtils.dart http headers 添加 session 123456789101112131415161718192021222324class NetUtils &#123; static Future&lt;String&gt; apiRequest(String url, Map jsonMap) async &#123; String session = new DataHelper().getSession(); print(session); print(url); print(json.encode(jsonMap)); HttpClient httpClient = new HttpClient(); HttpClientRequest request = await httpClient.postUrl(Uri.parse(url)); request.headers.set(&apos;content-type&apos;, &apos;application/json&apos;); if (null != session)&#123; request.headers.add(&apos;Cookie&apos;, &apos;JSESSIONID=&apos; + session.toString()); &#125; request.add(utf8.encode(json.encode(jsonMap))); HttpClientResponse response = await request.close(); // todo - you should check the response.statusCode String reply = await response.transform(utf8.decoder).join(); httpClient.close(); return reply; &#125;&#125; LoginPage.dart12345678910111213141516171819202122232425262728293031Future getUserInfo() async &#123; Map map = &#123;&#125;; String result = await NetUtils.apiRequest(Api.getUserInfo, map); Map&lt;String, dynamic&gt; resultMap = json.decode(result); print(resultMap); if( null != resultMap )&#123; if( 200 == resultMap[&apos;messageCode&apos;] || &quot;ok&quot; == resultMap[&apos;message&apos;])&#123; var data = resultMap[&apos;data&apos;]; if ( null != data )&#123; num id = data[&apos;id&apos;]; var account = data[&apos;account&apos;]; var nickName = data[&apos;nickName&apos;]; var profile = data[&apos;profile&apos;]; User userInfo = new User( id:id, name:nickName, avatar:profile, account:account); new UserHelper().setUser(userInfo) ; DataUtils.saveUserInfo(userInfo); &#125; &#125; else &#123; &#125; &#125; &#125; model/User.dart12345678910111213141516171819202122class User &#123; num id; String account; String name; String avatar; User( &#123;this.id, this.name, this.avatar, this.account&#125; ); User.fromJson(Map&lt;String, dynamic&gt; json) : id = json[&apos;id&apos;], account = json[&apos;account&apos;], name = json[&apos;name&apos;], avatar = json[&apos;avatar&apos;] ; Map&lt;String, dynamic&gt; toJson() =&gt; &#123; &apos;id&apos;: id, &apos;account&apos;: account, &apos;name&apos;: name, &apos;avatar&apos;: avatar, &#125;;&#125; helper/UserHelper.dart1234567891011121314151617class UserHelper &#123; static final UserHelper _singleton = new UserHelper._internal(); factory UserHelper() &#123; return _singleton; &#125; UserHelper._internal(); User user; setUser(User u)&#123; this.user = u; &#125; User getUser()&#123; return user; &#125;&#125; 总结 shared_preferences 存储 http请求 添加 session]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter app 1.login]]></title>
    <url>%2F2018%2F09%2F18%2Fandroid%2FFlutter%2Fapp%2FFlutter%20app%201.login%2F</url>
    <content type="text"><![CDATA[Flutter app 1.login1.创建新项目2. 创建 login1. 创建目录pages 在 pages 目录下创建 LoginPage.dart 1234567891011121314151617181920class LoginPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() &#123; return new _LoginPageState(); &#125;&#125;class _LoginPageState extends State&lt;LoginPage&gt; &#123; @override Widget build(BuildContext context) &#123; return new Scaffold( body: new Center( child: new Text( &apos;hello &apos;, ), ), ); &#125;&#125; main.dart12345678910111213import &apos;package:flutter/material.dart&apos;;import &apos;package:flutter_snap/pages/LoginPage.dart&apos;;void main() &#123; runApp( new MaterialApp( title: &apos;Flutter教程&apos;, home: new LoginPage(), ), );&#125; 3.添加 登录UItitle bar12345678910@override Widget build(BuildContext context) &#123; return new Material( child: new Scaffold( key: registKey, backgroundColor: Colors.white, body: _buildBody(), ), ); &#125; 1234567Widget _buildBody()&#123; return new ListView( children: &lt;Widget&gt;[ _buildCustomBar(), ], ); &#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344// title Bar Widget _buildCustomBar() &#123; return new Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, //子组件的排列方式为主轴两端对齐 children: &lt;Widget&gt;[ new InkWell( child: new Padding( padding: const EdgeInsets.all(12.0), child: new Icon( Icons.chevron_left, size: 26.0, color: Colors.grey[700], )), onTap: () &#123; Navigator.pop(context); &#125;, ), new InkWell( child: new Padding( padding: const EdgeInsets.all(12.0), child: new Text( &quot;Create account&quot;, style: new TextStyle(fontSize: 18.0, color: Colors.grey[900]), )), onTap: () &#123; showTips(); &#125;, ), new InkWell( child: new Padding( padding: const EdgeInsets.all(12.0), child: new Text( &quot;Login&quot;, style: new TextStyle(fontSize: 16.0, color: Colors.grey[700]), )), onTap: () &#123; showTips(); &#125;, ), ], ); &#125; Account 输入框123456789101112Widget _buildBody()&#123; if (_isLoading) &#123; return _buildLoading(); &#125; else &#123; return new ListView( children: &lt;Widget&gt;[ _buildCustomBar(), _buildAccountEdit(), ], );; &#125; &#125; 123456789101112131415161718192021222324252627Widget _buildAccountEdit() &#123; var node = new FocusNode(); return new Padding( padding: const EdgeInsets.only(left: 40.0, right: 40.0), child: new TextField( onChanged: (str) &#123; _email = str; setState(() &#123;&#125;); &#125;, decoration: new InputDecoration( hintText: &apos;Email address&apos;, ), maxLines: 1, //行数 maxLength: 50, // //键盘展示为号码 keyboardType: TextInputType.emailAddress, //只能输入数字// inputFormatters: &lt;TextInputFormatter&gt;[// WhitelistingTextInputFormatter.digitsOnly,// ], onSubmitted: (text) &#123; print(&quot;onSubmitted&quot;); FocusScope.of(context).reparentIfNeeded(node); &#125;, ), ); &#125; 密码 输入框12345678910111213Widget _buildBody()&#123; if (_isLoading) &#123; return _buildLoading(); &#125; else &#123; return new ListView( children: &lt;Widget&gt;[ _buildCustomBar(), _buildAccountEdit(), _buildPWDEdit(), ], );; &#125; &#125; 123456789101112131415161718192021Widget _buildPWDEdit() &#123; var node = new FocusNode(); Widget verifyCodeEdit = new TextField( onChanged: (str) &#123; _pwd = str; setState(() &#123;&#125;); &#125;, decoration: new InputDecoration( hintText: &apos;请输入密码&apos;, ), maxLines: 1, maxLength: 50, //键盘展示为数字 keyboardType: TextInputType.text,// inputFormatters: &lt;TextInputFormatter&gt;[// WhitelistingTextInputFormatter.digitsOnly,// ], onSubmitted: (text) &#123; FocusScope.of(context).reparentIfNeeded(node); &#125;, ); 登录按钮1234567891011121314Widget _buildBody()&#123; if (_isLoading) &#123; return _buildLoading(); &#125; else &#123; return new ListView( children: &lt;Widget&gt;[ _buildCustomBar(), _buildAccountEdit(), _buildPWDEdit(), _buildLogin(), ], );; &#125; &#125; 1234567891011121314151617Widget _buildLogin() &#123; return new Padding( padding: const EdgeInsets.only(left: 40.0, right: 40.0, top: 20.0), child: new RaisedButton( color: Colors.blue, textColor: Colors.white, disabledColor: Colors.blue[100], onPressed: (_email.isEmpty || _pwd.length &lt; 8 ) ? null : () &#123; showTips(); &#125;, child: new Text( &quot;登 录&quot;, style: new TextStyle(fontSize: 16.0), ), ), ); &#125; 忘记密码 注册123456789101112131415Widget _buildBody()&#123; if (_isLoading) &#123; return _buildLoading(); &#125; else &#123; return new ListView( children: &lt;Widget&gt;[ _buildCustomBar(), _buildAccountEdit(), _buildPWDEdit(), _buildLogin(), _buildTips(), ], ); &#125; &#125; 123456789101112131415161718Widget _buildTips() &#123; return new Padding( padding: const EdgeInsets.only(left: 40.0, right: 40.0, top: 20.0), child: new Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, //子组件的排列方式为主轴两端对齐 children: &lt;Widget&gt;[ new Text( &quot;注册&quot;, style: new TextStyle(fontSize: 14.0, color: Colors.blue), ), new Text( &quot;忘记密码&quot;, style: new TextStyle(fontSize: 14.0, color: Colors.blue), ), ], ), ); &#125; 4.添加 登录功能点击登陆执行 showTips() 方法 添加网络请求pubspec.yaml 文件中添加 http: &apos;&gt;=0.11.3+12&apos; 添加请求业务12345showTips() async &#123; var httpClient = createHttpClient(); var response = await httpClient.post(Api.AuthenCross, body: &#123;&apos;user&apos;: &apos;las@sengled.com&apos;, &apos;pwd&apos;: &apos;123456&apos;,&apos;osType&apos;:&apos;android&apos;,&apos;appCode&apos;:&apos;snap&apos;,&apos;productCode&apos;:&apos;snap&apos; &#125;); print(&apos;Response status: $&#123;response.body&#125;&apos;); &#125; 返回数据不对 存在问题 HTTP Status 415 不知道什么原因 1234567891011121314151617181920212223242526272829303132333435showTips() async &#123; //TODO loading setState( () &#123; _isLoading = true; &#125;, ); Map map = &#123; &apos;user&apos;: &apos;las@sengled.com&apos;, &apos;pwd&apos;: &apos;123456&apos;, &apos;osType&apos;:&apos;android&apos;, &apos;uuid&apos;:&apos;4CC09670-0623-497B-AB82-F48611FA4C42&apos;, &apos;appCode&apos;:&apos;snap&apos;, &apos;productCode&apos;:&apos;snap&apos; &#125;; print(Api.AuthenCross); print(json.encode(map)); print(await apiRequest(Api.AuthenCross, map)); &#125; Future&lt;String&gt; apiRequest(String url, Map jsonMap) async &#123; HttpClient httpClient = new HttpClient(); HttpClientRequest request = await httpClient.postUrl(Uri.parse(url)); request.headers.set(&apos;content-type&apos;, &apos;application/json&apos;); request.add(utf8.encode(json.encode(jsonMap))); HttpClientResponse response = await request.close(); // todo - you should check the response.statusCode String reply = await response.transform(utf8.decoder).join(); httpClient.close(); return reply; &#125; 返回结果123 I/flutter ( 8344): &#123;&quot;user&quot;:&quot;las@sengled.com&quot;,&quot;pwd&quot;:&quot;123456&quot;,&quot;osType&quot;:&quot;android&quot;,&quot;uuid&quot;:&quot;4CC09670-0623-497B-AB82-F48611FA4C42&quot;,&quot;appCode&quot;:&quot;snap&quot;,&quot;productCode&quot;:&quot;snap&quot;&#125;I/flutter ( 8344): &#123;&quot;ret&quot;:0,&quot;msg&quot;:&quot;success&quot;,&quot;customerId&quot;:168]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 控件 FittedBox]]></title>
    <url>%2F2018%2F09%2F05%2Fandroid%2FFlutter%2FFlutter%20%E6%8E%A7%E4%BB%B6%20FittedBox%2F</url>
    <content type="text"><![CDATA[Flutter FittedBoxScales and positions its child within itself according to fit. 简介按照其官方的介绍，它主要做了两件事情，缩放（Scale）以及位置调整（Position）。 FittedBox 会在自己的尺寸范围内缩放并且调整child位置，使得child适合其尺寸。做过移动端的，可能会联想到ImageView控件，它是将图片在其范围内，按照规则，进行缩放位置调整。FittedBox跟ImageView是有些类似的，可以猜测出，它肯定有一个类似于ScaleType的属性。 布局行为FittedBox的布局行为还算简单，官方没有给出说明，我在这里简单说一下。由于FittedBox是一个容器，需要让其child在其范围内缩放，因此其布局行为分两种情况： 如果外部有约束的话，按照外部约束调整自身尺寸，然后缩放调整child，按照指定的条件进行布局； 如果没有外部约束条件，则跟child尺寸一致，指定的缩放以及位置属性将不起作用。 继承关系1Object &gt; Diagnosticable &gt; DiagnosticableTree &gt; Widget &gt; RenderObjectWidget &gt; SingleChildRenderObjectWidget &gt; FittedBox 从继承关系可以看出，FittedBox控件是一个基础控件。 示例代码12345678910111213new Container( color: Colors.amberAccent, width: 300.0, height: 300.0, child: new FittedBox( fit: BoxFit.contain, alignment: Alignment.topLeft, child: new Container( color: Colors.red, child: new Text(&quot;FittedBox&quot;), ), ),) 写了一个很简单的例子，加入Container是为了加颜色显示两个区域，读者可以试着修改fit以及alignment查看其不同的效果。 源码解析123456const FittedBox(&#123;Key key,this.fit: BoxFit.contain,this.alignment: Alignment.center,Widget child,&#125;) 属性解析fit：缩放的方式，默认的属性是BoxFit.contain，child在FittedBox范围内，尽可能的大，但是不超出其尺寸。这里注意一点，contain是保持着child宽高比的大前提下，尽可能的填满，一般情况下，宽度或者高度达到最大值时，就会停止缩放。 BoxFit布局表现 alignment：对齐方式，默认的属性是Alignment.center，居中显示child。 源码构造函数如下：12345678@overrideRenderFittedBox createRenderObject(BuildContext context) &#123;return new RenderFittedBox( fit: fit, alignment: alignment, textDirection: Directionality.of(context),);&#125; FittedBox具体实现是由RenderFittedBox进行的。不知道读者有没有发现，目前的一些基础控件，继承自RenderObjectWidget的，widget本身都只是存储了一些配置信息，真正的绘制渲染，则是由内部的createRenderObject所调用的RenderObject去实现的。 RenderFittedBox具体的布局代码如下：123456789if (child != null) &#123; child.layout(const BoxConstraints(), parentUsesSize: true); // 如果child不为null，则按照child的尺寸比率缩放child的尺寸 size = constraints.constrainSizeAndAttemptToPreserveAspectRatio(child.size); _clearPaintData();&#125; else &#123; // 如果child为null，则按照最小尺寸进行布局 size = constraints.smallest;&#125; 场景FittedBox在目前的项目中还未用到过。对于需要缩放调整位置处理的，一般都是图片。笔者一般都是使用Container中的decoration属性去实现相应的效果。对于其他控件需要缩放以及调整位置的，目前还没有遇到使用场景，大家只需要知道有这么一个控件，可以实现这个功能即可。]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 控件 Center]]></title>
    <url>%2F2018%2F09%2F04%2Fandroid%2FFlutter%2FFlutter%20%E6%8E%A7%E4%BB%B6%20Center%2F</url>
    <content type="text"><![CDATA[Flutter 控件 CenterCenter继承自Align，只不过是将alignment设置为Alignment.center， 其他属性例如widthFactor、heightFactor，布局行为，都与Align完全一样，在这里就不再单独做介绍了。 Center源码如下，没有设置alignment属性，是因为Align默认的对齐方式就是居中。 12345class Center extends Align &#123; /// Creates a widget that centers its child. const Center(&#123; Key key, double widthFactor, double heightFactor, Widget child &#125;) : super(key: key, widthFactor: widthFactor, heightFactor: heightFactor, child: child);&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 控件 Align]]></title>
    <url>%2F2018%2F09%2F04%2Fandroid%2FFlutter%2FFlutter%20%E6%8E%A7%E4%BB%B6%20Align%2F</url>
    <content type="text"><![CDATA[Flutter 控件 Align在其他端的开发，Align一般都是当做一个控件的属性，并没有拿出来当做一个单独的控件。 Align本身实现的功能并不复杂，设置child的对齐方式，例如居中、居左居右等，并根据child尺寸调节自身尺寸 布局行为Align的布局行为分为两种情况： 当widthFactor和heightFactor为null的时候，当其有限制条件的时候，Align会根据限制条件尽量的扩展自己的尺寸，当没有限制条件的时候，会调整到child的尺寸； 当widthFactor或者heightFactor不为null的时候，Aligin会根据factor属性，扩展自己的尺寸，例如设置widthFactor为2.0的时候，那么，Align的宽度将会是child的两倍。 Align为什么会有这样的布局行为呢？原因很简单，设置对齐方式的话，如果外层元素尺寸不确定的话，内部的对齐就无法确定。因此，会有宽高因子、根据外层限制扩大到最大尺寸、外层不确定时调整到child尺寸这些行为。 继承关系1Object &gt; Diagnosticable &gt; DiagnosticableTree &gt; Widget &gt; RenderObjectWidget &gt; SingleChildRenderObjectWidget &gt; Align 可以看出，Align跟Padding一样，也是一个非常基础的组件，Container中的align属性，也是使用Align去实现的。 例子123456new Align( alignment: Alignment.center, widthFactor: 2.0, heightFactor: 2.0, child: new Text(&quot;Align&quot;),) 例子依旧很简单，设置一个宽高为child两倍区域的Align，其child处在正中间。 源码1234567const Align(&#123; Key key, this.alignment: Alignment.center, this.widthFactor, this.heightFactor, Widget child &#125;) Align的构造函数基本上就是宽高因子、对齐方式属性。 日常使用中，宽高因子属性基本上用的不多。 如果是复杂的布局，Container内部的align属性也可以实现相同的效果。 alignment：对齐方式，一般会使用系统默认提供的9种方式，但是并不是说只有这9种，例如如下的定义。系统提供的9种方式只是预先定义好的。 12/// The top left corner.static const Alignment topLeft = const Alignment(-1.0, -1.0); Alignment实际上是包含了两个属性的，其中第一个参数，-1.0是左边对齐，1.0是右边对齐，第二个参数，-1.0是顶部对齐，1.0是底部对齐。根据这个规则，我们也可以自定义我们需要的对齐方式，例如12/// 居右高于底部1/4处.static const Alignment rightHalfBottom = alignment: const Alignment(1.0, 0.5), widthFactor：宽度因子，如果设置的话，Align的宽度就是child的宽度乘以这个值，不能为负数。 heightFactor：高度因子，如果设置的话，Align的高度就是child的高度乘以这个值，不能为负数。 源码解析123456789@override RenderPositionedBox createRenderObject(BuildContext context) &#123; return new RenderPositionedBox( alignment: alignment, widthFactor: widthFactor, heightFactor: heightFactor, textDirection: Directionality.of(context), ); &#125; Align的实际构造调用的是RenderPositionedBox。 RenderPositionedBox的布局表现如下： 123456789101112131415// 根据_widthFactor、_heightFactor以及限制因素来确定宽高final bool shrinkWrapWidth = _widthFactor != null || constraints.maxWidth == double.infinity;final bool shrinkWrapHeight = _heightFactor != null || constraints.maxHeight == double.infinity;if (child != null) &#123; // 如果child不为null，则根据规则设置Align的宽高，如果需要缩放，则根据_widthFactor是否为null来进行缩放，如果不需要，则尽量扩展。 child.layout(constraints.loosen(), parentUsesSize: true); size = constraints.constrain(new Size(shrinkWrapWidth ? child.size.width * (_widthFactor ?? 1.0) : double.infinity, shrinkWrapHeight ? child.size.height * (_heightFactor ?? 1.0) : double.infinity)); alignChild();&#125; else &#123; // 如果child为null，如果需要缩放，则变为0，否则就尽量扩展 size = constraints.constrain(new Size(shrinkWrapWidth ? 0.0 : double.infinity, shrinkWrapHeight ? 0.0 : double.infinity));&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 控件 Padding]]></title>
    <url>%2F2018%2F09%2F04%2Fandroid%2FFlutter%2FFlutter%20%E6%8E%A7%E4%BB%B6%20Padding%2F</url>
    <content type="text"><![CDATA[PaddingPadding的布局分为两种情况： 当child为空的时候，会产生一个宽为left+right，高为top+bottom的区域； 当child不为空的时候，Padding会将布局约束传递给child，根据设置的padding属性，缩小child的布局尺寸。然后Padding将自己调整到child设置了padding属性的尺寸，在child周围创建空白区域。 集成关系1Object &gt; Diagnosticable &gt; DiagnosticableTree &gt; Widget &gt; RenderObjectWidget &gt; SingleChildRenderObjectWidget &gt; Padding 从继承关系可以看出，Padding控件是一个基础控件，不像Container这种组合控件。Container中的margin以及padding属性都是利用Padding控件去实现的。 关于SingleChildRenderObjectWidgetSingleChildRenderObjectWidget是RenderObjectWidgets的一个子类，用于限制只能有一个子节点。它只提供child的存储，而不提供实际的更新逻辑。 关于RenderObjectWidgetsRenderObjectWidgets为RenderObjectElement提供配置，而RenderObjectElement包含着（wrap）RenderObject，RenderObject则是在应用中提供实际的绘制（rendering）的元素。 示例代码实例代码直接上官方的例子，非常的简单： 1234new Padding( padding: new EdgeInsets.all(8.0), child: const Card(child: const Text(&apos;Hello World!&apos;)),) 例子中对Card设置了一个宽度为8的内边距。 源码12345const Padding(&#123; Key key, @required this.padding, Widget child, &#125;) padding：padding的类型为EdgeInsetsGeometry，EdgeInsetsGeometry是EdgeInsets以及EdgeInsetsDirectional的基类。在实际使用中不涉及到国际化，例如适配阿拉伯地区等，一般都是使用EdgeInsets。EdgeInsetsDirectional光看命名就知道跟方向相关，因此它的四个边距不限定上下左右，而是根据方向来定的。 1.5.2 源码1234567@override RenderPadding createRenderObject(BuildContext context) &#123; return new RenderPadding( padding: padding, textDirection: Directionality.of(context), );&#125; Padding的创建函数，实际上是由RenderPadding来进行的。 关于RenderPadding的实际布局表现，当child为null的时候： 1234567if (child == null) &#123; size = constraints.constrain(new Size( _resolvedPadding.left + _resolvedPadding.right, _resolvedPadding.top + _resolvedPadding.bottom )); return;&#125; 返回一个宽为_resolvedPadding.left+_resolvedPadding.right，高为_resolvedPadding.top+_resolvedPadding.bottom的区域。 当child不为null的时候，经历了三个过程，即调整child尺寸、调整child位置以及调整Padding尺寸，最终达到实际的布局效果。 12345678910111213// 调整child尺寸final BoxConstraints innerConstraints = constraints.deflate(_resolvedPadding);child.layout(innerConstraints, parentUsesSize: true);// 调整child位置final BoxParentData childParentData = child.parentData;childParentData.offset = new Offset(_resolvedPadding.left, _resolvedPadding.top);// 调整Padding尺寸size = constraints.constrain(new Size( _resolvedPadding.left + child.size.width + _resolvedPadding.right, _resolvedPadding.top + child.size.height + _resolvedPadding.bottom)); 到此处，上面介绍的padding布局行为就解释的通了。]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 第三方登陆 Firebase]]></title>
    <url>%2F2018%2F09%2F03%2Fandroid%2FFeatures%2Fandroid%20%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86%20firebase%2F</url>
    <content type="text"><![CDATA[第三方登陆 Firebase参考 Firebase 参考 Firebase Android 代码Firebase Android github 注意 app/src/main/res/values/ids.xml 中 添加 对应的id Firebase 中的UID 问题 并非 google Facebook 的uid 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566this.facebookLoginButton.setReadPermissions(&quot;email&quot;, &quot;public_profile&quot;); this.facebookLoginButton.registerCallback(mCallbackManager, new FacebookCallback&lt;LoginResult&gt;() &#123; @Override public void onSuccess(LoginResult loginResult) &#123; LogUtils.d(&quot;facebook:onSuccess:&quot; + loginResult); handleFacebookAccessToken(loginResult.getAccessToken()); &#125; &#125; private void handleFacebookAccessToken(final AccessToken token) &#123; Log.d(TAG, &quot;handleFacebookAccessToken:&quot; + token.getUserId()); // [START_EXCLUDE silent] loadingProgressDialog = UIHelper.showLoading(mActivity, false, loadingProgressDialog); // [END_EXCLUDE] AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken()); FirebaseAuth.getInstance().signInWithCredential(credential) .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() &#123; @Override public void onComplete(@NonNull Task&lt;AuthResult&gt; task) &#123; if (task.isSuccessful()) &#123; // Sign in success, update UI with the signed-in user&apos;s information LogUtils.e(&quot;signInWithCredential:success&quot;); FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser(); LogUtils.e(user.getEmail()); LogUtils.e(user.getPhoneNumber()); LogUtils.e(user.getUid()); LogUtils.e(user.getPhotoUrl().toString()); LogUtils.e(user.getDisplayName()); String photoUrl = user.getPhotoUrl().toString() ; if (!TextUtils.isEmpty(photoUrl))&#123; photoUrl = photoUrl + &quot;?width=300&amp;height=300&quot;; &#125; IUserManager userManager = new IUserManager(-1, user.getEmail(), user.getDisplayName(), photoUrl, token.getUserId(), Common.LoginPlatform.facebookLoginPlatform); userManager.token = token.getToken(); thirdPlatFormLogin(userManager); LogUtils.e(user.toString());// updateUI(user); &#125; else &#123; // If sign in fails, display a message to the user. UIHelper.dismissLoading(loadingProgressDialog); String hint = UIUtils.getString(R.string.ActivityLogin_Authentication_Failed, Common.LoginPlatform.facebookLoginPlatform); ToastUtils.showShort(hint); Log.w(TAG, &quot;signInWithCredential:failure&quot;, task.getException());// Toast.makeText(mActivity, &quot;Authentication failed.&quot;,// Toast.LENGTH_SHORT).show();// updateUI(null); &#125; // [START_EXCLUDE]// hideProgressDialog(); // [END_EXCLUDE] &#125; &#125;); &#125; user.getUid() 是否 Firebase 的 正确获取方式token.getUserId()]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android 第三方登陆</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 第三方登陆 google]]></title>
    <url>%2F2018%2F09%2F03%2Fandroid%2FFeatures%2Fandroid%20%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86%20google%2F</url>
    <content type="text"><![CDATA[第三方登陆 google参考 google 控制台配置 参考]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android 第三方登陆</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android 第三方登陆 FaceBook]]></title>
    <url>%2F2018%2F09%2F03%2Fandroid%2FFeatures%2Fandroid%20%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86%20Facebook%E7%99%BB%E9%99%86%2F</url>
    <content type="text"><![CDATA[第三方登陆 FaceBook参考 Facebook 用户信息参考 Facebook 官方文档 很全]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android 第三方登陆</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dart 入门基础 函数与运算符]]></title>
    <url>%2F2018%2F08%2F26%2Fandroid%2FFlutter%2Fdart%2FDart%20%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%20%E5%87%BD%E6%95%B0%E4%B8%8E%E8%BF%90%E7%AE%97%E7%AC%A6%2F</url>
    <content type="text"><![CDATA[Dart 入门基础 函数与运算符函数基本语法123456789101112131415161718void main()&#123; printNameA(&quot;XiaoMing&quot;); printNameB(&quot;XiaoMing&quot;); printNameC(&quot;XiaoMing&quot;);&#125;// 规范语法void printNameA(String name)&#123; print(&quot;My name is $name.&quot;);&#125;// 通俗语法printNameB(name)&#123; print(&quot;My name is $name.&quot;);&#125;// 速写语法void printNameC(String name) =&gt; print(&quot;My name is $name.&quot;); 主函数main() 函数，作为程序的入口，返回值是void，还有一个可选参数1234void main(List&lt;String&gt; arguments) &#123; print(arguments); print(arguments.length);&#125; 可选参数命名参数123456789void main() &#123; printName(name:&quot;XiaoMing&quot;, age:14);&#125;// 用 &#123; &#125; 把参数包装起来，就能标识命名参数// 用 : 指定默认值void printName(&#123;String name, int age, String sex:&quot;female&quot;&#125;)&#123; print(&quot;My name is $name, $age years old, gender $sex.&quot;);&#125; 位置参数 1234567891011121314151617main(List&lt;String&gt; arguments) &#123; print(say(&quot;Bob&quot;, &quot;Howdy&quot;)); print(say(&quot;Bob&quot;, &quot;Howdy&quot;, &quot;smoke signal&quot;));&#125;// 用 [ ] 把参数包装起来，就能标识位置参数// 用 = 指定默认值String say(String from, String msg, [String device, String mood = &quot;good&quot;])&#123; String result = &quot;$from says $msg.&quot;; if (device != null) &#123; result = &quot;$result with a $device.&quot;; &#125; if (mood != null) &#123; result = &apos;$result (in a $mood mood)&apos;; &#125; return result;&#125; 高阶函数将函数作为参数传递给另一个函数 12345678void main() &#123; List list = [1, 2, 3]; list.forEach(printElement);&#125;printElement(element)&#123; print(element);&#125; 将一个函数分配给一个变量 1234void main() &#123; var loudify = (msg) =&gt; &quot;!!! $&#123;msg.toUpperCase()&#125; !!!&quot;; print(loudify(&quot;hello&quot;));&#125; 闭包dart的闭包就是函数对象，其实跟JavaScript的闭包函数差不多，理论请参考JavaScript的闭包函数 12345678910111213141516void main() &#123; // 创建一个函数add2，返回加2 Function add2 = makeAdder(2); // 创建一个函数add4，返回加4 Function add4 = makeAdder(4); // 2 + 3 = 5 print(add2(3)); // 4 + 3 = 7 print(add4(3));&#125;// 返回一个函数对象，功能是返回累加的数字Function makeAdder(int addBy)&#123; return (int i) =&gt; addBy + i;&#125; 函数判断1234567891011121314151617181920212223242526272829void main() &#123; var x; // 比较高阶函数 x = foo; print(foo == x); // 比较静态方法 x = SomeClass.bar; print(SomeClass.bar == x); // 比较实例方法 var v = new SomeClass(); var w = new SomeClass(); var y = w; x = w.baz; print(y.baz == x); print(v.baz != w.baz);&#125;// 一个高阶函数foo()&#123;&#125;class SomeClass&#123; // 一个静态方法 static void bar()&#123;&#125; // 一个实例方法 void baz()&#123;&#125;&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dart 入门基础 集合]]></title>
    <url>%2F2018%2F08%2F26%2Fandroid%2FFlutter%2Fdart%2FDart%20%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%20%E9%9B%86%E5%90%88%2F</url>
    <content type="text"><![CDATA[Dart 入门基础 集合Dart核心库提供了List（列表）、Map（映射）、Set（集）三种集合类型 List（列表）固定长度的列表，一旦定义就无法改变长度 1234List&lt;int&gt; fixedLengthList = new List(5);fixedLengthList[0] = 87;print(fixedLengthList);print(fixedLengthList[0]); 可改变长度的列表，可以根据需要改变长度 1234567891011List&lt;int&gt; growableList = [1, 2];print(growableList);growableList.length = 0;print(growableList);growableList.add(499);print(growableList);growableList[0] = 87;print(growableList); 构造函数List([int length])123456789101112// 创建固定长度的列表List fixedLengthList = new List(3);print(fixedLengthList.length);// 创建可改变长度的列表List growableListA = new List();print(growableListA.length);growableListA.length = 3;print(growableListA.length);// 创建可在固定范围内改变长度的列表List growableListB = new List()..length = 500; List.unmodifiable(Iterable elements)123// 创建包含所有元素的固定长度列表List fixedLengthListB = new List.unmodifiable([1, 2, 3]);print(fixedLengthListB.length); List.from(Iterable elements, {bool growable: true})12345// 创建包含所有元素的可改变长度列表List growableListC = new List.from([1, 2, 3]);print(growableListC.length);growableListC.add(4);print(growableListC.length); List.filled(int length, E fill, {bool growable: false})123// 为所有元素统一赋值List fixedLengthList = new List&lt;int&gt;.filled(3, 0);print(fixedLengthList); List.generate(int length, E generator(int index), {bool growable: true})12345// 用生成器给所有元素赋初始值List fixedLengthList = new List&lt;int&gt;.generate(4, (int index) &#123; return index * index;&#125;);print(fixedLengthList); 所有属性1234567891011121314151617181920212223List fixedLengthList = new List&lt;int&gt;.generate(4, (int index) &#123; return index * index;&#125;);// 返回第一个元素print(fixedLengthList.first);// 返回最后一个元素print(fixedLengthList.last);// 返回列表的哈希码print(fixedLengthList.hashCode);// 列表是否为空print(fixedLengthList.isEmpty);// 列表是否不为空print(fixedLengthList.isNotEmpty);// 返回一个新的迭代器print(fixedLengthList.iterator);// 列表中多少个元素print(fixedLengthList.length);// 返回相反顺序的列表print(fixedLengthList.reversed);// 返回对象运行时的类型print(fixedLengthList.runtimeType);// 列表是否只有一个元素，则否报错print(fixedLengthList.single); 常用方法返回多种类型的输出123456789List growableList = new List.from([1, 2, 3]);// 返回列表的字符串表示print(growableList.toString());// 返回列表的集表示print(growableList.toSet());// 返回列表的列表表示print(growableList.toList());// 用指定字符连接列表元素print(growableList.join(&quot;,&quot;)); 给列表增加元素12345678910111213List growableList = new List();// 增加一个元素到列表末尾growableList.add(10);print(growableList);// 增加一个元素到指定下标growableList.insert(1, 20);print(growableList);// 增加一个列表到列表末尾growableList.addAll([30, 60]);print(growableList);// 增加一个列表到指定下标growableList.insertAll(3, [40, 50]);print(growableList); 各种删除操作的方法123456789101112131415161718192021222324252627282930313233343536373839List growableList = new List.from([1, 2, 3, 3, 3, 4]);// 移除列表中匹配的第一个元素growableList.remove(3);print(growableList);// 移除列表中第几个元素growableList.removeAt(0);print(growableList);// 移除列表中最后一个元素growableList.removeLast();print(growableList);// 移除列表的所有元素growableList.clear();print(growableList);List&lt;int&gt; listB = [1, 2, 3, 4, 5];// 移除开始下标（不包括）至结束下标（包括）内的元素listB.removeRange(1, 4);print(listB);List&lt;int&gt; listA = [1, 2, 3, 4, 5];// 移除并替换开始下标（不包括）至结束下标（包括）内的元素listA.replaceRange(1, 4, [6, 7]);print(listA);List&lt;String&gt; numbersA = [&apos;one&apos;, &apos;two&apos;, &apos;three&apos;, &apos;four&apos;];/* 移除所有满足条件的元素，此为Dart的一种速写语法 numbersA.removeWhere((item) =&gt; item.length == 3); */numbersA.removeWhere((item)&#123; return item.length == 3;&#125;);print(numbersA);List&lt;String&gt; numbersB = [&apos;one&apos;, &apos;two&apos;, &apos;three&apos;, &apos;four&apos;];/* 移除所有不满足条件的元素，此为Dart的一种速写语法 numbersB.retainWhere((item) =&gt; item.length == 3); */numbersB.retainWhere((item)&#123; return item.length == 3;&#125;);print(numbersB); 按顺序迭代列表1234List&lt;String&gt; names = [&quot;Alice&quot;, &quot;Daphne&quot;, &quot;Elizabeth&quot;, &quot;Joanna&quot;];names.forEach((name)&#123; print(name);&#125;); 各种查询输出方法123456789101112131415List&lt;String&gt; names = [&apos;Abbey&apos;, &apos;Fallon&apos;, &apos;Xenia&apos;, &apos;Callie&apos;, &apos;Callie&apos;];// 列表中是否包含指定元素print(names.contains(&apos;Fallon&apos;));// 返回列表中的第几个元素print(names.elementAt(2));// 返回列表中第一个匹配元素的下标print(names.indexOf(&apos;Callie&apos;));// 返回列表中最后一个匹配元素的下标print(names.lastIndexOf(&apos;Callie&apos;));List&lt;String&gt; colors = [&apos;red&apos;, &apos;green&apos;, &apos;blue&apos;, &apos;orange&apos;, &apos;pink&apos;];// 返回从开始下标（包括）到结束下标（不包括）元素的列表print(colors.sublist(1, 3));// 返回从开始下标（包括）到最后一个元素的列表print(colors.sublist(1)); 对列表元素做一些改动1234567891011121314List&lt;String&gt; listA = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];// 从第几个元素开始覆盖原列表listA.setAll(1, [&apos;bee&apos;, &apos;sea&apos;]);print(listA);List&lt;int&gt; listB = [1, 2, 3, 4, 5];// 对列表进行随机排序listB.shuffle();print(listB);List&lt;int&gt; listC = [1, 2, 3, 4, 5];// 对列表进行顺序排序listC.sort();print(listC); Map（映射）映射也就是键值对，每个键都有与之相关联的一个值 构造函数Map()12Map&lt;String, int&gt; map = &#123;&quot;a&quot;:1, &quot;b&quot;:2, &quot;c&quot;:3&#125;;print(map[&quot;a&quot;]); Map.fromIterable(Iterable iterable, {K key(element), V value(element)})123456789List&lt;int&gt; list = [1, 2, 3];// 以下代码用到了速写语法，后面会详细讲解Map&lt;String, int&gt; map = new Map.fromIterable(list, key: (item) =&gt; item.toString(), value: (item) =&gt; item * item);// 1 + 4 = 5print(map[&apos;1&apos;] + map[&apos;2&apos;]);// 9 - 4 = 5print(map[&apos;3&apos;] - map[&apos;2&apos;]); Map.fromIterables(Iterable keys, Iterable values)12345List&lt;String&gt; letters = [&apos;b&apos;, &apos;c&apos;];List&lt;String&gt; words = [&apos;bad&apos;, &apos;cat&apos;];Map&lt;String, String&gt; map = new Map.fromIterables(letters, words);// bad + cat = badcatprint(map[&apos;b&apos;] + map[&apos;c&apos;]); 所有属性123456789101112131415Map&lt;String, int&gt; map = &#123;&quot;a&quot;:1, &quot;b&quot;:2, &quot;c&quot;:3&#125;;// 返回映射的哈希码print(map.hashCode);// 映射上是否没有键值对print(map.isEmpty);// 映射上是否有键值对print(map.isNotEmpty);// 返回映射的所有键print(map.keys);// 返回映射的所有值print(map.values);// 返回映射上键值对的数目print(map.length);// 返回对象运行时的类型print(map.runtimeType); 常用方法1234567891011121314151617181920212223242526Map&lt;String, int&gt; map = &#123;&quot;a&quot;:1, &quot;b&quot;:2, &quot;c&quot;:3&#125;;// 返回映射的字符串表示print(map.toString());// 按顺序迭代映射map.forEach((key, value)&#123; print(key + &quot; : &quot; + value.toString());&#125;);// 添加其他键值对到映射中map.addAll(&#123;&quot;d&quot;:4, &quot;e&quot;:5&#125;);// 映射是否包含指定键print(map.containsKey(&quot;d&quot;));// 映射是否包含指定值print(map.containsValue(5));// 删除指定键值对map.remove(&quot;a&quot;);// 删除所有键值对map.clear();Map&lt;String, int&gt; scores = &#123;&apos;Bob&apos;: 36&#125;;for (var key in [&apos;Bob&apos;, &apos;Rohan&apos;, &apos;Sophena&apos;]) &#123; // 查找指定键，如果不存在就添加 scores.putIfAbsent(key, () =&gt; key.length);&#125;print(scores[&apos;Bob&apos;]);print(scores[&apos;Rohan&apos;]);print(scores[&apos;Sophena&apos;]); Set（集）集的每个对象只能出现一次，不能重复 1234Set villains = new Set();villains.add(&apos;Joker&apos;);villains.addAll( [&apos;Lex Luther&apos;, &apos;Voldemort&apos;] );print(villains); 所有属性12345678910111213141516171819Set villains = new Set.from([&apos;Joker&apos;, &apos;Lex Luther&apos;, &apos;Voldemort&apos;]);// 返回第一个元素print(villains.first);// 返回最后一个元素print(villains.last);// 返回元素的数量print(villains.length);// 集只有一个元素就返回元素，否则异常//print(villains.single);// 集是否没有元素print(villains.isEmpty);// 集是否有元素print(villains.isNotEmpty);// 返回集的哈希码print(villains.hashCode);// 返回对象运行时的类型print(villains.runtimeType);// 返回集的可迭代对象print(villains.iterator); 常用方法123456789101112131415161718192021222324Set villains = new Set.from([&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]);// 添加一个值villains.add(&quot;D&quot;);print(villains);// 添加一些值villains.addAll([&quot;E&quot;, &quot;F&quot;]);print(villains);// 以字符串输出集print(villains.toString());// 将集的值用指定字符连接，以字符串输出print(villains.join(&quot;,&quot;));// 集是否包含指定值print(villains.contains(&quot;C&quot;));// 集是否包含一些值print(villains.containsAll([&quot;E&quot;, &quot;F&quot;]));// 返回集的第几个值print(villains.elementAt(1));// 删除集的指定值，成功则返回trueprint(villains.remove(&quot;A&quot;));// 删除集的一些值villains.removeAll([&quot;B&quot;, &quot;C&quot;]);// 删除集的所有值villains.clear();]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dart 入门基础 正则表达式]]></title>
    <url>%2F2018%2F08%2F26%2Fandroid%2FFlutter%2Fdart%2FDart%20%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[Dart 入门基础 正则表达式部分属性1234567891011RegExp exp = new RegExp(r&quot;(\w+)&quot;);// 返回正则表达式的哈希码print(exp.hashCode);// 正则表达式是否区分大小写print(exp.isCaseSensitive);// 正则表达式是否匹配多行print(exp.isMultiLine);// 返回源正则表达式字符串print(exp.pattern);// 返回对象运行时的类型print(exp.runtimeType); 常用方法12345678910111213RegExp exp = new RegExp(r&quot;(\w+)&quot;);// 返回正则表达式匹配项的可迭代对象print(exp.allMatches(&quot;abc def ghi&quot;));// 搜索并返回第一个匹配项，没有则返回nullprint(exp.firstMatch(&quot;&quot;));// 正则表达式是否找到匹配项print(exp.hasMatch(&quot;as&quot;));// 从第几个字符开始匹配正则表达式print(exp.matchAsPrefix(&quot;ab cd&quot;, 3));// 返回正则表达式的第一个匹配字符串print(exp.stringMatch(&quot;abc de&quot;));// 返回正则表达式的字符串表示print(exp.toString()); 例子验证邮政编码的正则，返回是否匹配的布尔值 12RegExp postalcode = new RegExp(r&apos;(\d&#123;6&#125;)&apos;);print(postalcode.hasMatch(&quot;518000&quot;)); 验证手机号码的正则，以Iterable&lt; Match &gt;返回所有匹配项 123456RegExp mobile = new RegExp(r&quot;(0|86|17951)?(13[0-9]|15[0-35-9]|17[0678]|18[0-9]|14[57])[0-9]&#123;8&#125;&quot;);Iterable&lt;Match&gt; mobiles = mobile.allMatches(&quot;13812345678 12345678901 17012345678&quot;);for (Match m in mobiles) &#123; String match = m.group(0); print(match);&#125; 验证网址URL的正则，如果匹配成功以Match返回匹配项，否则返回null 12RegExp url = new RegExp(r&quot;^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+&quot;);print(url.firstMatch(&quot;http://www.google.com&quot;)); 验证身份证号码的正则，返回第一个匹配的字符串 12RegExp identity = new RegExp(r&quot;\d&#123;17&#125;[\d|x]|\d&#123;15&#125;&quot;);print(identity.stringMatch(&quot;My id number is 35082419931023527x&quot;));]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dart 入门基础 基础类型]]></title>
    <url>%2F2018%2F08%2F26%2Fandroid%2FFlutter%2Fdart%2FDart%20%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%20%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[dart 语言 https://www.dartlang.org Dart 入门基础 基础类型变量 Variables12345 var name = &apos;Bob&apos;;// dynamic name = &apos;Bob&apos;;// Object name = &apos;Bob&apos;;// name = new Object(); 常量 Final and const12345678910111213final name = &apos;Bob&apos;; // Without a type annotationfinal String nickname = &apos;Bobby&apos;;const bar = 1000000; // Unit of pressure (dynes/cm2)const double atm = 1.01325 * bar; // Standard atmosphere var foo = const [1]; final bar = const [1,2,3]; const baz = const [5]; // Equivalent to `const []` Built-in types numbers strings booleans lists (also known as arrays) maps runes (for expressing Unicode characters in a string) symbols Numbers int double 12345int x = 1;int hex = 0xDEADBEEF;double y = 1.1;double exponents = 1.42e5; 数字与布尔值部分属性12345678910111213141516171819202122232425262728293031323334353637int figureA = -93;// figureA是否为负数print(figureA.isNegative);// figureA是否是有限的print(figureA.isFinite);// figureA是否正无穷大或负无穷大print(figureA.isInfinite);double figureB = 64.742;// 返回figureB的符号，-1.0:值小于0、+1.0:值大于0、-0.0/0.0/NaN:值是其本身print(figureB.sign);// 返回figureB运行时的类型print(figureB.runtimeType);// 返回figureB的哈希码print(figureB.hashCode);int figureC = 13;// figureC是否为奇数print(figureC.isOdd);// figureC是否为偶数print(figureC.isEven);// 返回figureC所占存储位print(figureC.bitLength); 常用方法12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849int figureA = -93;// 返回figureA的绝对值print(figureA.abs());// 返回figureA的字符串print(figureA.toString());double figureB = 64.742;// 返回figureB的整数值print(figureB.toInt());// 返回figureB的双精度值print(figureB.toDouble());// 返回大于figureB的双精度值print(figureB.ceilToDouble());// 返回小于figureB的双精度值print(figureB.floorToDouble());// 返回figureB四舍五入的双精度值print(figureB.roundToDouble());// 返回figureB保留几位小数的字符串print(figureB.toStringAsFixed(2));// 返回figureB保留几位小数后精确结果的字符串print(figureB.toStringAsPrecision(3));int figureC = 31;// figureC对比其他整数，0:相同、1:大于、-1:小于print(figureC.compareTo(20));// 将figureC控制在指定区间的整数print(figureC.clamp(20, 25));// 返回figureC转换成指定基数(进制)的字符串print(figureC.toRadixString(16));int figureD = 12;// 返回figureD与其他整数的最大公约数print(figureD.gcd(18));// 返回figureDg与其他整数的截取余数print(figureD.remainder(18));// 返回figureD几次幂值的字符串print(figureD.toStringAsExponential(2)); 字符串常量与变量字符串常量String是一成不变的，一旦定义就不能改变 1234567String name = &quot;XiaoMing say : \n&quot;;String say = &quot;&quot;&quot;Keep on going ...never give up ...never say die ...&quot;&quot;&quot;;print(name + say); 部分属性123456789101112131415String str = &quot;Hello world!&quot;;// 返回字符串的UTF-16代码单元列表print(str.codeUnits);// 返回根据代码单元生成的哈希码print(str.hashCode);// 字符串是否为空print(str.isEmpty);// 字符串是否不为空print(str.isNotEmpty);// 字符串的长度print(str.length);// 返回字符串Unicode代码的可迭代对象print(str.runes);// 返回对象运行时的类型print(str.runtimeType); 常用方法返回对象的字符串表示 12String str = &quot;Hello world!&quot;;print(str.toString()); 截取字符串123String str = &apos;Dart is fun&apos;;String newStr = str.substring(0, 4);print(newStr); 在字符串中插入字符串12String name = &quot;XiaoMing&quot;;print(&quot;My name is $&#123;name&#125;&quot;); 输出字符串的Unicode编码123String str = &quot;Dart&quot;;print(str.codeUnitAt(0));print(str.codeUnits); 去掉字符串前后空格1234String str = &quot;\tDart is fun\n&quot;;print(str.trimLeft());print(str.trimRight());print(str.trim()); 字符串的大小写转换123String str = &quot;ABCdef&quot;;print(str.toLowerCase());print(str.toUpperCase()); 拆分字符串12345String strA = &quot;Hello world!&quot;;print(strA.split(&quot; &quot;));String strB = &quot;abba&quot;;print(strB.split(new RegExp(r&quot;b*&quot;))); 是否包含其他字符串12345String str = &apos;Dart strings&apos;;print(str.contains(&apos;D&apos;));print(str.contains(new RegExp(r&apos;[A-Z]&apos;)));print(str.contains(&apos;D&apos;, 0));print(str.contains(new RegExp(r&apos;[A-Z]&apos;), 0)); 在字符串前后补占位符123String str = &quot;86&quot;;print(str.padLeft(4, &apos;0&apos;));print(str.padRight(4, &apos;0&apos;)); 获取指定字符出现的位置1234567String str = &apos;Dartisans&apos;;print(str.indexOf(&apos;art&apos;));print(str.indexOf(new RegExp(r&apos;[A-Z][a-z]&apos;)));print(str.lastIndexOf(&apos;a&apos;));print(str.lastIndexOf(new RegExp(r&apos;a(r|n)&apos;))); 替换字符串中所有匹配字符12String str = &quot;resume&quot;;print(str.replaceAll(new RegExp(r&apos;e&apos;), &apos;é&apos;)); 字符串变量StringBuffer是可改变的，定义后还可以再修改 1234StringBuffer xiaomingSaid = new StringBuffer();xiaomingSaid.write(&quot;All the world&apos;s a stage ... &quot;);xiaomingSaid.write(&quot;And all the men and women merely players ...&quot;);print(xiaomingSaid); 部分属性123456789101112StringBuffer strBuf = new StringBuffer();strBuf.write(&quot;Sow nothing, reap nothing.&quot;);// 返回字符串缓冲区的哈希码print(strBuf.hashCode);// 字符串缓冲区是否为空print(strBuf.isEmpty);// 字符串缓冲区是否不为空print(strBuf.isNotEmpty);// 返回字符串缓冲区累积内容的长度print(strBuf.length);// 返回对象运行时的类型print(runtimeType); 常用方法1234567StringBuffer strBuf = new StringBuffer();// 添加字符串到字符串缓冲区内strBuf.write(&quot;Do one thing at a time, and do well.&quot;);// 返回字符串缓冲区的所有内容print(strBuf.toString());// 清除字符串缓冲区strBuf.clear();]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 简介]]></title>
    <url>%2F2018%2F08%2F26%2Fandroid%2FFlutter%2FFlutter%20%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[FlutterFlutter 官网Flutter 中文网 Flutter是一款移动应用程序SDK，一份代码可以同时生成iOS和Android两个高性能、高保真的应用程序。 Flutter目标是使开发人员能够交付在不同平台上都感觉自然流畅的高性能应用程序。我们兼容滚动行为、排版、图标等方面的差异。 应用程序是用Dart语言编写的 Flutter优势 提高开发效率 同一份代码开发iOS和Android 用更少的代码做更多的事情 轻松迭代 在应用程序运行时更改代码并重新加载（通过热重载） 修复崩溃并继续从应用程序停止的地方进行调试 创建美观，高度定制的用户体验 受益于使用Flutter框架提供的丰富的Material Design和Cupertino（iOS风格）的widget 实现定制、美观、品牌驱动的设计，而不受原生控件的限制 参考]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 控件 Text]]></title>
    <url>%2F2018%2F08%2F24%2Fandroid%2FFlutter%2FFlutter%20%E6%8E%A7%E4%BB%B6%20Text%2F</url>
    <content type="text"><![CDATA[Flutter 控件 TextText 文本Text控件，是一个常用的控件，下面的实例有7个不同样式的文本控件 Properties type 含义 example width double 宽 width: 128.0 height double 高 height: 128.0 alignment AlignmentGeometry child Widget constraints BoxConstraints decoration Decoration foregroundDecoration Decoration margin EdgeInsetsGeometry padding EdgeInsetsGeometry transform Matrix4 demo 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879import &apos;package:flutter/material.dart&apos;;class ContainerDemo extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar( title: new Text(&apos;文本控件&apos;), ), body: new Column( children: &lt;Widget&gt;[ new Text( &apos;红色+黑色删除线+25号&apos;, style: new TextStyle( color: const Color(0xffff0000), decoration: TextDecoration.lineThrough, decorationColor: const Color(0xff000000), fontSize: 25.0, ), ), new Text( &apos;橙色+下划线+24号&apos;, style: new TextStyle( color: const Color(0xffff9900), decoration: TextDecoration.underline, fontSize: 24.0, ), ), new Text( &apos;虚线上划线+23号+倾斜&apos;, style: new TextStyle( decoration: TextDecoration.overline, decorationStyle: TextDecorationStyle.dashed, fontSize: 23.0, fontStyle: FontStyle.italic, ), ), new Text( &apos;serif字体+24号&apos;, style: new TextStyle( fontFamily: &apos;serif&apos;, fontSize: 26.0, ), ), new Text( &apos;monospace字体+24号+加粗&apos;, style: new TextStyle( fontFamily: &apos;monospace&apos;, fontSize: 24.0, fontWeight: FontWeight.bold, ), ), new Text( &apos;天蓝色+25号+2行跨度&apos;, style: new TextStyle( color: const Color(0xff4a86e8), fontSize: 25.0, height: 2.0, ), ), new Text( &apos;24号+2个字母间隔&apos;, style: new TextStyle( fontSize: 24.0, letterSpacing: 2.0, ), ), ] ), ); &#125;&#125;void main() &#123; runApp( new MaterialApp( title: &apos;Flutter教程&apos;, home: new ContainerDemo(), ), );&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 控件 Container]]></title>
    <url>%2F2018%2F08%2F24%2Fandroid%2FFlutter%2FFlutter%20%E6%8E%A7%E4%BB%B6%20Container%2F</url>
    <content type="text"><![CDATA[Flutter 控件 ContainerContainer的组成如下： 最里层的是child元素； child元素首先会被padding包着； 然后添加额外的constraints限制； 最后添加margin。 Container的绘制的过程如下： 首先会绘制transform效果； 接着绘制decoration； 然后绘制child； 最后绘制foregroundDecoration。 Container自身尺寸的调节分两种情况： Container在没有子节点（children）的时候，会试图去变得足够大。除非constraints是unbounded限制，在这种情况下，Container会试图去变得足够小。 带子节点的Container，会根据子节点尺寸调节自身尺寸，但是Container构造器中如果包含了width、height以及constraints，则会按照构造器中的参数来进行尺寸的调节。 Container 容器1234567891011121314Container(&#123; Key key, this.alignment, this.padding, Color color, Decoration decoration, this.foregroundDecoration, double width, double height, BoxConstraints constraints, this.margin, this.transform, this.child, &#125;) Properties 含义 Key Container唯一标识符，用于查找更新。 alignment 控制child的对齐方式，如果container或者container父节点尺寸大于child的尺寸，这个属性设置会起作用，有很多种对齐方式。 padding decoration内部的空白区域，如果有child的话，child位于padding内部。padding与margin的不同之处在于，padding是包含在content内，而margin则是外部边界，设置点击事件的话，padding区域会响应，而margin区域不会响应。 color 用来设置container背景色，如果foregroundDecoration设置的话，可能会遮盖color效果。 decoration 绘制在child后面的装饰，设置了decoration的话，就不能设置color属性，否则会报错，此时应该在decoration中进行颜色的设置。 foregroundDecoration 绘制在child前面的装饰。 width container的宽度，设置为double.infinity可以强制在宽度上撑满，不设置，则根据child和父节点两者一起布局。 height container的高度，设置为double.infinity可以强制在高度上撑满。 constraints 添加到child上额外的约束条件。 margin 围绕在decoration和child之外的空白区域，不属于内容区域。 transform 设置container的变换矩阵，类型为Matrix4。 child container中的内容widget。 demo 1234567891011121314151617181920212223import &apos;package:flutter/material.dart&apos;;class ContainerDemo extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new Center( child: new Container( width: 128.0, height: 128.0, decoration: new BoxDecoration( color: Colors.lightBlueAccent[100], ), ), ); &#125;&#125;void main() &#123; runApp( new MaterialApp( title: &apos;Flutter教程&apos;, home: new ContainerDemo(), ), );&#125; demo1 12345678910111213141516171819202122232425262728import &apos;package:flutter/material.dart&apos;;class ContainerDemo extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new Center( child: new Container( width: 300.0, height: 400.0, decoration: new BoxDecoration( color: const Color(0xfffce5cd), border: new Border.all( color: const Color(0xff6d9eeb), width: 3.0, ), ), child: new Text(&apos;容器演示&apos;), ), ); &#125;&#125;void main() &#123; runApp( new MaterialApp( title: &apos;Flutter教程&apos;, home: new ContainerDemo(), ), );&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter widgets]]></title>
    <url>%2F2018%2F08%2F24%2Fandroid%2FFlutter%2FFlutter%20wight%2F</url>
    <content type="text"><![CDATA[Flutter widgets- 有些widgets是有状态的, 有些是无状态的 - 如果用户与widget交互，widget会发生变化，那么它就是有状态的. - widget的状态（state）是一些可以更改的值, 如一个slider滑动条的当前值或checkbox是否被选中. - widget的状态保存在一个State对象中, 它和widget的布局显示分离。 - 当widget状态改变时, State 对象调用setState(), 告诉框架去重绘widget. stateless widget 没有内部状态. Icon、 IconButton, 和Text 都是无状态widget, 他们都是 StatelessWidget的子类。 stateful widget 是动态的. 用户可以和其交互 (例如输入一个表单、 或者移动一个slider滑块),或者可以随时间改变 (也许是数据改变导致的UI更新). Checkbox, Radio, Slider, InkWell, Form, and TextField 都是 stateful widgets, 他们都是 StatefulWidget的子类。 创建一个有状态的widget- 要创建一个自定义有状态widget，需创建两个类：StatefulWidget和State - 状态对象包含widget的状态和build() 方法。 - 当widget的状态改变时，状态对象调用setState()，告诉框架重绘widget 实现一个自定义的有状态widget需要创建两个类: 定义一个widget类，继承自StatefulWidget. 包含该widget状态并定义该widget build()方法的类，它继承自State. Step 1: 决定哪个对象管理widget的状态Widget的状态可以通过多种方式进行管理，但在我们的示例中，widget本身（FavoriteWidget）将管理自己的状态。 在这个例子中，切换星形图标是一个独立的操作，不会影响父窗口widget或其他用户界面，因此该widget可以在内部处理它自己的状态。 在管理状态中了解更多关于widget和状态的分离以及如何管理状态的信息。 Step 2: 创建StatefulWidget子类FavoriteWidget类管理自己的状态，因此它重写createState()来创建状态对象。 框架会在构建widget时调用createState()。在这个例子中，createState()创建_FavoriteWidgetState的实例，您将在下一步中实现该实例。 1234class FavoriteWidget extends StatefulWidget &#123; @override _FavoriteWidgetState createState() =&gt; new _FavoriteWidgetState();&#125; 注意: 以下划线（_）开头的成员或类是私有的。有关更多信息，请参阅Dart语言参考中的库和可见性部分 。 Step 3: 创建State子类自定义State类存储可变信息 - 可以在widget的生命周期内改变逻辑和内部状态。 当应用第一次启动时，用户界面显示一个红色实心的星星形图标，表明该湖已经被收藏，并有41个“喜欢”。状态对象存储这些信息在_isFavorited和_favoriteCount变量。 状态对象也定义了build方法。此build方法创建一个包含红色IconButton和Text的行。 该widget使用IconButton（而不是Icon）， 因为它具有一个onPressed属性，该属性定义了处理点击的回调方法。IconButton也有一个icon的属性，持有Icon。 按下IconButton时会调用_toggleFavorite()方法，然后它会调用setState()。 调用setState()是至关重要的，因为这告诉框架，widget的状态已经改变，应该重绘。 _toggleFavorite在: 1）实心的星形图标和数字“41” 和 2）虚心的星形图标和数字“40”之间切换UI。 12345678910111213141516171819202122232425262728293031323334353637383940414243class _FavoriteWidgetState extends State&lt;FavoriteWidget&gt; &#123; bool _isFavorited = true; int _favoriteCount = 41; void _toggleFavorite() &#123; setState(() &#123; // If the lake is currently favorited, unfavorite it. if (_isFavorited) &#123; _favoriteCount -= 1; _isFavorited = false; // Otherwise, favorite it. &#125; else &#123; _favoriteCount += 1; _isFavorited = true; &#125; &#125;); &#125; @override Widget build(BuildContext context) &#123; return new Row( mainAxisSize: MainAxisSize.min, children: [ new Container( padding: new EdgeInsets.all(0.0), child: new IconButton( icon: (_isFavorited ? new Icon(Icons.star) : new Icon(Icons.star_border)), color: Colors.red[500], onPressed: _toggleFavorite, ), ), new SizedBox( width: 18.0, child: new Container( child: new Text(&apos;$_favoriteCount&apos;), ), ), ], ); &#125;&#125; 案例二12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import &apos;package:flutter/material.dart&apos;;void main() &#123; runApp( new MaterialApp( title: &apos;Flutter实例&apos;, home: new Counter(), ), );&#125;class CounterDisplay extends StatelessWidget &#123; CounterDisplay(&#123;this.count&#125;); final int count; @override Widget build(BuildContext context) &#123; return new Center( child: new Text(&apos;按钮点击 $count 次&apos;), ); &#125;&#125;class CounterIncrementor extends StatelessWidget &#123; CounterIncrementor(&#123;this.onPressed&#125;); final VoidCallback onPressed; @override Widget build(BuildContext context) &#123; return new FloatingActionButton( onPressed: onPressed, tooltip: &apos;增加&apos;, child: new Icon(Icons.add), ); &#125;&#125;class Counter extends StatefulWidget &#123; @override _CounterState createState() =&gt; new _CounterState();&#125;class _CounterState extends State&lt;Counter&gt; &#123; int _count = 0; void _increment() &#123; setState( () &#123; _count += 1; &#125; ); &#125; @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar( title: new Text(&apos;Flutter实例&apos;), ), body: new CounterDisplay(count: _count), floatingActionButton: new CounterIncrementor(onPressed: _increment), ); &#125;&#125; 案例二 中 不同空间中状态 floatingActionButton 点击 点击次数增加CounterDisplay 中显示 点击 数量 所有 Counter 管理状态]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 手势交互]]></title>
    <url>%2F2018%2F08%2F24%2Fandroid%2FFlutter%2FFlutter%20%E6%89%8B%E5%8A%BF%E4%BA%A4%E4%BA%92%2F</url>
    <content type="text"><![CDATA[Flutter 手势交互参考 Pointers指针(Pointer)代表用户与设备屏幕交互的原始数据。有四种类型的指针事 PointerDownEvent 指针接触到屏幕的特定位置 PointerMoveEvent 指针从屏幕上的一个位置移动到另一个位置 PointerUpEvent 指针停止接触屏幕 PointerCancelEvent 指针的输入事件不再针对此应用（事件取消） 在指针按下时，框架对您的应用程序执行命中测试，以确定指针与屏幕相接的位置存在哪些widget。 指针按下事件（以及该指针的后续事件）然后被分发到由命中测试发现的最内部的widget。 从那里开始，这些事件会冒泡在widget树中向上冒泡，这些事件会从最内部的widget被分发到到widget根的路径上的所有小部件（译者语：这和web中事件冒泡机制相似）， 没有机制取消或停止冒泡过程(译者语：这和web不同，web中的时间冒泡是可以停止的)。 To listen to pointer events directly from the widgets layer, use a Listener widget. However, generally, consider using gestures (as discussed below) instead. 要直接从widget层监听指针事件，可以使用Listenerwidget。 但是，通常，请考虑使用手势（如下所述） 手势手势表示可以从多个单独的指针事件（甚至可能是多个单独的指针）识别的语义动作（例如，轻敲，拖动和缩放）。 完整的一个手势可以分派多个事件，对应于手势的生命周期（例如，拖动开始，拖动更新和拖动结束）： Tap onTapDown 指针已经在特定位置与屏幕接触 onTapUp 指针停止在特定位置与屏幕接触 onTap tap事件触发 onTapCancel 先前指针触发的onTapDown不会在触发tap事件 双击 onDoubleTap 用户快速连续两次在同一位置轻敲屏幕. 长按 onLongPress 指针在相同位置长时间保持与屏幕接触 垂直拖动 onVerticalDragStart 指针已经与屏幕接触并可能开始垂直移动 onVerticalDragUpdate 指针与屏幕接触并已沿垂直方向移动. onVerticalDragEnd 先前与屏幕接触并垂直移动的指针不再与屏幕接触，并且在停止接触屏幕时以特定速度移动 水平拖动 onHorizontalDragStart 指针已经接触到屏幕并可能开始水平移动 onHorizontalDragUpdate 指针与屏幕接触并已沿水平方向移动 onHorizontalDragEnd 先前与屏幕接触并水平移动的指针不再与屏幕接触，并在停止接触屏幕时以特定速度移动要从widget层监听手势，请使用 GestureDetector. 如果您使用的是Material Components，那么大多数widget已经对tap或手势做出了响应。 例如 IconButton和 FlatButton 响应presses（taps），ListView响应滑动事件触发滚动。 如果您不使用这些widget，但想要在点击时上出现“墨水飞溅”效果，可以使用InkWell。 手势消歧在屏幕上的指定位置，可能会有多个手势检测器。所有这些手势检测器在指针事件流经过并尝试识别特定手势时监听指针事件流。 GestureDetectorwidget决定是哪种手势。 当屏幕上给定指针有多个手势识别器时，框架通过让每个识别器加入一个“手势竞争场”来确定用户想要的手势。“手势竞争场”使用以下规则确定哪个手势胜出 在任何时候，识别者都可以宣布失败并离开“手势竞争场”。如果在“竞争场”中只剩下一个识别器，那么该识别器就是赢家 在任何时候，识别者都可以宣布胜利，这会导致胜利，并且所有剩下的识别器都会失败 例如，在消除水平和垂直拖动的歧义时，两个识别器在接收到指针向下事件时进入“手势竞争场”。识别器观察指针移动事件。 如果用户将指针水平移动超过一定数量的逻辑像素，则水平识别器将声明胜利，并且手势将被解释为水平拖拽。 类似地，如果用户垂直移动超过一定数量的逻辑像素，垂直识别器将宣布胜利。 当只有水平（或垂直）拖动识别器时，“手势竞争场”是有益的。在这种情况下，“手势竞争场”将只有一个识别器，并且水平拖动将被立即识别，这意味着水平移动的第一个像素可以被视为拖动，用户不需要等待进一步的手势消歧。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798import &apos;package:flutter/material.dart&apos;;void main() &#123; runApp(new MaterialApp( title: &apos;Flutter教程&apos;, home: new MyButton(), ));&#125;class MyButton extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new GestureDetector( //Tap // onTapDown 指针已经在特定位置与屏幕接触 onTapDown: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onTapDown&apos; + tapDownDetails.toString()); &#125;, // onTapUp 指针停止在特定位置与屏幕接触 onTapUp: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onTapUp&apos; + tapDownDetails.toString()); &#125;, // onTap tap事件触发 onTap: () &#123; print(&apos;MyButton被监听了！ onTap&apos;); &#125;, // onTapCancel 先前指针触发的onTapDown不会在触发tap事件 onTapCancel: () &#123; print(&apos;MyButton被监听了！ onTapCancel&apos;); &#125;,// 双击// onDoubleTap 用户快速连续两次在同一位置轻敲屏幕. onDoubleTap: () &#123; print(&apos;MyButton被监听了！ onDoubleTap&apos;); &#125;, // 长按 // onLongPress 指针在相同位置长时间保持与屏幕接触 onLongPress: () &#123; print(&apos;MyButton被监听了！ onLongPress&apos;); &#125;,// 垂直拖动// onVerticalDragStart 指针已经与屏幕接触并可能开始垂直移动 onVerticalDragStart: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onVerticalDragStart&apos;); &#125;,// onVerticalDragUpdate 指针与屏幕接触并已沿垂直方向移动. onVerticalDragUpdate: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onVerticalDragUpdate&apos;); &#125;,// onVerticalDragEnd 先前与屏幕接触并垂直移动的指针不再与屏幕接触，并且在停止接触屏幕时以特定速度移动 onVerticalDragEnd: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onVerticalDragEnd&apos;); &#125;,// 水平拖动// onHorizontalDragStart 指针已经接触到屏幕并可能开始水平移动 onHorizontalDragStart: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onHorizontalDragStart&apos;); &#125;,// onHorizontalDragUpdate 指针与屏幕接触并已沿水平方向移动 onHorizontalDragUpdate: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onHorizontalDragUpdate&apos;); &#125;,// onHorizontalDragEnd 先前与屏幕接触并水平移动的指针不再与屏幕接触，并在停止接触屏幕时以特定速度移动 onHorizontalDragEnd: (tapDownDetails) &#123; print(&apos;MyButton被监听了！ onHorizontalDragEnd&apos;); &#125;, child: new Container( height: 36.0, padding: const EdgeInsets.all(8.0), margin: const EdgeInsets.symmetric(horizontal: 8.0), decoration: new BoxDecoration( borderRadius: new BorderRadius.circular(5.0), color: Colors.lightGreen[500], ), child: new Center( child: new Text(&apos;点击监听&apos;), ), ), ); &#125;&#125; Log 1234567891011121308-24 16:18:00.106 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragUpdate08-24 16:18:00.189 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragUpdate08-24 16:18:00.199 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragEnd08-24 16:25:52.034 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onTapCancel08-24 16:25:52.038 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragStart MyButton被监听了！ onVerticalDragUpdate08-24 16:25:52.134 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragUpdate08-24 16:25:52.145 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragEnd08-24 16:25:52.789 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onTapCancel08-24 16:25:52.793 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragStart MyButton被监听了！ onVerticalDragUpdate08-24 16:25:52.881 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragUpdate08-24 16:25:52.891 15230-15255/com.yourcompany.flutterdemo I/flutter: MyButton被监听了！ onVerticalDragEnd]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 目录]]></title>
    <url>%2F2018%2F08%2F24%2Fandroid%2FFlutter%2FFlutter%E7%9B%AE%E5%BD%95%2F</url>
    <content type="text"><![CDATA[Flutter 目录1 Flutter 简介 1 Flutter 简介 2 Dart 入门基础 2.1 Dart 入门基础 基础类型 2.2 Dart 入门基础 正则表达式 2.3 Dart 入门基础 集合 2.4 Dart 入门基础 函数与运算符 1 Flutter 环境配置 1.1 Flutter 环境配置 2 Flutter 基础 2.1 创建app 2.2 使用使用外部包 3 Native项目 集成 Flutter 运营平台广告优惠券]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 国际化]]></title>
    <url>%2F2018%2F08%2F19%2Fandroid%2FFlutter%2Fandroid%20Flutter%20%E5%9B%BD%E9%99%85%E5%8C%96%2F</url>
    <content type="text"><![CDATA[android Flutter 国际化国际化 Flutter 应用 一 本地环境配置1. 下载1.1 下载压缩包flutter_macos_v0.3.1-beta.zip 解压即可 1.2 git 下载如果你是第一次在你机器上安装 Flutter ，克隆 beta 分支的仓库然后添加 flutter 工具到你的路径 git clone -b beta https://github.com/flutter/flutter.git export PATH=`pwd`/flutter/bin:$PATH 2. 设置环境变量.bash_profile中添加 以下代码 [PATH_TO_FLUTTER_GIT_DIRECTORY] 为本地路径 export PATH=[PATH_TO_FLUTTER_GIT_DIRECTORY]/flutter/bin:$PATH 刷新 文件 source $HOME/.bash_profile check wherther the installation is successful flutter doctor 二 工具 环境配置1. android Studio 环境配置参考 官方文档https://flutter.io/get-started/editor/#androidstudio android Studio 安装 flutter 插件(Plugins &gt; Browserepositories &gt; 搜索 Flutter 选择安装) 安装完成出出现Start a new Flutter project创建 Flutter项目 2. IOS 环境配置mac 中 安装 Xcode命令行sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer sudo xcodebuild -license 创建ios模拟器open -a Simulator 3. idea 环境配置idea 可以运行 android IOS 平台先安装插件 Filtter 重启idea 创建项目选择Flutter运行 三 问题1 idea Please configure Android SDKhttps://stackoverflow.com/questions/21070268/intellij-idea-13-error-please-select-android-sdk 2 idea Dart SDK is not configured下载https://www.dartlang.org/tools/sdk/archive 配置 运行成功]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 编译正式版本]]></title>
    <url>%2F2018%2F08%2F18%2Fandroid%2FFlutter%2FFlutter%20android%E7%BC%96%E8%AF%91%E6%AD%A3%E5%BC%8F%E7%89%88%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[android Flutter 编译正式版本参考 检查应用的 Manifest 清单目录 &lt;app dir&gt;/android/app/src/main/AndroidManifest.xml 检测信息 1. application 中 图标 名称2. 权限 uses-permission3. 包名 版本号gradle 配置目录 &lt;app dir&gt;/android/app/ 检测信息 1. defaultConfig 中 applicationId2. versionCode &amp; versionName3. minSdkVersion &amp; targetSdkVersion签名1. 创建 keystore 证书可以使用android studio 创建签名 也可以使用命令行创建签名 keytool -genkey -v -keystore ~/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias key 2. 配置签名创建证书引用的配置文件 key.properties &lt;app dir&gt;/android/key.properties storePassword=&lt;上一步中输入的 store 密码&gt; keyPassword=&lt;上一步中输入的 key 密码&gt; keyAlias=key storeFile=&lt;keystore 文件的位置， 例如： /Users/&lt;user name&gt;/key.jks&gt; 编辑您应用的 &lt;app dir&gt;/android/app/build.gradle 文件以配置签名选项 替换: android { 为您包含证书引用的配置文件: def keystorePropertiesFile = rootProject.file(&quot;key.properties&quot;) def keystoreProperties = new Properties() keystoreProperties.load(new FileInputStream(keystorePropertiesFile)) android { 替换: buildTypes { release { // TODO: Add your own signing config for the release build. // Signing with the debug keys for now, so `flutter run --release` works. signingConfig signingConfigs.debug } } 为如下内容: signingConfigs { release { keyAlias keystoreProperties[&apos;keyAlias&apos;] keyPassword keystoreProperties[&apos;keyPassword&apos;] storeFile file(keystoreProperties[&apos;storeFile&apos;]) storePassword keystoreProperties[&apos;storePassword&apos;] } } buildTypes { release { signingConfig signingConfigs.release } } 这样一来，当您的应用构建 Release 版本时就会自动签名。 编译release 版应用在命令行使用: cd &lt;app dir&gt; (用您应用工程的根目录替换 &lt;app dir&gt; )。 运行 flutter build apk (flutter build 命令默认使用 --release)。 您应用的 release 版本的 APK 会生成在 /build/app/outputs/apk/app-release.apk。]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Features 点击空白区域隐藏键盘]]></title>
    <url>%2F2018%2F08%2F07%2Fandroid%2FFeatures%2F%E7%82%B9%E5%87%BB%E7%A9%BA%E7%99%BD%E5%8C%BA%E5%9F%9F%E9%9A%90%E8%97%8F%E9%94%AE%E7%9B%98%2F</url>
    <content type="text"><![CDATA[点击空白区域隐藏键盘在 BaseActivity 添加 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/** * 点击空白区域隐藏键盘. */@Overridepublic boolean dispatchTouchEvent(MotionEvent ev) &#123; if (ev.getAction() == MotionEvent.ACTION_DOWN) &#123; //把操作放在用户点击的时候 View v = getCurrentFocus(); //得到当前页面的焦点,ps:有输入框的页面焦点一般会被输入框占据 if (isShouldHideKeyboard(v, ev)) &#123; //判断用户点击的是否是输入框以外的区域 hideKeyboard(v.getWindowToken()); //收起键盘 &#125; &#125; return super.dispatchTouchEvent(ev);&#125;/** * 根据EditText所在坐标和用户点击的坐标相对比，来判断是否隐藏键盘，因为当用户点击EditText时则不能隐藏 * * @param v * @param event * @return */private boolean isShouldHideKeyboard(View v, MotionEvent event) &#123; if (v != null &amp;&amp; (v instanceof EditText)) &#123; //判断得到的焦点控件是否包含EditText int[] l = &#123;0, 0&#125;; v.getLocationInWindow(l); int left = l[0], //得到输入框在屏幕中上下左右的位置 top = l[1], bottom = top + v.getHeight(), right = left + v.getWidth(); if (event.getX() &gt; left &amp;&amp; event.getX() &lt; right &amp;&amp; event.getY() &gt; top &amp;&amp; event.getY() &lt; bottom) &#123; // 点击位置如果是EditText的区域，忽略它，不收起键盘。 return false; &#125; else &#123; return true; &#125; &#125; // 如果焦点不是EditText则忽略 return false;&#125;/** * 获取InputMethodManager，隐藏软键盘 * @param token */private void hideKeyboard(IBinder token) &#123; if (token != null) &#123; InputMethodManager im = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); im.hideSoftInputFromWindow(token, InputMethodManager.HIDE_NOT_ALWAYS); &#125;&#125; 安卓开发 自定义软键盘 从原理到应用 可更改个别键颜色等]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android Features</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Snap Setings]]></title>
    <url>%2F2018%2F07%2F11%2FWork%2FSnap%20SettingUI%E6%96%87%E6%A1%A3%2F</url>
    <content type="text"><![CDATA[Snap 设置 UI文档Settings 主页面 Subscription 1 文字显示 private void showSubscriptionNewMsg() { String paymentPrice; String paymentEndTime; if (DeviceHelper.getInstance().getSettingsDevice().getIsPaymentService() &gt; 0) { //付费 项目 bottom - V 价格 - V plan - V // plan - V mSubscription_TxtCurrentPlan.setVisibility(View.VISIBLE); String result = &quot;&quot;; int schemeType = DeviceHelper.getInstance().getSettingsDevice().getSchemeType(); switch (schemeType) { case 10: //用户控制 审核显示 result = &quot;&quot;;//????? break; case 0: result = &quot;Free Trial&quot;; break; case 1: result = &quot;7-day Cloud Plan&quot;; break; case 2: result = &quot;30-day Cloud Plan&quot;; break; case 3: result = &quot;2-day Cloud Plan&quot;; break; case 4: result = &quot;1-day Cloud Plan&quot;; // 4 澳洲 1天 break; default: break; } if (TextUtils.isEmpty(result)) { // 不限制 影藏 mSubscriptionLayout.setVisibility(View.GONE); } else { mSubscription_TxtCurrentPlan.setText(result); } // 价格 - V paymentPrice = DeviceHelper.getInstance().getSettingsDevice().getPaymentPrice() + UIUtils.getString(R.string.monthly); mSubscription_TxtCurrentPlanRight.setText(paymentPrice); mSubscription_TxtCurrentPlanRight.setVisibility(View.VISIBLE); // bottom - V if (DeviceHelper.getInstance().getSettingsDevice().getPaymentIsAutoRenewal() &gt; 0) { //自动续费 paymentEndTime = UIUtils.getString(R.string.NextRenewal) + getDate(DeviceHelper.getInstance().getSettingsDevice().getPaymentEndTime()); } else { paymentEndTime = UIUtils.getString(R.string.Expires) + getDate(DeviceHelper.getInstance().getSettingsDevice().getPaymentEndTime()); } mSubscription_TxtCurrentPlanBottom.setText(paymentEndTime); mSubscription_TxtCurrentPlanBottom.setVisibility(View.VISIBLE); } else if (DeviceHelper.getInstance().getSettingsDevice().getIsFreeTrail() &gt; 0) { //免费 bottom - Expires 价格 - Gone plan - Free Trial // bottom - Expires mSubscription_TxtCurrentPlanBottom.setText(UIUtils.getString(R.string.Expires) + getDate(DeviceHelper.getInstance().getSettingsDevice().getPaymentEndTime())); mSubscription_TxtCurrentPlanBottom.setVisibility(View.VISIBLE); // 价格 mSubscription_TxtCurrentPlanRight.setVisibility(View.GONE); // plan - Free Trial mSubscription_TxtCurrentPlan.setText(&quot;Free Trial&quot;); mSubscription_TxtCurrentPlan.setVisibility(View.VISIBLE); } else { // 无可以使用 云服务 bottom - gone 价格 - 0.00 plan - Basic cloud plan // 价格 paymentPrice = &quot;0.00&quot;; mSubscription_TxtCurrentPlanRight.setText(paymentPrice); mSubscription_TxtCurrentPlanRight.setVisibility(View.VISIBLE); //plan - Basic cloud plan mSubscription_TxtCurrentPlan.setText(&quot;Basic Cloud Plan&quot;); mSubscription_TxtCurrentPlan.setVisibility(View.VISIBLE); // bottom - gone mSubscription_TxtCurrentPlanBottom.setVisibility(View.GONE); } mSubscription_TxtCurrentPlanRight.setText(DeviceHelper.getInstance().getSettingsDevice().getPaymentPrice() + UIUtils.getString(R.string.monthly)); } Subscription 整个区域是否显示需要云端配置 调用 获取 5.49 是否显示app审核敏感信息开关/camera/ipc/checkIsShowSensitiveInfoOnoff.json 12345678910111213141516171819202122232425262728293031323334353637383940private void getTasketSensitiveInfo() &#123; Observable.create(new Observable.OnSubscribe&lt;CheckIsShowSensitiveInfoOnoffResponseEntity&gt;() &#123; @Override public void call(Subscriber&lt;? super CheckIsShowSensitiveInfoOnoffResponseEntity&gt; subscriber) &#123; CheckIsShowSensitiveInfoOnoffRequestEntity loninEntity = new CheckIsShowSensitiveInfoOnoffRequestEntity(); CheckIsShowSensitiveInfoOnoffResponseEntity entity = DataManager.getInstance().checkIsShowSensitiveInfoOnoff(loninEntity); subscriber.onNext(entity); &#125; &#125;).subscribeOn(Schedulers.newThread()) .observeOn(AndroidSchedulers.mainThread()) .subscribe(new UIObserver&lt;CheckIsShowSensitiveInfoOnoffResponseEntity&gt;(new UIGetDataCallBack&lt;CheckIsShowSensitiveInfoOnoffResponseEntity&gt;() &#123; @Override public void getDataFinish(boolean isSuccess, CheckIsShowSensitiveInfoOnoffResponseEntity baseResponseEntity) &#123; if (baseResponseEntity instanceof CheckIsShowSensitiveInfoOnoffResponseEntity) &#123; CheckIsShowSensitiveInfoOnoffResponseEntity entity = (CheckIsShowSensitiveInfoOnoffResponseEntity) baseResponseEntity; SensitiveInfo info = SensitiveInfo.getInstance(); info.setIsShow(entity.getIsShow()); info.setPurchaseUrl(entity.getPurchaseUrl()); // 1显示 但不可点击 // 2 可点击 // 0不显示 if (DeviceHelper.getInstance().getSettingsDevice().getSchemeType() != 10) &#123; //10 直接 GONE if (SensitiveInfo.getInstance().getIsShow() == 1 &amp;&amp; !TextUtils.isEmpty(SensitiveInfo.getInstance().getPurchaseUrl())) &#123; mSubscriptionLayout.setVisibility(View.VISIBLE); &#125; else &#123; mSubscriptionLayout.setVisibility(View.GONE); &#125; &#125; else &#123; mSubscriptionLayout.setVisibility(View.GONE); &#125; &#125; &#125; &#125;));&#125; checkIsShowSensitiveInfoOnoff接口重要参数isShow 服务器端控制是否显示purchaseUrl 点击 购买是连接 SchemeType 为10 直接影藏SchemeType 不为10 &gt; 判断是否显示 url 是否存在 都满足显示 Camera Settings设备 在线 显示 Camera Settings设备 不在线 Camera Settings(Your snap is offline） 离线状态 Camera Settings 三个设置tab不可点击 Lights Settings设备 在线 显示 Lights Settings设备 不在线 Lights Settings(Your snap is offline） 副标题Snap V2 - Lights turning on and off by schedule or motion detectionSnap V1 - Lights turning on and off by schedule share 副标题分享 开 显示 Share to public 输入区显示 关 显示 Only me 输入区不显示 MotionDetectionSecurity Settings过期用户 显示 Security Settings(requires a cloud service plan)未过期用户 显示 Security Settings MotionDetection 开关 显示 二级页面 MotionDetection 1. Motion Detection关 - 下方全部影藏开 - 下方全部显示 Userinfo isMotionOnoff 服务器控制是否显示控制 Motion Detection 按钮下方 所有控件 activity Filtersif (UserInfo.getInstance().isShowObjectRecognition() == false){ // 影藏 Filters mRoot.findViewById(R.id.SnapSettings_motion_activity_Filters).setVisibility(View.GONE); mRoot.findViewById(R.id.SnapSettings_motion_activity_Filters_obj).setVisibility(View.GONE); } UserInfo 中ServiceShow 的objectRecognition 控制 activity Filters 整个显示 NotificationDevices 中 getMotionNotificationOnoff控制Notification 开关当关闭是 Notification栏下方都影藏 Devices 中 getNotdisturbOnoff控制免打扰开关当关闭是 下方的免打扰时间不显示 服务器控制过期 并且服务器不控制（影藏 zone 影藏 Filters） //服务器特殊控制UserInfo.getInstance().isMotionOnoff() int motionDetection_Status = UIHelper.getMotionDetection_Status(DeviceHelper.getInstance().getSettingsDevice()); if ( -1 == motionDetection_Status &amp;&amp; UserInfo.getInstance().isMotionOnoff()){//服务器特殊控制 mRoot.findViewById(R.id.activityCameraLiveSettings_content).setVisibility(View.VISIBLE); // 影藏 zone mRoot.findViewById(R.id.SnapSettings_motion_zones_text).setVisibility(View.GONE); mRoot.findViewById(R.id.SnapSettings_motion_zone_layout).setVisibility(View.GONE); // 影藏 Filters mRoot.findViewById(R.id.SnapSettings_motion_activity_Filters).setVisibility(View.GONE); mRoot.findViewById(R.id.SnapSettings_motion_activity_Filters_obj).setVisibility(View.GONE); } html settings Js 与android IOS 交互移动端加载urlhttps://m3-10-100-102-21.cloud.sengled.com/mp/snap/settings.html;jsession=session?deviceId=16810参数sessiondeviceId js 调用移动端（android /IOS）1.html点击购买云服务 启动系统浏览器 打开购买页面2.Setting主页面点击左上角 返回箭头 退出设置页面 功能 js（调用方） android ios 打开购买页面 jsJumpPlay(String path) JsInterfacejs.JumpPlay(String path) jsJumpPlay(path) 退出设置页面 jsFinishPage() JsInterfacejs.jsFinishPage() back() 移动端（android /IOS） 调用 js1.android存在物理back键 调用 js返回上级页面 功能 android （调用方） js ios 物理back键 androidBack() androidBack() 不需要处理 mWebview.loadUrl(&quot;javascript:androidBack()&quot;); android 加载html 错误页面修改 Settings html Native 交互 JS call Native 删除snap 更新 titlebar 离开设置页面(New) 离开设置页面(old) 跳转网页支付 跳转网页支付(old) 简介 设置中删除设备 通知 Native 退出设置页 （1.7.0+） Titlebar 使用Native 通知 Native 更新 titlebar (1.7.0+) 退出设置页 通知Native 退出设置页 (1.7.0+) 退出设置页 通知Native 退出设置页 (1.5.0-1.7.0) 选择购买云服务跳转网页端支付 (1.7.0+) 选择购买云服务跳转网页端支付 (1.5.0-1.7.0) Js参数 {“command”: “deleteSnap”,”value”:deviceId} {“command”: “updateTitle”,”value”:title} {“command”: “exitSettings”,”value”:”” , “save”: {“keppAlive”: 1,”cameraOnline”: 1,”showCameraOnButton”: 1,”snapName”: snapName }} {“keppAlive”: 1,”cameraOnline”: 1,”showCameraOnButton”: 1,”snapName”: snapName } {“command”: “openBrowser”,”value”:url} - js调用 IOS window.webkit.messageHandlers.JsInterface.postMessage(args); window.webkit.messageHandlers.JsInterface.postMessage(args); window.webkit.messageHandlers.JsInterface.postMessage(args); IOS 监听 back(args); window.webkit.messageHandlers.JsInterface.postMessage(args); IOS 监听 jsJumpPlay(url); js调用 Android JsInterface.sendCommand(args); JsInterface.sendCommand(args); JsInterface.sendCommand(args); JsInterface.jsFinishPage(args); JsInterface.sendCommand(args); JsInterface.jsJumpPlay(url); Title: Settings html Native 交互 version 1.5.5 (整个页面HTML) Phone->HTML/JS: 加载页面 Note right of HTML/JS: 修改数据 HTML/JS自己处理 Note left of Phone: 物理back Phone->HTML/JS: Phone 通知 HTML/JS - androidBack() Note right of HTML/JS: HTML/JS 可以返回 自己处理返回 Note right of HTML/JS: HTML/JS 不能返回 HTML/JS->Phone: HTML/JS 通知 Phone 退出设置页面 (android-jsFinishPage(json) ) json 更新修改后的数据) Note right of HTML/JS: HTML/JS 退出设置 HTML/JS->Phone: HTML/JS 通知 Phone 退出设置页面 (android-jsFinishPage(json) ios-back(json) json 更新修改后的数据){"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("sequence-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value)); var diagram = Diagram.parse(code); diagram.drawSVG("sequence-0", options); Title: Settings html Native 交互 (Title为Native 内容为HTML) Note left of Phone: 1 加载HTML/JS Phone->HTML/JS: 1.1 加载页面 (设置回调对象,URL 参数jsession deviceId appVersion ) Note right of HTML/JS: 1.2 获取版本号 控制显示Title 显示 Note right of HTML/JS: 2 切换页面 HTML/JS->Phone: 2.1 切换页面 (HTML/JS 回调 Phone updateTitle) Note left of Phone: 3 Phone back Phone->HTML/JS: 3.1 Phone 通知 Html/Js back Note right of HTML/JS: 3.2 HTML/JS 可以返回 自己处理返回 HTML/JS-->>Phone: 3.2.1切换页面 (HTML/JS 回调 Phone updateTitle) Note right of HTML/JS: 3.3 HTML/JS 不能返回 HTML/JS->Phone: 3.3.1 HTML/JS 通知 Phone finishPage (返回json 更新修改后的数据){"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("sequence-1-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-1-options").value)); var diagram = Diagram.parse(code); diagram.drawSVG("sequence-1", options);]]></content>
      <categories>
        <category>Work</category>
      </categories>
      <tags>
        <tag>Snap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL]]></title>
    <url>%2F2018%2F07%2F11%2F%E5%B7%A5%E5%85%B7%2Fmysql%2FMySQL%2F</url>
    <content type="text"><![CDATA[MySQLMySQL 安装 基本设置1.mac 下载mySQL 下载地址2.mac 安装启动下一步安装 （安装完成记住初始化密码）安装完成在偏好设置 中 选择MySQL启动 3.连接数据库 12mysql -uroot -p按照提示输入密码 第一次输入初始化密码 4.密码重新设置 1ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;kylinhuang&apos;; MySQL 基本语法1.数据库操作1.1 显示 所有数据库 SHOW DATABASES; 1234567891011mysql&gt; SHOW DATABASES;+--------------------+| Database |+--------------------+| information_schema || mysql || performance_schema || sys || uesr |+--------------------+5 rows in set (0.00 sec) 1.2 创建数据库 CREATE DATABASE 库名; 1.3 切换数据库 USE 库名; 1.4 删除数据库 DROP DATABASE 库名;1.5 修改数据库名修改数据库三种方法 2.表操作1.显示 当前数据库下所有表 show tables;1.创建表 CREATE TABLE 表名 (字段名 VARCHAR(20), 字段名 CHAR(1)); 2.显示 表数据详情 desc 表名; 12345678mysql&gt; desc uesr;+-------+-------------+------+-----+---------+-------+| Field | Type | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| id | varchar(20) | YES | | NULL | || name | char(1) | YES | | NULL | |+-------+-------------+------+-----+---------+-------+2 rows in set (0.01 sec) 3.删除3.1删除表drop table 表名;1drop table workmates; 3.2 删除表中的数据delete from 表名称 where 删除条件;123456789删除id为2的行:delete from students where id=2;删除所有年龄小于21岁的数据:delete from students where age&lt;20;删除表中的所有数据:delete from students; 4.修改表4.1修改表名alter table 表名 rename 新表名;4.2删除列alter table 表名 drop 列名称;4.3修改列名alter table 表名 change 列名称 列新名称 新数据类型;4.4 修改 表中的数据update 表名称 set 列名称=新值 where 更新条件; UPDATE table_name SET field1=new-value1, field2=new-value2 [WHERE Clause] 12345678将id为5的手机号改为默认的&quot;-&quot;:update students set tel=default where id=5;将所有人的年龄增加1:update students set age=age+1;将手机号为 13288097888 的姓名改为 &quot;张伟鹏&quot;, 年龄改为 19:update students set name=&quot;张伟鹏&quot;, age=19 where tel=&quot;13288097888&quot;; 5.查询select 列名称 from 表名称 [查询条件];也可以使用通配符 * 查询表中所有的内容, 语句: select * from students; 123456789101112mysql&gt; select name, age from students; +--------+-----+ | name | age | +--------+-----+ | 王刚 | 20 | | 孙丽华 | 21 | | 王永恒 | 23 | | 郑俊杰 | 19 | | 陈芳 | 22 | | 张伟朋 | 21 | +--------+-----+ 6 rows in set (0.00 sec) 5.1 where条件查询select 列名称 from 表名称 where 条件;select * from students where sex=&quot;女&quot;; where 子句不仅仅支持 “where 列名 = 值” 这种名等于值的查询形式, 对一般的比较运算的运算符都是支持的, 例如 =、&gt;、&lt;、&gt;=、&lt;、!= 以及一些扩展运算符 is [not] null、in、like 等等。 还可以对查询条件使用 or 和 and 进行组合查询, 以后还会学到更加高级的条件查询方式, 这里不再多做介绍。12345678查询年龄在21岁以上的所有人信息:select * from students where age &gt; 21;查询名字中带有 &quot;王&quot; 字的所有人信息:select * from students where name like &quot;%王%&quot;;查询id小于5且年龄大于20的所有人信息:select * from students where id&lt;5 and age&gt;20; 5.2 where条件查询 WHERE…LIKE12SELECT field1, field2,...fieldN table_name1, table_name2...WHERE field1 LIKE condition1 [AND [OR]] filed2 = &apos;somevalue&apos; LIKE 通常与 % 一同使用，类似于一个元字符的搜索。你可以使用AND或者OR指定一个或多个条件。你可以在 DELETE 或 UPDATE 命令中使用 WHERE…LIKE 子句来指定条件。 runoob_tbl表中获取runoob_author字段中以”jay”为结尾的的所有记录1SELECT * from runoob_tbl WHERE runoob_author LIKE &apos;%jay&apos;; 5.3 ORDER BY12SELECT field1, field2,...fieldN table_name1, table_name2...ORDER BY field1, [field2...] [ASC [DESC]] ASC 升序DESC 降序1SELECT * from runoob_tbl ORDER BY runoob_author ASC 5.4 JOIN MySQL的JOIN来连接以上两张表来读取runoob_tbl表中所有runoob_author字段在tcount_tbl表对应的runoob_count字段值： 123456789101112131415161718192021222324252627282930313233343536373839root@host# mysql -u root -p password;Enter password:*******mysql&gt; use RUNOOB;Database changedmysql&gt; SELECT * FROM tcount_tbl;+-----------------+----------------+| runoob_author | runoob_count |+-----------------+----------------+| mahran | 20 || mahnaz | NULL || Jen | NULL || Gill | 20 || John Poul | 1 || Sanjay | 1 |+-----------------+----------------+6 rows in set (0.01 sec)mysql&gt; SELECT * from runoob_tbl;+-------------+----------------+-----------------+-----------------+| runoob_id | runoob_title | runoob_author | submission_date |+-------------+----------------+-----------------+-----------------+| 1 | Learn PHP | John Poul | 2007-05-24 || 2 | Learn MySQL | Abdul S | 2007-05-24 || 3 | JAVA Tutorial | Sanjay | 2007-05-06 |+-------------+----------------+-----------------+-----------------+3 rows in set (0.00 sec)mysql&gt;mysql&gt; SELECT a.runoob_id, a.runoob_author, b.runoob_count -&gt; FROM runoob_tbl a, tcount_tbl b -&gt; WHERE a.runoob_author = b.runoob_author;+-------------+-----------------+----------------+| runoob_id | runoob_author | runoob_count |+-------------+-----------------+----------------+| 1 | John Poul | 1 || 3 | Sanjay | 1 |+-------------+-----------------+----------------+2 rows in set (0.01 sec)]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS搭建VPS控制面板]]></title>
    <url>%2F2018%2F07%2F11%2F%E5%B7%A5%E5%85%B7%2Fshadowsocks%2FCentOS%E9%85%8D%E7%BD%AEShadowsocks%2F</url>
    <content type="text"><![CDATA[centos配置Shadowsocks 多用户1.安装shadowsocks12345yum install epel-releaseyum updateyum install python-setuptools m2crypto supervisoreasy_install pippip install shadowsocks 2. 配置shadowsocks.json文件上边几条命令都执行完成后，输入下面这条命令，回车执行：1vi /etc/shadowsocks.json 之后按i键进入编辑模式，putty黑框的左下角会出现 – INSERT – 字样，然后一次性复制下面的内容（记得先修改再复制，将2333修改为想用的端口，范围 1 – 65535，mima12345改成你的密码，记住下面的内容，配置客户端的时候会用到；另外，下面是建了2333和6666两个账号，如果多了，可以删掉，不够可以再加。注意逗号，免得出错）, 在putty里右键，此时复制的内容应该已经粘贴到了putty里了。 123456789&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;port_password&quot;:&#123; &quot;2333&quot;:&quot;mima12345&quot;, &quot;6666&quot;:&quot;mima12345&quot; &#125;, &quot;timeout&quot;:600, &quot;method&quot;:&quot;aes-256-cfb&quot;&#125; 完成后，按ESC键退出编辑模式，putty黑框的左下角 – INSERT – 字样消失，输入:wq，回车执行，这时文件保存并返回。 3 添加到进程。继续输入下面这条命令，回车执行： 1vi /etc/supervisord.conf 之后按i键进入编辑模式，putty黑框的左下角会出现 – INSERT – 字样，用方向键将光标移动到文件尾部空行处。然后一次性复制下面的内容，在putty里右键，此时复制的内容应该已经粘贴到了putty里了。 1234567[program:shadowsocks]command=ssserver -c /etc/shadowsocks.jsonautostart=trueautorestart=trueuser=rootlog_stderr=truelogfile=/var/log/shadowsocks.log 完成后，按ESC键退出编辑模式，putty黑框的左下角 – INSERT – 字样消失，输入:wq，回车执行，这时文件保存并返回。 4. 设置开机启动继续输入下面这条命令，回车执行： 1vi /etc/rc.local 之后按i键进入编辑模式，putty黑框的左下角会出现 – INSERT – 字样，用方向键将光标移动到文件中部空行处。然后一次性复制下面的内容，在putty里右键，此时复制的内容应该已经粘贴到了putty里了。 12service supervisord startssserver -c /etc/shadowsocks.json -d start 完成后，按ESC键退出编辑模式，putty黑框的左下角 – INSERT – 字样消失，输入:wq，回车执行，这时文件保存并返回。1reboot 客户端配置1.shadowsocks下载shadowsocks下载地址 2.配置 服务器IP ： 第一步获取到的ip服务器端口 ： 第二步第五小步设置的端口（port），比如：2333密码 ： 第二步第五小步设置的密码（password），比如:mima12345加密 ： 第二步第五小步设置的加密方式（method），默认为：aes-256-cfb备注 不用填代理端口 建议使用默认端口1080 配置完成，点击确定，然后在工具栏右键纸飞机图标，启动系统代理，现在打开 谷歌 看看墙外的世界。至于其他菜单的功能，靠你自己摸索了。 注意如果遇到问题启动 12ssserver -c /etc/shadowsocks.json -d startssserver -c /etc/shadowsocks.json -d stop]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Flutter 2.创建app]]></title>
    <url>%2F2018%2F07%2F11%2Fandroid%2FFlutter%2FFlutter%202.%E5%88%9B%E5%BB%BAapp%2F</url>
    <content type="text"><![CDATA[Flutter 2.创建app1.创建项目 运行123456789101112131415161718192021import 'package:flutter/material.dart';void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Welcome to Flutter', home: new Scaffold( appBar: new AppBar( title: new Text('Welcome to Flutter'), ), body: new Center( child: new Text('Hello World'), ), ), ); &#125;&#125; main函数使用了(=&gt;)符号, 这是Dart中单行函数或方法的简写。 12345678void main() =&gt; runApp(new MyApp());等价于void main() &#123; runApp(new MyApp());&#125; 创建app 继承 StatelessWidget 1class MyApp extends StatelessWidget &#123; Scaffold 是 Material library 中提供的一个widget, 它提供了默认的导航栏、标题和包含主屏幕widget树的body属性。widget树可以很复杂。 widget的主要工作是提供一个build()方法来描述如何根据其他较低级别的widget来显示自己。 本示例中的body的widget树中包含了一个Center widget, Center widget又包含一个 Text 子widget。 Center widget可以将其子widget树对其到屏幕中心。 2 更改 AppBar123456789101112131415161718192021222324 class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Welcome to Flutter', home: new Scaffold( appBar: new AppBar( title: new Text("Flutter"), actions: &lt;Widget&gt;[ new IconButton(icon: new Icon(Icons.add_alert), onPressed: ()&#123; _pressed("add_alert"); &#125;), new IconButton(icon: new Icon(Icons.print), onPressed: ()&#123; _pressed("print"); &#125;), new IconButton(icon: new Icon(Icons.people), onPressed: ()&#123; _pressed("people"); &#125;), ], ), body: new Center( child: new Text('Hello World'), ), ), ); &#125; 3 pubspec.yaml12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667name: flutterdemodescription: A new Flutter project.dependencies: flutter: sdk: flutter # 国际化 flutter_localizations: sdk: flutter intl: intl_translation: # The following adds the Cupertino Icons font to your application. # Use with the CupertinoIcons class for iOS style icons. cupertino_icons: ^0.1.0 # Use an external package english_words: ^3.1.0dev_dependencies: flutter_test: sdk: flutter# For information on the generic Dart part of this file, see the# following page: https://www.dartlang.org/tools/pub/pubspec# The following section is specific to Flutter.flutter: # The following line ensures that the Material Icons font is # included with your application, so that you can use the icons in # the material Icons class. uses-material-design: true # To add assets to your application, add an assets section, like this: # assets: # - images/a_dot_burr.jpeg # - images/a_dot_ham.jpeg # An image asset can refer to one or more resolution-specific "variants", see # https://flutter.io/assets-and-images/#resolution-aware. # For details regarding adding assets from package dependencies, see # https://flutter.io/assets-and-images/#from-packages # To add custom fonts to your application, add a fonts section here, # in this "flutter" section. Each entry in this list should have a # "family" key with the font family name, and a "fonts" key with a # list giving the asset and other descriptors for the font. For # example: # fonts: # - family: Schyler # fonts: # - asset: fonts/Schyler-Regular.ttf # - asset: fonts/Schyler-Italic.ttf # style: italic # - family: Trajan Pro # fonts: # - asset: fonts/TrajanPro.ttf # - asset: fonts/TrajanPro_Bold.ttf # weight: 700 # # For details regarding fonts from package dependencies, # see https://flutter.io/custom-fonts/#from-packages 源码 地址 https://github.com/kylinhuang/flutterDemo/blob/master/flutterdemo/lib/flutter1/flutterapp.dart]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter-问题]]></title>
    <url>%2F2018%2F07%2F11%2Fandroid%2FFlutter%2FFlutter-%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[Flutter-问题1. Waiting for another flutter command to release the startup lock…解决方式去到flutter\bin\cache这个目录 把有lock 字样的文件都删除掉 2. Flutter 卡在 package get 的解决办法一直卡在 Running &quot;flutter packages get&quot; in project_name... 解决方法 https://github.com/flutter/flutter/wiki/Using-Flutter-in-China or https://www.jianshu.com/p/147f0e20c312]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 5.获取数据]]></title>
    <url>%2F2018%2F07%2F10%2Fandroid%2FFlutter%2FFlutter%205.%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%2F</url>
    <content type="text"><![CDATA[移动端-Flutter-5.获取数据1 添加http包2 使用http 软件包发送网络请求3 解析数据4 显示 数据 1 添加http包在pubspec.yaml中添加 http 包 12dependencies: http: &lt;latest_version&gt; 2 使用http 软件包发送网络请求123Future&lt;http.Response&gt; fetchPost() &#123; return http.get('https://jsonplaceholder.typicode.com/posts/1');&#125; 3 解析数据创建解析对象 123456789101112131415class Post &#123; final int userId; final int id; final String title; final String body; Post(&#123;this.userId, this.id, this.title, this.body&#125;); factory Post.fromJson(Map&lt;String, dynamic&gt; json) &#123; return new Post( userId: json['userId'], id: json['id'], title: json['title'], body: json['body'], ); &#125;&#125; 解析数据 12345Future&lt;Post&gt; fetchPost() async &#123; final response = await http.get('https://jsonplaceholder.typicode.com/posts/1'); final responseJson = json.decode(response.body); return new Post.fromJson(responseJson); &#125; 4 显示 数据123456789101112new FutureBuilder&lt;Post&gt;( future: fetchPost(), builder: (context, snapshot) &#123; if (snapshot.hasData) &#123; return new Text(snapshot.data.title); &#125; else if (snapshot.hasError) &#123; return new Text("$&#123;snapshot.error&#125;"); &#125; // By default, show a loading spinner return new CircularProgressIndicator(); &#125;,); code1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556import 'dart:async';import 'dart:convert';import 'package:flutter/material.dart';import 'package:http/http.dart' as http;Future&lt;Post&gt; fetchPost() async &#123; final response = await http.get('https://jsonplaceholder.typicode.com/posts/1'); final responseJson = json.decode(response.body); return new Post.fromJson(responseJson);&#125;class Post &#123; final int userId; final int id; final String title; final String body; Post(&#123;this.userId, this.id, this.title, this.body&#125;); factory Post.fromJson(Map&lt;String, dynamic&gt; json) &#123; return new Post( userId: json['userId'], id: json['id'], title: json['title'], body: json['body'], ); &#125;&#125;void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Fetch Data Example', theme: new ThemeData( primarySwatch: Colors.blue, ), home: new Scaffold( appBar: new AppBar( title: new Text('Fetch Data Example'), ), body: new Center( child: new FutureBuilder&lt;Post&gt;( future: fetchPost(), builder: (context, snapshot) &#123; if (snapshot.hasData) &#123; return new Text(snapshot.data.title); &#125; else if (snapshot.hasError) &#123; return new Text("$&#123;snapshot.error&#125;"); &#125; // By default, show a loading spinner return new CircularProgressIndicator(); &#125;, ), ), ), ); &#125;&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 6.获取数据-post]]></title>
    <url>%2F2018%2F07%2F10%2Fandroid%2FFlutter%2FFlutter%206.%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE-post%2F</url>
    <content type="text"><![CDATA[android Flutter 6.获取数据-post1234567891011121314static void post(String url, Function callback, &#123; String params, Function errorCallback&#125;) async &#123; Map&lt;String, String&gt; headers = new Map(); headers['Content-Type'] = 'application/json'; try &#123; http.Response res = await http.post(url,headers : headers, body: params); if (callback != null) &#123; callback(res.body); &#125; &#125; catch (e) &#123; if (errorCallback != null) &#123; errorCallback(e); &#125; &#125; &#125; 发送请求 1234567891011String jsonParams = json.encode(&#123;"appCode":"snap","baiduChanelToken":""&#125;); NetUtils.post( Api.Login, (data) &#123; print('data is $&#123; data &#125;');// &#125;, params: jsonParams, errorCallback: (e) &#123; print(' errorCallback ' + e); &#125;);]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 10.Native 项目中添加Flutter]]></title>
    <url>%2F2018%2F07%2F05%2Fandroid%2FFlutter%2FFlutter%2010.Native%20%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%B7%BB%E5%8A%A0Flutter%2F</url>
    <content type="text"><![CDATA[Flutter android 项目中添加Flutter官方文档 官方 给出 是不建议在原项目中集成 flutter 目前还是测试 实验阶段 已有android 项目中集成 Flutter The Flutter project template使用flutter create xxx创建的Flutter项目包括用于Flutter / Dart代码的非常简单的 应用程序（Android单个Activity 和 iOS 单个 ViewController ）。您可以修改这些主机应用程序以满足您的需求并从那里构建。 The Flutter module template但是，如果您开始使用任一平台的现有应用程序，您可能希望将Flutter项目作为某种形式的库包含在该应用程序中。 这就是Flutter模块模板提供的内容。执行 flutter create -t​​ module xxx会生成一个Flutter项目，其中包含一个Android库和一个Cocoapods pod，专为现有主机应用程序使用而设计。 android 项目中集成 FlutterCreate a Flutter module命令行 创建 flutter create -t module flutter_mode 也可以使用android Studio 创建 flutter_mode 应用转化为库修改flutter_mode 中 android/app/build.gradle 123apply plugin: &apos;com.android.application&apos;修改为apply plugin: &apos;com.android.library&apos; 删除 defaultConfig 中 applicationId123456789 defaultConfig &#123; // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).// applicationId &quot;com.example.fluttermode&quot; minSdkVersion 16 targetSdkVersion 27 versionCode 1 versionName &quot;1.0&quot; testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot; &#125; 删除 flutter_mode 中 AndroidManifest.xml删除 flutter_mode 中 android/app/src/main/AndroidManifest.xml中 多余的代码 intent-filter application 属性 123456789101112131415161718 &lt;application &gt; &lt;activity android:name=&quot;.MainActivity&quot; android:launchMode=&quot;singleTop&quot; android:theme=&quot;@style/LaunchTheme&quot; android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density&quot; android:hardwareAccelerated=&quot;true&quot; android:windowSoftInputMode=&quot;adjustResize&quot;&gt; &lt;!-- This keeps the window background of the activity showing until Flutter renders its first frame. It can be removed if there is no splash screen (such as the default splash screen defined in @style/LaunchTheme). --&gt; &lt;meta-data android:name=&quot;io.flutter.app.android.SplashScreenUntilFirstFrame&quot; android:value=&quot;true&quot; /&gt; &lt;/activity&gt;&lt;/application&gt; 修改 MainActivity.java12345678public class MainActivity extends FlutterActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; io.flutter.view.FlutterMain.startInitialization(this.getApplicationContext()); // &lt;= New. super.onCreate(savedInstanceState); GeneratedPluginRegistrant.registerWith(this); &#125;&#125; android Native 项目 引用修改 Native 工程目录中 settings.gradle 文件 12include &apos;:flutter_mode&apos;project(&apos;:flutter_mode&apos;).projectDir = new File( &apos;flutter_mode/flutter_mode/android/app&apos;) 修改 Native 项目目录中 build.gradle 文件1implementation project(&quot;:flutter_mode&quot;) 修改 Native 工程项目中 local.properties 文件123ndk.dir=/Users/kylinhuang/androidStudioSDK/ndk-bundlesdk.dir=/Users/kylinhuang/androidStudioSDKflutter.sdk=/Users/kylinhuang/software/flutter 调用123456789public void startFlutterActivity(View view) &#123; // ComponentName componentName = new ComponentName(this, &quot;com.example.fluttermode.MainActivity&quot;);// Intent intent = new Intent().setComponent(componentName);// startActivity(intent); Intent intent = new Intent(getActivity(), com.example.fluttermode.MainActivity.class); startActivity(intent);&#125; 启动过程有点慢先白屏 再渲染出来 使用release 版本 运行起来比较快 123456java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file &quot;/data/app/com.sengled.Snap-1/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.sengled.Snap-1/lib/arm, /data/app/com.sengled.Snap-1/base.apk!/lib/armeabi, /system/lib, /vendor/lib]]] couldn&apos;t find &quot;libflutter.so&quot; at java.lang.Runtime.loadLibrary0(Runtime.java:984) at java.lang.System.loadLibrary(System.java:1530) at io.flutter.view.FlutterMain.startInitialization(FlutterMain.java:163) at io.flutter.view.FlutterMain.startInitialization(FlutterMain.java:140) at com.example.fluttermode.MainActivity.onCreate(MainActivity.java:10) 123No application found for TargetPlatform.android_arm.Is your project missing an android/app/src/main/AndroidManifest.xml?Consider running &quot;flutter create .&quot; to create one. 第一次遇到 更新 flutter 就可以了又遇见了 怎么都不好使 无奈之下 删除 android 目录 ios目录 直接运行 flutter create . 再git 恢复配置问题]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 9.app错误上报]]></title>
    <url>%2F2018%2F07%2F05%2Fandroid%2FFlutter%2FFlutter%209.app%E9%94%99%E8%AF%AF%E4%B8%8A%E6%8A%A5%2F</url>
    <content type="text"><![CDATA[android Flutter 9.app错误上报参考https://flutter.io/cookbook/maintenance/error-reporting/ codehttps://github.com/flutter/crashy]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 8.数据存储-File]]></title>
    <url>%2F2018%2F07%2F05%2Fandroid%2FFlutter%2FFlutter%208.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-File%2F</url>
    <content type="text"><![CDATA[android Flutter 8.数据存储-File为了将文件保存到磁盘，我们需要将 path_provider 插件与dart:io 库结合起来 。 1.找到正确的本地路径 2.创建对文件位置的引用 3.将数据写入文件 4.从文件中读取数据 1.找到正确的本地路径path_provider插件提供了一种平台不可知的方式来访问设备文件系统上的常用位置。该插件当前支持访问两个文件系统位置： 临时目录(Temporary directory)：系统可随时清除的临时目录（缓存）。在iOS上，这对应于NSTemporaryDirectory() 返回的值 。在Android上，这是getCacheDir() 返回的值。 文档目录(Documents directory)：应用程序的目录，用于存储只有它可以访问的文件。只有当应用程序被删除时，系统才会清除目录。在iOS上，这对应于NSDocumentDirectory。在Android上，这是 AppData目录。 在我们的例子中，我们希望将信息存储在文档目录中！我们可以像这样找到文档目录的路径： 12345Future&lt;String&gt; get _localPath async &#123; final directory = await getApplicationDocumentsDirectory(); return directory.path;&#125; 2.创建对文件位置的引用一旦我们知道在哪里存储文件，我们需要创建一个文件的完整位置的引用。我们可以使用File 类从 dart:io 库来实现这一目标。 1234Future&lt;File&gt; get _localFile async &#123; final path = await _localPath; return new File(&apos;$path/counter.txt&apos;);&#125; 3.将数据写入文件现在我们有了一个File合作关系，我们可以使用它来读取和写入数据！首先，我们将一些数据写入文件。由于我们正在使用计数器，因此我们只会将整数存储为字符串。 123456Future&lt;File&gt; writeCounter(int counter) async &#123; final file = await _localFile; // Write the file return file.writeAsString(&apos;$counter&apos;);&#125; 4.从文件中读取数据现在我们在磁盘上有一些数据，我们可以阅读它！我们再次使用这个 File类来做到这一点。 12345678910111213Future&lt;int&gt; readCounter() async &#123; try &#123; final file = await _localFile; // Read the file String contents = await file.readAsString(); return int.parse(contents); &#125; catch (e) &#123; // If we encounter an error, return 0 return 0; &#125;&#125; 测试为了测试与文件交互的代码，我们需要模拟调用MethodChannel。这MethodChannel是Flutter用来与主机平台进行通信的类。 在我们的测试中，我们无法与设备上的文件系统进行交互。我们需要与我们的测试环境的文件系统进行交互！ 为了模拟方法调用，我们可以setupAll在我们的测试文件中提供一个函数。该功能将在测试执行之前运行。 123456789101112131415setUpAll(() async &#123; // Create a temporary directory to work with final directory = await Directory.systemTemp.createTemp(); // Mock out the MethodChannel for the path_provider plugin const MethodChannel(&apos;plugins.flutter.io/path_provider&apos;) .setMockMethodCallHandler((MethodCall methodCall) async &#123; // If we&apos;re getting the apps documents directory, return the path to the // temp directory on our test environment instead. if (methodCall.method == &apos;getApplicationDocumentsDirectory&apos;) &#123; return directory.path; &#125; return null; &#125;);&#125;); 例子1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798import &apos;dart:async&apos;;import &apos;dart:io&apos;;import &apos;package:flutter/foundation.dart&apos;;import &apos;package:flutter/material.dart&apos;;import &apos;package:path_provider/path_provider.dart&apos;;void main() &#123; runApp( new MaterialApp( title: &apos;Reading and Writing Files&apos;, home: new FlutterDemo(storage: new CounterStorage()), ), );&#125;class CounterStorage &#123; Future&lt;String&gt; get _localPath async &#123; final directory = await getApplicationDocumentsDirectory(); return directory.path; &#125; Future&lt;File&gt; get _localFile async &#123; final path = await _localPath; return new File(&apos;$path/counter.txt&apos;); &#125; Future&lt;int&gt; readCounter() async &#123; try &#123; final file = await _localFile; // Read the file String contents = await file.readAsString(); return int.parse(contents); &#125; catch (e) &#123; // If we encounter an error, return 0 return 0; &#125; &#125; Future&lt;File&gt; writeCounter(int counter) async &#123; final file = await _localFile; // Write the file return file.writeAsString(&apos;$counter&apos;); &#125;&#125;class FlutterDemo extends StatefulWidget &#123; final CounterStorage storage; FlutterDemo(&#123;Key key, @required this.storage&#125;) : super(key: key); @override _FlutterDemoState createState() =&gt; new _FlutterDemoState();&#125;class _FlutterDemoState extends State&lt;FlutterDemo&gt; &#123; int _counter; @override void initState() &#123; super.initState(); widget.storage.readCounter().then((int value) &#123; setState(() &#123; _counter = value; &#125;); &#125;); &#125; Future&lt;File&gt; _incrementCounter() async &#123; setState(() &#123; _counter++; &#125;); // write the variable as a string to the file return widget.storage.writeCounter(_counter); &#125; @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar(title: new Text(&apos;Reading and Writing Files&apos;)), body: new Center( child: new Text( &apos;Button tapped $_counter time$&#123;_counter == 1 ? &apos;&apos; : &apos;s&apos;&#125;.&apos;, ), ), floatingActionButton: new FloatingActionButton( onPressed: _incrementCounter, tooltip: &apos;Increment&apos;, child: new Icon(Icons.add), ), ); &#125;&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 7.数据存储-shared_preferences]]></title>
    <url>%2F2018%2F07%2F05%2Fandroid%2FFlutter%2FFlutter%207.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-shared_preferences%2F</url>
    <content type="text"><![CDATA[android Flutter 7.数据存储-shared_preferences通常我们必须编写本地平台集成以在两个平台上存储数据。幸运的是，shared_preferences 插件可用于在磁盘上保存键值数据。共享首选项插件包装NSUserDefaults在iOS和SharedPreferencesAndroid上，为简单数据提供持久存储。 1.添加依赖项 2.保存数据 3.读取数据 4.删除数据 1.添加依赖项在我们开始之前，我们需要将shared_preferences 插件添加到我们的pubspec.yaml文件中： 1234dependencies: flutter: sdk: flutter shared_preferences: "&lt;newest version&gt;" 2.保存数据为了保存数据，我们可以使用SharedPreferences该类提供的setter方法 。设置器方法可用于各种原始类型，例如setInt，setBool，和setString。 Setter方法做两件事：首先，同步更新内存中的键值对。然后，将数据保存到磁盘。 12345// obtain shared preferences final prefs = await SharedPreferences.getInstance();// set new valueprefs.setInt('counter', counter); 3.读取数据要读取数据，我们可以使用SharedPreferences该类提供的适当的getter方法 。对于每个制定者都有一个相应的获得者。例如，我们可以使用getInt，getBool和getString方法。 1234final prefs = await SharedPreferences.getInstance();// Try reading data from the counter key. If it does not exist, return 0.final counter = prefs.getInt('counter') ?? 0; 4.删除数据要删除数据，我们可以使用该remove方法。 123final prefs = await SharedPreferences.getInstance();prefs.remove('counter'); 支持的类型虽然使用键值存储非常简单方便，但它有一些限制： 只有基本类型可以使用：int，double，bool，string和stringList它不是用来存储大量数据的。 测试支持测试持续使用数据的代码可能是一个好主意 shared_preferences。为此，我们需要嘲笑图书馆MethodChannel使用的shared_preferences。 SharedPreferences通过setupAll在我们的测试文件中的一个方法中运行以下代码，我们可以在我们的测试中填充初始值： 1234567const MethodChannel('plugins.flutter.io/shared_preferences') .setMockMethodCallHandler((MethodCall methodCall) async &#123; if (methodCall.method == 'getAll') &#123; return &lt;String, dynamic&gt;&#123;&#125;; // set initial values here if desired &#125; return null; &#125;); 例子12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182import 'package:flutter/material.dart';import 'package:shared_preferences/shared_preferences.dart';void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; // This widget is the root of our application. @override Widget build(BuildContext context) &#123; return new MaterialApp( title: 'Shared preferences demo', theme: new ThemeData( primarySwatch: Colors.blue, ), home: new MyHomePage(title: 'Shared preferences demo'), ); &#125;&#125;class MyHomePage extends StatefulWidget &#123; MyHomePage(&#123;Key key, this.title&#125;) : super(key: key); final String title; @override _MyHomePageState createState() =&gt; new _MyHomePageState();&#125;class _MyHomePageState extends State&lt;MyHomePage&gt; &#123; int _counter = 0; @override void initState() &#123; super.initState(); _loadCounter(); &#125; //Loading counter value on start _loadCounter() async &#123; SharedPreferences prefs = await SharedPreferences.getInstance(); setState(() &#123; _counter = (prefs.getInt('counter') ?? 0); &#125;); &#125; //Incrementing counter after click _incrementCounter() async &#123; SharedPreferences prefs = await SharedPreferences.getInstance(); _counter = (prefs.getInt('counter') ?? 0) + 1; setState(() &#123; _counter; &#125;); prefs.setInt('counter', _counter); &#125; @override Widget build(BuildContext context) &#123; return new Scaffold( appBar: new AppBar( title: new Text(widget.title), ), body: new Center( child: new Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ new Text( 'You have pushed the button this many times:', ), new Text( '$_counter', style: Theme.of(context).textTheme.display1, ), ], ), ), floatingActionButton: new FloatingActionButton( onPressed: _incrementCounter, tooltip: 'Increment', child: new Icon(Icons.add), ), // This trailing comma makes auto-formatting nicer for build methods. ); &#125;&#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 4.组件与布局]]></title>
    <url>%2F2018%2F07%2F05%2Fandroid%2FFlutter%2FFlutter%204.%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%B8%83%E5%B1%80%2F</url>
    <content type="text"><![CDATA[android Flutter 4.组件与布局Flutter带有一套强大的基本小组件1 Text 文本2 Row 水平布局3 Column 垂直布局Row Column 其设计基于网络的Flexbox布局模型。4 Stack 可以让你在绘制顺序上堆叠小部件 然后，您可以Positioned 在a的子项上使用该 小部件， Stack以相对于堆栈的顶部，右侧，底部或左侧边缘定位它们。堆栈基于Web的绝对定位布局模型。 6 Container：Container 小部件可让您创建矩形视觉元素。一个容器可以装饰一个 BoxDecoration，如背景，边框或阴影。A Container 也可以具有边距，填充和应用于其大小的约束。另外， Container 可以使用矩阵在三维空间中对a进行变换。 Using Material Components 质应用程序以MaterialApp 小部件开始， 小部件在应用程序的根部创建了许多有用的小部件，其中包括一个 Navigator管理由字符串标识的一堆小部件（也称为“路由”）的小部件。将 Navigator 让您应用程序的屏幕之间的平稳过渡。使用 MaterialApp 小部件完全是可选的，但是一个很好的做法。 ListView 1 水平ListView12345678910111213141516171819202122232425262728293031323334353637 @override Widget build(BuildContext context) &#123; return new Scaffold(// appBar: new AppBar(title: new Text("Secutity"),), body: new Container( margin: new EdgeInsets.symmetric(vertical: 20.0), height: 200.0, child: new ListView( scrollDirection: Axis.horizontal, children: &lt;Widget&gt;[ new Container( width: 160.0, color: Colors.red, ), new Container( width: 160.0, color: Colors.yellow, ), new Container( width: 160.0, color: Colors.green, ), new Container( width: 160.0, color: Colors.yellow, ), new Container( width: 160.0, color: Colors.orange, ), ], ), ) ); &#125;]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 3.使用使用外部包]]></title>
    <url>%2F2018%2F07%2F05%2Fandroid%2FFlutter%2FFlutter%203.%E4%BD%BF%E7%94%A8%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E5%8C%85%2F</url>
    <content type="text"><![CDATA[android Flutter 3.使用使用外部包公开资源包https://pub.dartlang.org/flutter/ 例子添加 english_words 1 pubspec.yaml中添加123456dependencies: flutter: sdk: flutter cupertino_icons: ^0.1.0 english_words: ^3.1.0 # add this line 2 更新 package点击 Packages get 3 .dart文件中引入package12import 'package:flutter/material.dart';import 'package:english_words/english_words.dart'; // Add this line. 4 使用1234567891011121314151617181920212223import 'package:flutter/material.dart';import 'package:english_words/english_words.dart'; // Add this line./// MySnapPageclass MySnapPage extends StatefulWidget &#123; @override _MySnapPageState createState() =&gt; new _MySnapPageState();&#125;class _MySnapPageState extends State&lt;MySnapPage&gt; &#123; @override Widget build(BuildContext context) &#123; final wordPair = new WordPair.random(); // Add this line. return new Scaffold(// appBar: new AppBar(title: new Text("MySnapPage"),),// body: new Center(child: new Text("MySnapPage")), body: new Center(child: new Text(wordPair.asPascalCase) ), ); &#125;&#125; 创建WordPair1final wordPair = new WordPair.random(); // Add this line. 使用wordPair new Text(wordPair.asPascalCase)]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Flutter 1.环境配置]]></title>
    <url>%2F2018%2F07%2F05%2Fandroid%2FFlutter%2FFlutter%201.%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[android Flutter 1.环境配置安装参考官方网站https://flutter.io/setup-macos/#update-your-path flutter 中文 一 本地环境配置1. 下载1.1 下载压缩包flutter_macos_v0.3.1-beta.zip 解压即可 1.2 git 下载如果你是第一次在你机器上安装 Flutter ，克隆 beta 分支的仓库然后添加 flutter 工具到你的路径 git clone -b beta https://github.com/flutter/flutter.git export PATH=`pwd`/flutter/bin:$PATH 2. 设置环境变量.bash_profile中添加 以下代码 [PATH_TO_FLUTTER_GIT_DIRECTORY] 为本地路径 export PATH=[PATH_TO_FLUTTER_GIT_DIRECTORY]/flutter/bin:$PATH 刷新 文件 source $HOME/.bash_profile check wherther the installation is successful flutter doctor 二 工具 环境配置1. android Studio 环境配置参考 官方文档https://flutter.io/get-started/editor/#androidstudio android Studio 安装 flutter 插件(Plugins &gt; Browserepositories &gt; 搜索 Flutter 选择安装) 安装完成出出现Start a new Flutter project创建 Flutter项目 2. IOS 环境配置mac 中 安装 Xcode命令行sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer sudo xcodebuild -license 创建ios模拟器open -a Simulator 3. idea 环境配置idea 可以运行 android IOS 平台先安装插件 Filtter 重启idea 创建项目选择Flutter运行 三 问题1 idea Please configure Android SDKhttps://stackoverflow.com/questions/21070268/intellij-idea-13-error-please-select-android-sdk 2 idea Dart SDK is not configured下载https://www.dartlang.org/tools/sdk/archive 配置 运行成功]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Markdown 基本语法]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FMarkdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%2F</url>
    <content type="text"><![CDATA[标题标题一标题二标题三标题四1234# 标题一## 标题二### 标题三#### 标题四 引用大于号 &gt;1&gt; ddd ddd 代码引用 需要引用代码时，如果引用的语句只有一段，不分行，可以用 ` 将语句包起来。如果引用的语句为多行，可以将1234567# 段落``` bash System.out.println(&quot;url&quot; + url); 连接1[Deployment](https://hexo.io/docs/deployment.html) Deployment 图片12345![Alt text](http://ow59rnl1a.bkt.clouddn.com/snap_playback_%E6%97%B6%E5%BA%8F%E5%9B%BE.png "Optional title")# 图片 html 方式&lt;img src="http://ow59rnl1a.bkt.clouddn.com/Wechat_play.jpeg" width = "300" height = "300" alt="微信" align=center /&gt; 粗体 斜体1*一盏灯* 一盏灯 一盏灯 表格12345| Tables | Are | Cool || ------------- |:-------------:| -----:|| col 3 is | right-aligned | $1600 || col 2 is | centered | $12 || zebra stripes | are neat | $1 | Tables Are Cool col 3 is right-aligned $1600 col 2 is centered $12 zebra stripes are neat $1 vim /home/wwwroot/www.kylinhuang.cn/lib/config-simple.php 目录1.一级目录 1.1二级目录 1.1.1三级目录 一级目录 二级目录 三级目录 st=>start: Start i=>inputoutput: 输入年份n cond1=>condition: n能否被4整除？ cond2=>condition: n能否被100整除？ cond3=>condition: n能否被400整除？ o1=>inputoutput: 输出非闰年 o2=>inputoutput: 输出非闰年 o3=>inputoutput: 输出闰年 o4=>inputoutput: 输出闰年 e=>end st->i->cond1 cond1(no)->o1->e cond1(yes)->cond2 cond2(no)->o3->e cond2(yes)->cond3 cond3(yes)->o2->e cond3(no)->o4->e{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-0", options);#由于渲染问题， st=>start: 开始 e=>end: 结束 op=>operation: 我的操作 cond=>condition: 确认？ st->op->cond cond(yes)->e cond(no)->op{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-1-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-1-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-1", options);]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[七牛云存储]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2F%E4%B8%83%E7%89%9B%E4%BA%91%E5%AD%98%E5%82%A8%2F</url>
    <content type="text"><![CDATA[七牛云存储账号 gmail 域名1ow59rnl1a.bkt.clouddn.com https://portal.qiniu.com/bucket/photo/resource http://ow59rnl1a.bkt.clouddn.com/snap_playback_%E6%97%B6%E5%BA%8F%E5%9B%BE.png ow59rnl1a.bkt.clouddn.com 同步工具使用 qshell 下载工具下载地址]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>云存储</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[git]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2Fgit%2Fgit%2F</url>
    <content type="text"><![CDATA[git git 安装Linux (Ubuntu, Debian)：sudo apt-get install git-coreLinux (Fedora, Red Hat, CentOS)：sudo yum install git-core]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[wiki环境搭建]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2Fwiki%2F</url>
    <content type="text"><![CDATA[TiddlyWiki5https://github.com/Jermolene/TiddlyWiki5 git 安装Linux (Ubuntu, Debian)：sudo apt-get install git-coreLinux (Fedora, Red Hat, CentOS)：sudo yum install git-core]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>wiki</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS搭建 dokuwiki]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FCentOS%E6%90%AD%E5%BB%BA%2FCentos%20%E6%90%AD%E5%BB%BA%20dokuwiki%2F</url>
    <content type="text"><![CDATA[1 在centos7 下安装apache2，php1234yum install httpd yum install php /etc/init.d/httpd start chkconfig --levels 235 httpd on --- 开机自启，建议打开 2 安装 dokuwiki2.1 下载地址http://download.dokuwiki.org/ 2.2 解压缩到你的网站目录下，比如/var/www/html/dokuwiki。apache默认的目录/var/www/html，故需要把解压后的目录拷贝到这下面 2.3 权限设置dokuwiki的访问权限 123chown -R apache:root /var/www/html/dokuwiki chmod -R 664 /var/www/html/dokuwiki/ find /var/www/html/dokuwiki/ -type d -exec chmod 775 &#123;&#125; \; 3 访问service httpd restarthttp://域名/dokuwiki/data/pages/wiki/dokuwiki.txt]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CentOS搭建VPS控制面板]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FCentOS%E6%90%AD%E5%BB%BA%2FCentOS%E6%90%AD%E5%BB%BAVPS%E6%8E%A7%E5%88%B6%E9%9D%A2%E6%9D%BF%2F</url>
    <content type="text"><![CDATA[1 宝塔 Linux/Windows 面板 安装12yum -y install screen wget &amp;&amp; echo -e “defencoding utf-8\nencoding utf-8 utf-8” &gt;&gt; /etc/screenrc &amp;&amp; screen -S btwget -O install.sh http://125.88.182.172:5880/src/install.sh &amp;&amp; sh install.sh 访问账号 admin查看宝塔初始密码1cat /www/server/panel/default.pl 网站管理http://kylinhuang.top/admin/ http://blog.kylinhuang.top1234用户：admin密码： zblogger访问站点：http://blog.kylinhuang.tophttp://blog.kylinhuang.top/zb_system/admin/ http://android.kylinhuang.top123用户： admin密码： zblogger访问站点： http://android.kylinhuang.top WDCP Linux服务器管理系统 参考https://www.freehao123.com/top-10-vps-cp/]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CentOS搭建 python]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FCentOS%E6%90%AD%E5%BB%BA%2FCentOS%E6%90%AD%E5%BB%BAPython%2F</url>
    <content type="text"><![CDATA[1、CentOS安装Python的依赖包12yum groupinstall "Development tools"yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel 2、下载Python3.4的源码包并编译123456wget https://www.python.org/ftp/python/3.4.1/Python-3.4.1.tgztar xf Python-3.4.1.tgzcd Python-3.4.1./configure --prefix=/usr/local --enable-sharedmakemake install 3、在运行Python之前需要配置库：12echo /usr/local/lib &gt;&gt; /etc/ld.so.conf.d/local.confldconfig 4、运行演示：12python3 --versionPython 3.4.1 5、删除编译Python时所需要的库12yum groupremove "Development tools" --remove-leavesyum remove zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel --remove-leaves 参考http://www.linuxidc.com/Linux/2015-01/111870.htm]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CentOS搭建Hexo]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FCentOS%E6%90%AD%E5%BB%BA%2FCentOS%E6%90%AD%E5%BB%BAHexo%2F</url>
    <content type="text"><![CDATA[CentOS环境搭建Hexo git安装yum install git-core node安装方法一 方法二123yum install epel-releaseyum install nodejsyum install npm java https://jingyan.baidu.com/article/4853e1e51d0c101909f72607.html tomcat]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CentOS搭建 Tomcat]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FCentOS%E6%90%AD%E5%BB%BA%2FCentOS%E6%90%AD%E5%BB%BA%20Tomcat%2F</url>
    <content type="text"><![CDATA[1 java 安装12yum updateyum install java-1.8.0-openjdk-headless https://linode.com/docs/development/java/install-java-on-centos/参考 2 安装 Tomcat2.1 下载下载地址http://tomcat.apache.org/ 12345wget -c http://mirrors.hust.edu.cn/apache/tomcat/tomcat-7/v7.0.70/bin/apache-tomcat-7.0.70tar -zxvf apache-tomcat-7.0.82.tar.gz cd apache-tomcat-7.0.82./startup.sh]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[CentOS搭建 Ftp]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FCentOS%E6%90%AD%E5%BB%BA%2FCentOS%E6%90%AD%E5%BB%BA%20Ftp%2F</url>
    <content type="text"><![CDATA[1.安装vsftpd12yum check-updateyum -y install vsftpd 2.配置参数1vi /etc/vsftpd/vsftpd.conf 修改为如下内容123456anonymous_enable=NOchroot_local_user=YESallow_writeable_chroot=YESpasv_enable=YESpasv_min_port=40000pasv_max_port=40100 3.重启ftp123firewall-cmd --permanent --add-service=ftpfirewall-cmd --reloadsetsebool -P ftp_home_dir on 5.为ftp创建一个用户test1（指定目录为/home/www，不允许远程登录shell）123useradd -d /home/www -m test1 -s /sbin/nologincd /home/wwwchmod -R 777 * 6.为ftp用户设置一个密码1passwd root]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[VIP看看 - 看会员视频]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2FVIP%E7%9C%8B%E7%9C%8B%2F</url>
    <content type="text"><![CDATA[VIP看看轻松看 腾讯 优酷 爱奇艺等 vip 视频 不同的浏览器 有不同的方式下面 介绍 google chrome 1 下载 安装google 应用商店 搜索 Vip看看选择选择添加至chrome 就可以了 但是 google 应用商店 需要翻墙 才可以使用翻墙账号 查看科学上网 如果不能翻墙或者是其他浏览器可以查看教程http://www.tudou.com/programs/view/L6ATpgHHbyQ/ 3 使用使用时候不需要翻墙在腾讯 优酷 爱奇艺等视频网站观看视频页面空白处右击鼠标 选择VIP看看就可以查看vip视频了]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>VIP看看</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[辅助工具 接口文档管理工具]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2F%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7%20%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[每个公司有自己接口管理有自己的 接口管理网页(html页面 ajax测试)有自己公司的GUI工具 (测试接口 )Postman 测试的 下面介绍下 第三方的接口管理 1 RAP 阿里巴巴http://rap.taobao.org/org/index.dohttp://rapapi.org/org/index.do 最初接触 是学习慕课网 js全栈 视频 介绍的 作者之前维护这个项目可视化接口管理工具设定接口模拟数据校验真实接口正确性 2 docleverhttp://doclever.cn/全部开源 太牛了 围绕接口定义文档，通过一系列自动化工具提升我们的协作效率。DOClever前后端全部采用了javascript来作为开发语言，前端用的是vue+element UI后端是express+mongodb， 正在使用中 体验完 在写 感受 3 SwaggerSwagger是一个规范和完整的框架，用于生成、描述、调用和可视化RESTful风格的Web服务。 简单来说，Swagger是一个功能强大的接口管理工具，并且提供了多种编程语言的前后端分离解决方案。Swagger主要包含了以下4个部分： 1. Swagger可以直接嵌入项目中，通过开发时编写注释，自动生成接口文档； 2. Swagger包含了SwaggerEditor，它是使用yaml语言的Swagger API的编辑器，支持导出yaml和json格式的接口文件； 3. Swagger包含了SwaggerUI，它将Swagger Editor编辑好的接口文档以html的形式展示出来； 4. Swagger支持根据定义的接口导出各种语言的服务端或客户端代码。 其中1和4是更加面向开发的内容，开发团队要有自动生成文档的需求，在开发和自测中遵循前后端分离。而2和3是相对可以独立出来的、可供QA人员参考的接口文档管理方案，也是我们主要关注的部分。 Swagger提供了SwaggerEditor和Swagger UI的在线demo，如下图。可以看出，Swagger可以完整地定义一个接口的内容，包括各个参数、返回值的具体结构、类型，SwaggerEditor可以实时进行编辑并在线调试。编辑好的API可以导出为json文件，使用Swagger UI打开即可以看到更美观的接口文档。 Swagger Editor和SwaggerUI的本地部署十分简单，这两者都可以直接从Github上下载源码，将其部署到本地Tomcat服务器上，然后通过浏览器访问即可。官方还提供了其他几种部署方式，具体步骤在帮助文档中有详细说明，这里不再赘述。 这个 还没使用过 待更新]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[本地环境 MySQL]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2Fmysql%2F%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83MySQL%2F</url>
    <content type="text"><![CDATA[###1 下载 软件https://dev.mysql.com/downloads/file/?id=472883 2 安装3 配置1 mac 偏好设置 点击MySql 启动 服务2 配置环境变量123456(1).进入/usr/local/mysql/bin,查看此目录下是否有mysql(2).执行vim ~/.bash_profile 在该文件中添加mysql/bin的目录 PATH=$PATH:/usr/local/mysql/bin添加完成后，按esc，然后输入wq保存。最后在命令行输入source ~/.bash_profile 3 连接12345mysql -uroot -porsudo mysql -uroot -p]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[安装node]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2Fnode%2Fnode%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[安装HomeBrewHomebrew是OS X的套件(包)管理器，我们可以通过它获取并且安装很多组件网页打开 brew.sh 复制 安装命令 1/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 终端中粘贴安装 node 安装node 一、Node 升级 利用Node.js的多版本管理器nsudo npm cache clean -f //清除nodejs的cache：sudo npm install -g n //使用npm安装n模块npm view node versions // node所有版本sudo n latest // 升级到最新版本sudo n stable // 升级到稳定版本sudo n xx.xx // 升级到具体版本号 2.利用brew升级brew update(1).更新homebrew,如果出现The /usr/local directory is not writable.则需要更改权限 ，然后输入：sudo chown -R $(whoami) /usr/local(2).升级完以后，会弹出这个Homebrew no longer needs to have ownership of /usr/local. If you wish you canreturn /usr/local to its default ownership withsudo chown root:wheel /usr/local(3). 按提示输入下边的命令，更改会原来的权限sudo chown root:wheel /usr/local 接下来更新nodebrew upgrade node 一、npm 升级sudo npm install npm@latest -g //升级到最新版sudo npm install npm@xx -g //升级到指定版本npm version // 查看版本详情npm view npm version // npm最新版本npm view npm versions // npm所有版本npm list // 插件清单 切换 版本12npm install -g nn 6.5.0 安装指定版本的 Node.jsnvm 命令在线安装指定版本的 Node.jsnvm install [nodeversion] 指定当前使用的 Node.js 版本nvm use [nodeversion] 设置Node.js 默认版本nvm alias default v10.xxx]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac OSX下 卸载node.js]]></title>
    <url>%2F2018%2F07%2F04%2F%E5%B7%A5%E5%85%B7%2Fnode%2Fnode%E5%8D%B8%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[卸载node如果是从brew安装的, 运行brew uninstall node删除~/目录下所有node和node_modules删除/usr/local/lib中的所有node和node_modules删除/usr/local/lib中的所有node和node_modules的文件夹在/usr/local/bin中, 删除所有node的可执行文件(node和npm) 手动删除文件，整理成脚本是这个样子: 123456sudo rm -rf ~/.npmsudo rm -rf ~/node_modulessudo rm -rf ~/.node-gypsudo rm /usr/local/bin/nodesudo rm /usr/local/bin/npmsudo rm /usr/local/lib/dtrace/node.d 卸载.nvm之前是手动安装的nvm，nvm的目录结构比较简单，删除这三个就可以了 123rm -rf ~/.nvmrm -rf ~/.npmrm -rf ~/.bower]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android SwipeRefreshLayout]]></title>
    <url>%2F2018%2F01%2F25%2Fandroid%2Fandroid%20SwipeRefreshLayout%2F</url>
    <content type="text"><![CDATA[1 简介 WebView是一个基于webkit引擎、展现web页面的控件。Android的Webview在低版本和高版本采用了不同的webkit版本内核，4.4后直接使用了Chrome。 2 作用 显示和渲染Web页面 直接使用html文件（网络上或本地assets中）作布局 可和JavaScript交互调用 WebView控件功能强大，除了具有一般View的属性和设置外，还可以对url请求、页面加载、渲染、页面交互进行强大的处理。 3 使用介绍 Webview自身的常见方法； Webview的最常用的子类 （WebSettings类、WebViewClient类、WebChromeClient类) Android和Js的交互 3.1 Webview自身的常见方法 3.1.1 WebView的状态 1234567891011121314151617181920//激活WebView为活跃状态，能正常执行网页的响应webView.onResume() ；//当页面被失去焦点被切换到后台不可见状态，需要执行onPause//通过onPause动作通知内核暂停所有的动作，比如DOM的解析、plugin的执行、JavaScript执行。webView.onPause()；//当应用程序(存在webview)被切换到后台时，这个方法不仅仅针对当前的webview而是全局的全应用程序的webview//它会暂停所有webview的layout，parsing，javascripttimer。降低CPU功耗。webView.pauseTimers()//恢复pauseTimers状态webView.resumeTimers()；//销毁Webview//在关闭了Activity时，如果Webview的音乐或视频，还在播放。就必须销毁Webview//但是注意：webview调用destory时,webview仍绑定在Activity上//这是由于自定义webview构建时传入了该Activity的context对象//因此需要先从父容器中移除webview,然后再销毁webview:rootLayout.removeView(webView); webView.destroy(); 3.1.2 关于前进 / 后退网页 12345678910111213//是否可以后退Webview.canGoBack() //后退网页Webview.goBack()//是否可以前进 Webview.canGoForward()//前进网页Webview.goForward()//以当前的index为起始点前进或者后退到历史记录中指定的steps//如果steps为负数则为后退，正数则为前进Webview.goBackOrForward(intsteps) 运用 activity back 12345678910111213141516171819@Overridepublic boolean onKeyDown(int keyCode, KeyEvent event) &#123; if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) &#123; setWebViewGoBack(); return true; &#125; return false;&#125;/** * 设置webView 后退 */private void setWebViewGoBack() &#123; if (mWebview.canGoBack()) &#123; mWebview.goBack(); &#125; else &#123; finish(); &#125;&#125; 3.1.3 清除缓存数据 12345678910//清除网页访问留下的缓存//由于内核缓存是全局的因此这个方法不仅仅针对webview而是针对整个应用程序.Webview.clearCache(true);//清除当前webview访问的历史记录//只会webview访问历史记录里的所有记录除了当前访问记录Webview.clearHistory()；//这个api仅仅清除自动完成填充的表单数据，并不会清除WebView存储到本地的数据Webview.clearFormData()； 3.2 常用类 3.2.1 WebSettings类 配置步骤1：添加访问网络权限（AndroidManifest.xml）1&lt;uses-permission android:name="android.permission.INTERNET"/&gt; 配置步骤2：生成一个WebView组件（有两种方式）12345//方式1：直接在在Activity中生成WebView webView = new WebView(this)//方法2：在Activity的layout文件里添加webview控件：WebView webview = (WebView) findViewById(R.id.webView1); 配置步骤3：进行配置-利用WebSettings子类（常见方法） 123456789101112131415161718192021222324//声明WebSettings子类WebSettings webSettings = webView.getSettings();//如果访问的页面中要与Javascript交互，则webview必须设置支持JavascriptwebSettings.setJavaScriptEnabled(true); //支持插件webSettings.setPluginsEnabled(true); //设置自适应屏幕，两者合用webSettings.setUseWideViewPort(true); //将图片调整到适合webview的大小 webSettings.setLoadWithOverviewMode(true); // 缩放至屏幕的大小//缩放操作webSettings.setSupportZoom(true); //支持缩放，默认为true。是下面那个的前提。webSettings.setBuiltInZoomControls(true); //设置内置的缩放控件。若为false，则该WebView不可缩放webSettings.setDisplayZoomControls(false); //隐藏原生的缩放控件//其他细节操作webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //关闭webview中缓存 webSettings.setAllowFileAccess(true); //设置可以访问文件 webSettings.setJavaScriptCanOpenWindowsAutomatically(true); //支持通过JS打开新窗口 webSettings.setLoadsImagesAutomatically(true); //支持自动加载图片webSettings.setDefaultTextEncodingName("utf-8");//设置编码格式 常见用法：设置WebView缓存 当加载 html 页面时，WebView会在/data/data/包名目录下生成 database 与 cache 两个文件夹 请求的 URL记录保存在 WebViewCache.db，而 URL的内容是保存在 WebViewCache 文件夹下 是否启用缓存 12345678910//优先使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //缓存模式如下： //LOAD_CACHE_ONLY: 不使用网络，只读取本地缓存数据 //LOAD_DEFAULT: （默认）根据cache-control决定是否从网络上取数据。 //LOAD_NO_CACHE: 不使用缓存，只从网络获取数据. //LOAD_CACHE_ELSE_NETWORK，只要本地有，无论是否过期，或者no-cache，都使用缓存中的数据。//不使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); 结合使用（离线加载) 1234567891011121314if (NetStatusUtil.isConnected(getApplicationContext())) &#123; webSettings.setCacheMode(WebSettings.LOAD_DEFAULT); //根据cache-control决定是否从网络上取数据。&#125; else &#123; webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //没网，则从本地获取，即离线加载&#125;webSettings.setDomStorageEnabled(true); // 开启 DOM storage API 功能webSettings.setDatabaseEnabled(true); //开启 database storage API 功能webSettings.setAppCacheEnabled(true);//开启 Application Caches 功能String cacheDirPath = getFilesDir().getAbsolutePath() + APP_CACAHE_DIRNAME;webSettings.setAppCachePath(cacheDirPath); //设置 Application Caches 缓存目录 注意： 每个 Application 只调用一次 WebSettings.setAppCachePath()，WebSettings.setAppCacheMaxSize() 3.2.2 WebViewClient类 作用：处理各种通知 &amp; 请求事件 常见方法： 常见方法1：shouldOverrideUrlLoading() 作用：打开网页时不调用系统浏览器， 而是在本WebView中显示；在网页上的所有加载都经过这个方法,这个函数我们可以做很多操作。123456789101112131415161718192021//步骤1. 定义Webview组件Webview webview = (WebView) findViewById(R.id.webView1);//步骤2. 选择加载方式 //方式1. 加载一个网页： webView.loadUrl("http://www.google.com/"); //方式2：加载apk包中的html页面 webView.loadUrl("file:///android_asset/test.html"); //方式3：加载手机本地的html页面 webView.loadUrl("content://com.android.htmlfileprovider/sdcard/test.html");//步骤3. 复写shouldOverrideUrlLoading()方法，使得打开网页时不调用系统浏览器， 而是在本WebView中显示 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean shouldOverrideUrlLoading(WebView view, String url) &#123; view.loadUrl(url); return true; &#125; &#125;); 常见方法2：onPageStarted() 作用：开始载入页面调用的，我们可以设定一个loading的页面，告诉用户程序在等待网络响应。123456webView.setWebViewClient(new WebViewClient()&#123; @Override public void onPageStarted(WebView view, String url, Bitmap favicon) &#123; //设定加载开始的操作 &#125; &#125;); 常见方法3：onPageFinished() 作用：在页面加载结束时调用。我们可以关闭loading 条，切换程序动作。123456789 /** * 在页面加载结束时调用。 */@Overridepublic void onPageFinished(WebView view, String url) &#123; //设定加载结束的操作 mProgressBar.setVisibility(View.GONE);&#125; 常见方法4：onLoadResource() 作用：在加载页面资源时会调用，每一个资源（比如图片）的加载都会调用一次。123456 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean onLoadResource(WebView view, String url) &#123; //设定加载资源的操作 &#125;&#125;); 常见方法5：onReceivedError（） 作用：加载页面的服务器出现错误时（如404）调用。 App里面使用webview控件的时候遇到了诸如404这类的错误的时候，若也显示浏览器里面的那种错误提示页面就显得很丑陋了，那么这个时候我们的app就需要加载一个本地的错误提示页面，即webview如何加载一个本地的页面 12345678910111213141516//步骤1：写一个html文件（error_handle.html），用于出错时展示给用户看的提示页面//步骤2：将该html文件放置到代码根目录的assets文件夹下//步骤3：复写WebViewClient的onRecievedError方法//该方法传回了错误码，根据错误类型可以进行不同的错误分类处理 webView.setWebViewClient(new WebViewClient()&#123; @Override public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)&#123;switch(errorCode) &#123; case HttpStatus.SC_NOT_FOUND: view.loadUrl("file:///android_assets/error_handle.html"); break; &#125; &#125; &#125;); 常见方法6：onReceivedSslError() 作用：处理https请求webView默认是不处理https请求的，页面显示空白，需要进行如下设置：12345678webView.setWebViewClient(new WebViewClient() &#123; @Override public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) &#123; handler.proceed(); //表示等待证书响应 // handler.cancel(); //表示挂起连接，为默认方式 // handler.handleMessage(null); //可做其他处理 &#125; &#125;); 3.2.3 WebChromeClient类 作用：辅助 WebView 处理 Javascript 的对话框,网站图标,网站标题等等。常见使用： 常见方法1： onProgressChanged（） 作用：获得网页的加载进度并显示 12345678910webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onProgressChanged(WebView view, int newProgress) &#123; if (newProgress &lt; 100) &#123; String progress = newProgress + "%"; progress.setText(progress); &#125; else &#123; &#125; &#125;&#125;); 常见方法2： onReceivedTitle（） 作用：获取Web页中的标题 1234567webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onReceivedTitle(WebView view, String title) &#123; titleview.setText(title)； &#125;&#125;); 3.3 WebView与JS的交互参考 3.4 注意事项：如何避免WebView内存泄露？ 3.4.1 不在xml中定义 Webview ，而是在需要的时候在Activity中创建，并且Context使用 getApplicationgContext() 1234LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);mWebView = new WebView(getApplicationContext());mWebView.setLayoutParams(params);mLayout.addView(mWebView); 3.4.2 在 Activity 销毁（ WebView ）的时候，先让 WebView 加载null内容，然后移除 WebView，再销毁 WebView，最后置空。 123456789101112@Overrideprotected void onDestroy() &#123; if (mWebView != null) &#123; mWebView.loadDataWithBaseURL(null, "", "text/html", "utf-8", null); mWebView.clearHistory(); ((ViewGroup) mWebView.getParent()).removeView(mWebView); mWebView.destroy(); mWebView = null; &#125; super.onDestroy();&#125; 参考]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>SwipeRefreshLayout</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android O Fonts]]></title>
    <url>%2F2018%2F01%2F25%2Fandroid%2Fandroid%20O%20Fonts%2F</url>
    <content type="text"><![CDATA[1 Downloadable Fonts您可以使用可下载字体功能在以下几个方面： 使用Android Studio和谷歌播放服务 编程 通过支持库 2 Fonts in XMLWebView控件功能强大，除了具有一般View的属性和设置外，还可以对url请求、页面加载、渲染、页面交互进行强大的处理。 3 使用介绍 Webview自身的常见方法； Webview的最常用的子类 （WebSettings类、WebViewClient类、WebChromeClient类) Android和Js的交互 3.1 Webview自身的常见方法 3.1.1 WebView的状态 1234567891011121314151617181920//激活WebView为活跃状态，能正常执行网页的响应webView.onResume() ；//当页面被失去焦点被切换到后台不可见状态，需要执行onPause//通过onPause动作通知内核暂停所有的动作，比如DOM的解析、plugin的执行、JavaScript执行。webView.onPause()；//当应用程序(存在webview)被切换到后台时，这个方法不仅仅针对当前的webview而是全局的全应用程序的webview//它会暂停所有webview的layout，parsing，javascripttimer。降低CPU功耗。webView.pauseTimers()//恢复pauseTimers状态webView.resumeTimers()；//销毁Webview//在关闭了Activity时，如果Webview的音乐或视频，还在播放。就必须销毁Webview//但是注意：webview调用destory时,webview仍绑定在Activity上//这是由于自定义webview构建时传入了该Activity的context对象//因此需要先从父容器中移除webview,然后再销毁webview:rootLayout.removeView(webView); webView.destroy(); 3.1.2 关于前进 / 后退网页 12345678910111213//是否可以后退Webview.canGoBack() //后退网页Webview.goBack()//是否可以前进 Webview.canGoForward()//前进网页Webview.goForward()//以当前的index为起始点前进或者后退到历史记录中指定的steps//如果steps为负数则为后退，正数则为前进Webview.goBackOrForward(intsteps) 运用 activity back 12345678910111213141516171819@Overridepublic boolean onKeyDown(int keyCode, KeyEvent event) &#123; if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) &#123; setWebViewGoBack(); return true; &#125; return false;&#125;/** * 设置webView 后退 */private void setWebViewGoBack() &#123; if (mWebview.canGoBack()) &#123; mWebview.goBack(); &#125; else &#123; finish(); &#125;&#125; 3.1.3 清除缓存数据 12345678910//清除网页访问留下的缓存//由于内核缓存是全局的因此这个方法不仅仅针对webview而是针对整个应用程序.Webview.clearCache(true);//清除当前webview访问的历史记录//只会webview访问历史记录里的所有记录除了当前访问记录Webview.clearHistory()；//这个api仅仅清除自动完成填充的表单数据，并不会清除WebView存储到本地的数据Webview.clearFormData()； 3.2 常用类 3.2.1 WebSettings类 配置步骤1：添加访问网络权限（AndroidManifest.xml）1&lt;uses-permission android:name="android.permission.INTERNET"/&gt; 配置步骤2：生成一个WebView组件（有两种方式）12345//方式1：直接在在Activity中生成WebView webView = new WebView(this)//方法2：在Activity的layout文件里添加webview控件：WebView webview = (WebView) findViewById(R.id.webView1); 配置步骤3：进行配置-利用WebSettings子类（常见方法） 123456789101112131415161718192021222324//声明WebSettings子类WebSettings webSettings = webView.getSettings();//如果访问的页面中要与Javascript交互，则webview必须设置支持JavascriptwebSettings.setJavaScriptEnabled(true); //支持插件webSettings.setPluginsEnabled(true); //设置自适应屏幕，两者合用webSettings.setUseWideViewPort(true); //将图片调整到适合webview的大小 webSettings.setLoadWithOverviewMode(true); // 缩放至屏幕的大小//缩放操作webSettings.setSupportZoom(true); //支持缩放，默认为true。是下面那个的前提。webSettings.setBuiltInZoomControls(true); //设置内置的缩放控件。若为false，则该WebView不可缩放webSettings.setDisplayZoomControls(false); //隐藏原生的缩放控件//其他细节操作webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //关闭webview中缓存 webSettings.setAllowFileAccess(true); //设置可以访问文件 webSettings.setJavaScriptCanOpenWindowsAutomatically(true); //支持通过JS打开新窗口 webSettings.setLoadsImagesAutomatically(true); //支持自动加载图片webSettings.setDefaultTextEncodingName("utf-8");//设置编码格式 常见用法：设置WebView缓存 当加载 html 页面时，WebView会在/data/data/包名目录下生成 database 与 cache 两个文件夹 请求的 URL记录保存在 WebViewCache.db，而 URL的内容是保存在 WebViewCache 文件夹下 是否启用缓存 12345678910//优先使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //缓存模式如下： //LOAD_CACHE_ONLY: 不使用网络，只读取本地缓存数据 //LOAD_DEFAULT: （默认）根据cache-control决定是否从网络上取数据。 //LOAD_NO_CACHE: 不使用缓存，只从网络获取数据. //LOAD_CACHE_ELSE_NETWORK，只要本地有，无论是否过期，或者no-cache，都使用缓存中的数据。//不使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); 结合使用（离线加载) 1234567891011121314if (NetStatusUtil.isConnected(getApplicationContext())) &#123; webSettings.setCacheMode(WebSettings.LOAD_DEFAULT); //根据cache-control决定是否从网络上取数据。&#125; else &#123; webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //没网，则从本地获取，即离线加载&#125;webSettings.setDomStorageEnabled(true); // 开启 DOM storage API 功能webSettings.setDatabaseEnabled(true); //开启 database storage API 功能webSettings.setAppCacheEnabled(true);//开启 Application Caches 功能String cacheDirPath = getFilesDir().getAbsolutePath() + APP_CACAHE_DIRNAME;webSettings.setAppCachePath(cacheDirPath); //设置 Application Caches 缓存目录 注意： 每个 Application 只调用一次 WebSettings.setAppCachePath()，WebSettings.setAppCacheMaxSize() 3.2.2 WebViewClient类 作用：处理各种通知 &amp; 请求事件 常见方法： 常见方法1：shouldOverrideUrlLoading() 作用：打开网页时不调用系统浏览器， 而是在本WebView中显示；在网页上的所有加载都经过这个方法,这个函数我们可以做很多操作。123456789101112131415161718192021//步骤1. 定义Webview组件Webview webview = (WebView) findViewById(R.id.webView1);//步骤2. 选择加载方式 //方式1. 加载一个网页： webView.loadUrl("http://www.google.com/"); //方式2：加载apk包中的html页面 webView.loadUrl("file:///android_asset/test.html"); //方式3：加载手机本地的html页面 webView.loadUrl("content://com.android.htmlfileprovider/sdcard/test.html");//步骤3. 复写shouldOverrideUrlLoading()方法，使得打开网页时不调用系统浏览器， 而是在本WebView中显示 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean shouldOverrideUrlLoading(WebView view, String url) &#123; view.loadUrl(url); return true; &#125; &#125;); 常见方法2：onPageStarted() 作用：开始载入页面调用的，我们可以设定一个loading的页面，告诉用户程序在等待网络响应。123456webView.setWebViewClient(new WebViewClient()&#123; @Override public void onPageStarted(WebView view, String url, Bitmap favicon) &#123; //设定加载开始的操作 &#125; &#125;); 常见方法3：onPageFinished() 作用：在页面加载结束时调用。我们可以关闭loading 条，切换程序动作。123456789 /** * 在页面加载结束时调用。 */@Overridepublic void onPageFinished(WebView view, String url) &#123; //设定加载结束的操作 mProgressBar.setVisibility(View.GONE);&#125; 常见方法4：onLoadResource() 作用：在加载页面资源时会调用，每一个资源（比如图片）的加载都会调用一次。123456 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean onLoadResource(WebView view, String url) &#123; //设定加载资源的操作 &#125;&#125;); 常见方法5：onReceivedError（） 作用：加载页面的服务器出现错误时（如404）调用。 App里面使用webview控件的时候遇到了诸如404这类的错误的时候，若也显示浏览器里面的那种错误提示页面就显得很丑陋了，那么这个时候我们的app就需要加载一个本地的错误提示页面，即webview如何加载一个本地的页面 12345678910111213141516//步骤1：写一个html文件（error_handle.html），用于出错时展示给用户看的提示页面//步骤2：将该html文件放置到代码根目录的assets文件夹下//步骤3：复写WebViewClient的onRecievedError方法//该方法传回了错误码，根据错误类型可以进行不同的错误分类处理 webView.setWebViewClient(new WebViewClient()&#123; @Override public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)&#123;switch(errorCode) &#123; case HttpStatus.SC_NOT_FOUND: view.loadUrl("file:///android_assets/error_handle.html"); break; &#125; &#125; &#125;); 常见方法6：onReceivedSslError() 作用：处理https请求webView默认是不处理https请求的，页面显示空白，需要进行如下设置：12345678webView.setWebViewClient(new WebViewClient() &#123; @Override public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) &#123; handler.proceed(); //表示等待证书响应 // handler.cancel(); //表示挂起连接，为默认方式 // handler.handleMessage(null); //可做其他处理 &#125; &#125;); 3.2.3 WebChromeClient类 作用：辅助 WebView 处理 Javascript 的对话框,网站图标,网站标题等等。常见使用： 常见方法1： onProgressChanged（） 作用：获得网页的加载进度并显示 12345678910webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onProgressChanged(WebView view, int newProgress) &#123; if (newProgress &lt; 100) &#123; String progress = newProgress + "%"; progress.setText(progress); &#125; else &#123; &#125; &#125;&#125;); 常见方法2： onReceivedTitle（） 作用：获取Web页中的标题 1234567webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onReceivedTitle(WebView view, String title) &#123; titleview.setText(title)； &#125;&#125;); 3.3 WebView与JS的交互参考 3.4 注意事项：如何避免WebView内存泄露？ 3.4.1 不在xml中定义 Webview ，而是在需要的时候在Activity中创建，并且Context使用 getApplicationgContext() 1234LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);mWebView = new WebView(getApplicationContext());mWebView.setLayoutParams(params);mLayout.addView(mWebView); 3.4.2 在 Activity 销毁（ WebView ）的时候，先让 WebView 加载null内容，然后移除 WebView，再销毁 WebView，最后置空。 123456789101112@Overrideprotected void onDestroy() &#123; if (mWebView != null) &#123; mWebView.loadDataWithBaseURL(null, "", "text/html", "utf-8", null); mWebView.clearHistory(); ((ViewGroup) mWebView.getParent()).removeView(mWebView); mWebView.destroy(); mWebView = null; &#125; super.onDestroy();&#125; 参考]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android O</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Openwrt 固件配置]]></title>
    <url>%2F2018%2F01%2F25%2F%E8%B5%84%E6%BA%90%2Fopenwrt%2FOpenwrt%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[翻墙配置https://cokebar.info/archives/664 这个很实用 完全OK ftp1234opkg updateopkg install vsftpd openssh-sftp-server/etc/init.d/vsftpd enable/etc/init.d/vsftpd start OpenWrt挂载U盘(NTFS)并在网上邻居共享访问http://jingyan.baidu.com/article/5225f26b6b273fe6fa090829.html 12345678910111213opkg updateopkg install kmod-usb-coreopkg install kmod-usb2 #安装usb2.0opkg install kmod-usb-ohci #安装usb ohci控制器驱动opkg install kmod-usb-storage #安装usb存储设备驱动opkg install kmod-fs-ext3 #安装ext3分区格式支持组件opkg install kmod-fs-vfat #挂载FATopkg install ntfs-3g #挂载NTFSopkg install mount-utils #挂载卸载工具opkg install block-mountopkg install luci-app-samba #SAMBA网络共享服务/etc/init.d/samba enable #启用并开始SAMBA共享/etc/init.d/samba restart 不废话 按照这个弄 OK后 访问http://jingyan.baidu.com/article/624e7459acd0ee34e9ba5a4a.html 按照这个来 也OKFinder 中 command +K 输入smb://192.168.1.1 OK]]></content>
      <categories>
        <category>资源</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Openwrt 刷机]]></title>
    <url>%2F2018%2F01%2F25%2F%E8%B5%84%E6%BA%90%2Fopenwrt%2FOpenWrt%E5%88%B7%E6%9C%BA%2F</url>
    <content type="text"><![CDATA[刷机晚上回去试试https://post.smzdm.com/p/98238/ 配置1 设置密码 开启ssh之后就可以通过ssh连接路由器1ssh root@192.168.1.1 -p 22 如果还是无法ssh连接参考配置防火墙设置 2 设置语言1.语言设置的位置在：System -&gt; System -&gt; System Properties -&gt; Language and Style &gt; Language通过下拉菜单选择。 2.刚刷完固件只有英语可以选。3.System -&gt; Software -&gt; opkg update4.下载中文语言包的方法：System -&gt; Software –&gt; Software -&gt; Actions，在Download and install package右边的文本框里输入：luci-i18n-chinese，点击OK，系统即会自动下载并安装。5.安装完后到语言设置的位置选择chinese，然后刷新页面即可。 如果以上 方法 不成功 可以使用命令 12opkg updateopkg install luci-i18n-base-zh-cn 安装完成 到语言设置的位置选择chinese，然后刷新页面即可。 3 开启使用 SFTP 客户端上传功能1234root@OpenWrt:~# opkg updateroot@OpenWrt:~# opkg install vsftpd openssh-sftp-serverroot@OpenWrt:~# /etc/init.d/vsftpd enableroot@OpenWrt:~# /etc/init.d/vsftpd start FileZilla 上传文件连接 上传文件 4 翻墙配置参考大神配置1 opkg opkg install12opkg updateopkg opkg install ip ipset iptables-mod-tproxy libev libpthread libpcre 2 下载需要的包接下来下载软件，注意需要根据自己的CPU型号来进行选择。下载地址： http://openwrt-dist.sourceforge.net/packages/OpenWrt/ 12345678910libcares_x.xx-x_xxxx.ipklibmbedtls_x.x.x-x_xxxx.ipklibsodium_x.x.xx-x_xxxx.ipkshadowsocks-libev_x.x.x-x_xxxx.ipkdns-forwarder_x.x.x-x_xxxx.ipkChinaDNS_x.x.x-x_xxxx.ipkluci-app-shadowsocks_x.x.x-x_all.ipkluci-app-chinadns_x.x.x-x_all.ipkluci-app-dns-forwarder_x.x.x-x_all.ipk 使用 FTP上传文件将下载的包通过WinSCP之类的工具上传至路由器的/tmp目录。安装shadowsocks, ChinaDNS以及dns-forwarder： 12345cd /tmpopkg install libsodium*.ipk libmbedtls*.ipk libcares*.ipkopkg install shadowsocks-libev*.ipk luci-app-shadowsocks*.ipkopkg install ChinaDNS*.ipk luci-app-chinadns*.ipkopkg install dns-forwarder*.ipk luci-app-dns-forwarder*.ipk shadowsocks 配置需要截图太多了 参考大神的]]></content>
      <categories>
        <category>资源</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JS常用技巧]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fjs%2Fjs%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[1 数组中添加数组 使用 concat(Array) 方法 非pushconcat(Array) 方法123456var arrA=[1,2,3];var arrB=[4,5,6];var a = arrA.concat(arrB);console.log(a);// [1, 2, 3 ,4 ,5,6] push123456var arrA=[1,2,3];var arrB=[4,5,6];var a = arrA.push(arrB);console.log(a);// [1, 2, 3 ,&#123;[4,5,6]&#125;] 2]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic 项目未完成]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2F%E9%A1%B9%E7%9B%AE%E6%9C%AA%E5%AE%8C%E6%88%90%2F</url>
    <content type="text"><![CDATA[1 motion 删除接口2小视频播放页面]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic 调试]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E8%B0%83%E8%AF%95%2F</url>
    <content type="text"><![CDATA[1 页面调试1open -n /Applications/Google\ Chrome.app/ --args --disable-web-security --user-data-dir=/Users/kylinhuang/MyChromeDevUserData/ 2 设备调试修改 devtool 查看 源码node_modules @ionic/app-scripts/config/webpack.config.js 12修改 devtool 查看 源码devtool: eval-source-map, 浏览器 查看 chrome://inspect/#devices 错误在node_modules/@ionic/app-script/config/webpack.config.js12345678910111213141516171819202122232425 module: &#123; loaders: [ &#123; test: /\.json$/, loader: 'json-loader' &#125;, &#123; test: /\.ts$/, loader: process.env.IONIC_WEBPACK_LOADER &#125;, &#123; test: /\.js$/, loader: process.env.IONIC_WEBPACK_TRANSPILE_LOADER &#125;, &#123; test: /\.jsx?$/, exclude: /(node_modules|bower_components)/, loader: 'babel-loader', // 'babel-loader' is also a legal name to reference query: &#123; plugins: ["transform-runtime", "babel-plugin-transform-regenerator"], presets: ['es2015','stage-3'] &#125; &#125; ]&#125;, 添加 以下代码 123456789&#123; test: /\.jsx?$/, exclude: /(node_modules|bower_components)/, loader: 'babel-loader', // 'babel-loader' is also a legal name to reference query: &#123; plugins: ["transform-runtime", "babel-plugin-transform-regenerator"], presets: ['es2015','stage-3'] &#125;&#125;]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic移动端 监听事件]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[1 物理返回按钮 back12345678910111213141516171819202122232425 ionViewDidLoad() &#123; this.registerBackButtonAction();&#125;ionViewDidLeave()&#123; Log.d("AddBulbPage --&gt; ",'ionViewDidLeave'); this.unRegisterBackButtonAction();&#125;//物理返回按钮 android backprivate registerBackButtonAction()&#123; if(!this.unRegisterFun)&#123; this.unRegisterFun = this.platform.registerBackButtonAction(() =&gt; &#123; this.onBack(); &#125;,101); &#125;&#125;private unRegisterBackButtonAction()&#123; if(this.unRegisterFun)&#123; this.unRegisterFun(); this.unRegisterFun = null; &#125;&#125; #]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic移动端web的性能优化开源组件]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E7%A7%BB%E5%8A%A8%E7%AB%AFweb%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BC%80%E6%BA%90%E7%BB%84%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[1、四种方式优化ionic,接近原生体验 http://scottbolinger.com/4-ways-to-make-your-ionic-app-feel-native/ 2、ionic的问题事件收集http://emersonthompson.com.br/ionic-collection/ 3、ionic创建动画http://blog.ionic.io/animating-elements-in-your-ionic-app/ 4、好用的move.js,基于css3http://devdactic.com/ionic-with-movejs/http://visionmedia.github.io/move.js/ 5、移动端日期http://rajeshwarpatlolla.github.io/DatePickerForIonicFramework/demo/#/tab/home 6、angularjs的缓存https://github.com/jmdobry/angular-cache 7、特效移除cardshttp://codepen.io/ionic/pen/nxEdH 8、Trigger Pull To Refresh In Ionic Framework Appshttps://calendee.com/2015/04/25/trigger-pull-to-refresh-in-ionic-framework-apps/ 9、ionic-socketio-chathttp://melvin0008.github.io/blog/ionic-socketio-chat/ 10、饿了么开源的服务器中间件restchttps://www.oschina.net/p/restc 11、yii2结合angularjs使用http://blog.neattutorials.com/angularjs-yii2-part-1-routing/ 12、关于github上readme.html的文件编辑http://www.qdfuns.com/notes/21014/2ff9fbda55e88aa7896ce72837852adb.html 13、一些移动端的日期组件http://market.ionic.io/plugins/onezone-datepicker 14、浮动按钮的多功能http://market.ionic.io/plugins/ion-floating-menu 15、图片预览器http://market.ionic.io/plugins/ionic-photo-browser 16、一个超级好用的super-popuphttp://market.ionic.io/plugins/ionic-super-popup 17、超级按钮http://market.ionic.io/plugins/material-action-button#description 18、实用的时间轴https://github.com/comapedrosa/ionic-timeline 19、angularjs非常详细的教程https://www.zouyesheng.com/angular.html 20、angularjs的教程http://each.sinaapp.com/angular/https://github.com/dolymood/AngularLearning 21、25个可遇不可求的jquey插件http://lib.csdn.net/article/jquery/8042 22、超级好用图片轮播http://owlgraphic.com/owlcarousel/demos/custom.html 23、50个丰富的插件http://lib.csdn.net/article/jquery/8038 24、15款最好的 jQuery 网格布局插件http://lib.csdn.net/article/jquery/8394 http://blog.csdn.net/mygrilzhuyulin/article/details/52687738 https://github.com/dicallc/ionic3_angular4_JD 仿钉钉左右滑动日历http://www.jianshu.com/p/9e0c5c457f43]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic 文件上传下载 cordova-plugin-file-transfer]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[文件上传下载 cordova-plugin-file-transfer下载地址git 下载1234567download( source: string, target: string, successCallback: (fileEntry: FileEntry) =&gt; void, errorCallback: (error: FileTransferError) =&gt; void, trustAllHosts?: boolean, options?: FileDownloadOptions): void; demo 12345678910111213141516var source = encodeURI(motion.videoUrl);var target = "/storage/emulated/0//DCIM/camera/ED73463F498CF11D9F3834E18DAA1E10_motion_1507718040820.jpg" ;var fileTransfer = new FileTransfer();fileTransfer.download(source,target, function(entry) &#123; console.log("download complete: " + entry.toURL()); &#125;, function(error) &#123; console.log("download error source " + error.source); console.log("download error target " + error.target); console.log("download error code" + error.code); &#125;, false ,null); 参数 类型 说明 source String 下载地址 url target String 文件下载目标地址 successCallback Function 文件下载成功 Callback errorCallback Function 文件下载失败 Callback trustAllHosts boolean defaults to false. If set to true, it accepts all security certificates. Not recommended for production use. Supported on iOS. options boolean currently only supports headers (such as Authorization (Basic Authentication), etc) 上传]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ionic常用组件]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[DatePipe 1234567891011121314151617181 引入控件import &#123; DatePipe &#125; from '@angular/common';constructor(private datePipe: DatePipe) &#123; &#125;如果出现 不支持 问题添加@Component(&#123; providers: [DatePipe], selector: 'app-motion', templateUrl: 'motion.component.html'&#125;)2 使用 startTime = this.datePipe.transform(new Date("2017-01-4 15:30:10"), 'hh:mm:ss a');结果 03:30:10 PM]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic 下拉刷新]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%2F</url>
    <content type="text"><![CDATA[下拉刷新 ion-refresherdoc 控件12345 &lt;ion-refresher (ionRefresh)="doRefresh($event)"&gt; &lt;ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles" refreshingText="Refreshing..."&gt; &lt;/ion-refresher-content&gt;&lt;/ion-refresher&gt; 属性 类型 详情 on-refresh(可选) 表达式 当用户下拉到一定程度然后开始刷新时触发 on-pulling(可选) 表达式 当用户开始下来刷新时触发 pullingIcon(可选) 字符串 当用户下拉时显示的图标。默认: ‘ion-arrow-down-c’ pullingText(可选) 字符串 当用户下拉时显示的文字 refreshingSpinner(可选) 字符串 动画SVG微调显示刷新开始时 refreshingText(可选) 字符串 用户刷新后显示的文字 下拉刷新 执行 doRefresh 加载数据保存motionList 页面显示 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667 // 下拉刷新async doRefresh(refresher)&#123; this.CURRENT_PAGENO = 1 ; console.log("doRefresh"); /* http请求 */ let timer:any; try &#123; let result = await this.SNAP_GET_SECURITY_LOG_BY_CONDITION(false); if(result)&#123; clearTimeout(timer); refresher.complete(); // this.ionViewWillEnter(); &#125;else &#123; timer = setTimeout(()=&gt;&#123; clearTimeout(timer); refresher.complete(); &#125;,4000) &#125; &#125; catch (e) &#123; clearTimeout(timer); refresher.complete(); &#125;&#125; // 获取数据async SNAP_GET_SECURITY_LOG_BY_CONDITION(isLoadMore)&#123; Log.e(this.TAG,"SNAP_GET_SECURITY_LOG_BY_CONDITION"); console.log("SNAP_GET_SECURITY_LOG_BY_CONDITION"); let result = await this.deviceInfo.doAction(&#123; name: DeviceActionName.SNAP_GET_SECURITY_LOG_BY_CONDITION, params: &#123; currentPageNo : this.CURRENT_PAGENO, pageSize : this.PAGE_SIZE, date : this.selectSecurityDate, lastStartTime : '', condition: [] &#125; &#125;); console.log(result); if(result.messageCode != "undefined" || result.messageCode != null &amp;&amp; result.messageCode == "200")&#123; console.log(result.list.length); if ( result.list.length &gt; 0 )&#123; if (isLoadMore)&#123; Log.d("SnapActivityPage","isLoadMore push"); this.motionList = this.motionList.concat(result.list) ; Log.d("SnapActivityPage","isLoadMore push" + this.motionList.length + " result.list " +result.list.length ); &#125;else &#123; this.motionList = result.list ; &#125; &#125; return true ; &#125; return false ;&#125; 12345678 &lt;section *ngIf="motionList.length!=0"&gt; &lt;div *ngFor="let item of motionList"&gt; &lt;div class="space_none"&gt;&lt;/div&gt; &lt;app-motion [motion]="item" [page] = "page"&gt;&lt;/app-motion&gt; &lt;/div&gt; &lt;div class="space_none"&gt;&lt;/div&gt; &lt;/section&gt; 自动 拉下刷新 Refresher._beginRefresh() 1 声明控件1@ViewChild(Refresher) refresher: Refresher; 2 自动显示刷新1this.refresher._beginRefresh();]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic 开发中遇到的问题]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E5%BC%80%E5%8F%91%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[1 list列表中删除某条 var index = this.motionList.indexOf(motion); if (index &gt; 0 ) this.motionList.splice(index, 1); // delete this.motionList[index]; 数据删除 UI没有删除]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic 上拉加载更多]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A%2F</url>
    <content type="text"><![CDATA[上拉加载更多 ion-infinite-scrolldoc参考 控件1234&lt;!--上拉更多 ng-if="moreDataCanBeLoaded()"--&gt;&lt;ion-infinite-scroll (ionInfinite)="doInfinite($event)" distance="1%" &gt; &lt;ion-infinite-scroll-content&gt;&lt;/ion-infinite-scroll-content&gt;&lt;/ion-infinite-scroll&gt; 1234567891011121314151617181920212223242526272829303132333435 //上拉 加载更多 async doInfinite(infiniteScroll) &#123; if (this.isLock) return ; this.isLock = true; console.log('Begin async operation'); this.CURRENT_PAGENO = this.CURRENT_PAGENO + 1 ; /* http请求 */ let timer:any; try &#123; let result = await this.SNAP_GET_SECURITY_LOG_BY_CONDITION(true); if(result)&#123; clearTimeout(timer); infiniteScroll.complete(); // this.ionViewWillEnter(); &#125;else &#123; timer = setTimeout(()=&gt;&#123; clearTimeout(timer); infiniteScroll.complete(); &#125;,4000) &#125; this.isLock = false; &#125; catch (e) &#123; clearTimeout(timer); infiniteScroll.complete(); this.isLock = false; &#125; &#125; islock：锁，防止在网络慢的时候多次请求。]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ionic 环境安装]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2Fionic_install%2F</url>
    <content type="text"><![CDATA[Cordova 主页 1 Cordova 安装install npm 、node.js12install npm 、node.jsinstall Cordova CLI install Cordova CLI1npm install -g cordova ionic 2 cordova 创建项目1 创建项目 - ionic start 【项目名】1ionic start myproject 指定创建 ionic2 版本1ionic start awesome-app --v2 指定创建 ionic2 版本 设置 Typescript1ionic start awesome-app --v2 --typescript 3 添加平台 - ionic platform add 【平台】12cd myprojectionic platform add ios 4 编译 运行12345ionic build ios(编译)ionic emulate ios(模拟器上运行)ionic run ios #ionic 2ionic cordova run ios #ionic 3ionic serve (页面调试) 6 常用命令1 初始化 安装npm install 2 安装plugman 插件管理npm install -g plugman 3 添加插件cordova plugin add ../Plugins/cordova-cookie-master-master/ 4 删除插件ionic plugin rm com.sengled.slliveplayer 5 查看插件cordova pluginionic cordova plugin ls]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ionic页面的生命周期]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fionic%2FIonic%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%2F</url>
    <content type="text"><![CDATA[Ionic页面的生命周期官方文档 如官网文档所示，常用的生命周期有如下6个： Event Desc ionViewDidLoad 当页面加载的时候触发，仅在页面创建的时候触发一次，如果被缓存了，那么下次再打开这个页面则不会触发 ionViewWillEnter 当将要进入页面时触发 ionViewDidEnter 当进入页面时触发 ionViewWillLeave 当将要从页面离开时触发 ionViewDidLeave 离开页面时触发 ionViewWillUnload 当页面将要销毁同时页面上元素移除时触发 demo1234567891011121314151617181920212223242526ionViewDidLoad()&#123; console.log("1.0 ionViewDidLoad 当页面加载的时候触发，仅在页面创建的时候触发一次，如果被缓存了，那么下次再打开这个页面则不会触发"); &#125; ionViewWillEnter()&#123; console.log("2.0 ionViewWillEnter 顾名思义，当将要进入页面时触发"); &#125; ionViewDidEnter()&#123; console.log("3.0 ionViewDidEnter 当进入页面时触发"); &#125; ionViewWillLeave()&#123; console.log("4.0 ionViewWillLeave 当将要从页面离开时触发"); &#125; ionViewDidLeave()&#123; console.log("5.0 ionViewDidLeave 离开页面时触发"); &#125; ionViewWillUnload()&#123; console.log("6.0 ionViewWillUnload 当页面将要销毁同时页面上元素移除时触发"); &#125; ionViewCanEnter()&#123; console.log("ionViewCanEnter"); &#125; ionViewCanLeave()&#123; console.log("ionViewCanLeave"); &#125; 运行结果12345678910111213141516ionViewCanEnter1.0 ionViewDidLoad 当页面加载的时候触发，仅在页面创建的时候触发一次，如果被缓存了，那么下次再打开这个页面则不会触发2.0 ionViewWillEnter 顾名思义，当将要进入页面时触发ionViewCanLeave3.0 ionViewDidEnter 当进入页面时触发 4.0 ionViewWillLeave 当将要从页面离开时触发 5.0 ionViewDidLeave 离开页面时触发6.0 ionViewWillUnload 当页面将要销毁同时页面上元素移除时触发]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>ionic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS 常用属性]]></title>
    <url>%2F2018%2F01%2F25%2F%E5%89%8D%E7%AB%AF%2Fcss%2Fcss%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7%2F</url>
    <content type="text"><![CDATA[常用属性1 flex-direction 主轴方向1234567flex-direction: row; 默认值。水平显示flex-direction: row-reverse; 与 row 相同，但是以相反的顺序flex-direction: column; 垂直显示flex-direction: column-reverse; 与 column 相同，但是以相反的顺序flex-direction: initial; 设置该属性为它的默认值flex-direction: inherit; 从父元素继承该属性 2 justify-content 主轴对齐方式（水平轴）1234567justify-content: flex-start ; 默认值。项目位于容器的开头。 justify-content: flex-end ; 项目位于容器的结尾。 justify-content: center ; 项目位于容器的中心。 justify-content: space-between ; 项目位于各行之间留有空白的容器内。justify-content: space-around ; 项目位于各行之前、之间、之后都留有空白的容器内。 justify-content: initial ; 设置该属性为它的默认值。 justify-content: inherit ; 从父元素继承该属性。 3 align-content 侧轴对齐方式（水平轴）12345678align-content: stretch ; 默认值。项目被拉伸以适应容器。 align-content: center ; 项目位于容器的中心。 align-content: flex-start ; 项目位于容器的开头。 align-content: flex-end ; 项目位于容器的结尾。 align-content: space-between ; 项目位于各行之间留有空白的容器内。 align-content: space-around ; 项目位于各行之前、之间、之后都留有空白的容器内。 align-content: initial ; 设置该属性为它的默认值。请参阅 initial。 align-content: inherit ; 从父元素继承该属性。请参阅 inherit。 4 align-items 属性定义flex子项在flex容器的当前行的侧轴（纵轴）方向上的对齐方式。1234567align-items: stretch ; 默认值。项目被拉伸以适应容器。 align-items: center ; 项目位于容器的中心。 align-items: flex-start ; 项目位于容器的开头。 align-items: flex-end ; 项目位于容器的结尾。 align-items: baseline ; 项目位于容器的基线上。 align-items: initial ; 设置该属性为它的默认值。align-items: inherit ; 从父元素继承该属性。]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android demo wifi]]></title>
    <url>%2F2018%2F01%2F25%2Fandroid%2Fdemo%2FandroidDemo_wifi%2F</url>
    <content type="text"><![CDATA[android wifi 自动连接连接方式 无密码连接 mWifiManager.disconnect(); 其他网络 enableNetwork 创建网络 mWifiManager 中添加网络 1234567891011121314151617181920212223public boolean connectSpecificAP(ScanResult scan) &#123; List&lt;WifiConfiguration&gt; list = mWifiManager.getConfiguredNetworks(); boolean networkInSupplicant = false; boolean connectResult = false; // 重新连接指定AP mWifiManager.disconnect(); for (WifiConfiguration w : list) &#123; // 将指定AP 名字转化 // String str = convertToQuotedString(info.ssid); if (w.BSSID != null &amp;&amp; w.BSSID.equals(scan.BSSID)) &#123; connectResult = mWifiManager.enableNetwork(w.networkId, true); // mWifiManager.saveConfiguration(); networkInSupplicant = true; break; &#125; &#125; if (!networkInSupplicant) &#123; WifiConfiguration config = CreateWifiInfo(scan, &quot;&quot;); connectResult = addNetwork(config); &#125; return connectResult; &#125; 创建网络 123456789101112131415161718192021222324252627282930313233343536373839404142// 然后是一个实际应用方法，只验证过没有密码的情况： public WifiConfiguration CreateWifiInfo(ScanResult scan, String Password) &#123; WifiConfiguration config = new WifiConfiguration(); config.hiddenSSID = false; config.status = WifiConfiguration.Status.ENABLED; if (scan.capabilities.contains(&quot;WEP&quot;)) &#123; config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE); config.allowedAuthAlgorithms .set(WifiConfiguration.AuthAlgorithm.OPEN); config.allowedGroupCiphers .set(WifiConfiguration.GroupCipher.WEP104); config.SSID = &quot;\&quot;&quot; + scan.SSID + &quot;\&quot;&quot;; config.wepTxKeyIndex = 0; config.wepKeys[0] = Password; // config.preSharedKey = &quot;\&quot;&quot; + SHARED_KEY + &quot;\&quot;&quot;; &#125; else if (scan.capabilities.contains(&quot;PSK&quot;)) &#123; // config.SSID = &quot;\&quot;&quot; + scan.SSID + &quot;\&quot;&quot;; config.preSharedKey = &quot;\&quot;&quot; + Password + &quot;\&quot;&quot;; &#125; else if (scan.capabilities.contains(&quot;EAP&quot;)) &#123; config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP); config.allowedAuthAlgorithms .set(WifiConfiguration.AuthAlgorithm.OPEN); config.allowedPairwiseCiphers .set(WifiConfiguration.PairwiseCipher.TKIP); config.allowedProtocols.set(WifiConfiguration.Protocol.WPA); config.SSID = &quot;\&quot;&quot; + scan.SSID + &quot;\&quot;&quot;; config.preSharedKey = &quot;\&quot;&quot; + Password + &quot;\&quot;&quot;; &#125; else &#123; config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE); config.SSID = &quot;\&quot;&quot; + scan.SSID + &quot;\&quot;&quot;; // config.BSSID = info.mac; config.preSharedKey = null; // &#125; return config; &#125; 添加到网络 1234567891011121314151617181920/** * 添加到网络 * * @author Xiho * @param wcg */ public boolean addNetwork(WifiConfiguration wcg) &#123; if (wcg == null) &#123; return false; &#125; // receiverDhcp = new ReceiverDhcp(ctx, mWifiManager, this, // wlanHandler); // ctx.registerReceiver(receiverDhcp, new // IntentFilter(WifiManager.NETWORK_STATE_CHANGED_ACTION)); int wcgID = mWifiManager.addNetwork(wcg); boolean b = mWifiManager.enableNetwork(wcgID, true); mWifiManager.saveConfiguration(); System.out.println(b); return b; &#125; 有密码连接 在wifi列表中获取 加密方式scanResult.capabilities 创建 WifiConfiguration 添加到 WifiManager WifiManager断开连接WifiManager.disconnect() WifiManager 其他的连接断开WifiManager.enableNetwork(netID, true) WifiManager 重新连接WifiManager.reconnect() code 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * 给外部提供一个借口，连接无线网络 * * @param SSID * @param Password * @param Type * @return &lt;br&gt; * @return true:连接成功；false:连接失败&lt;br&gt; * */ public boolean connect(String SSID, String Password, WifiConnectUtils.WifiCipherType Type) &#123; if (!this.openWifi()) &#123; return false; &#125; // 状态变成WIFI_STATE_ENABLED的时候才能执行下面的语句 while (mWifiManager.getWifiState() == WifiManager.WIFI_STATE_ENABLING) &#123; try &#123; // 为了避免程序一直while循环，让它睡个100毫秒在检测…… Thread.currentThread(); Thread.sleep(100); &#125; catch (InterruptedException ie) &#123; &#125; &#125; if (SSID == null || Password == null || SSID.equals(&quot;&quot;)) &#123; Log.e(this.getClass().getName(), &quot;addNetwork() ## nullpointer error!&quot;); return false; &#125; WifiConfiguration wifiConfig = createWifiInfo(SSID, Password, Type); // wifi的配置信息 if (wifiConfig == null) &#123; return false; &#125; // 查看以前是否也配置过这个网络 WifiConfiguration tempConfig = this.isExsits(SSID); if (tempConfig != null) &#123; mWifiManager.removeNetwork(tempConfig.networkId); &#125; // 添加一个新的网络描述为一组配置的网络。 int netID = mWifiManager.addNetwork(wifiConfig); Log.d(&quot;WifiListActivity&quot;, &quot;wifi的netID为：&quot; + netID); // 断开连接 mWifiManager.disconnect(); // 重新连接 Log.d(&quot;WifiListActivity&quot;, &quot;Wifi的重新连接netID为：&quot; + netID); // 设置为true,使其他的连接断开 boolean mConnectConfig = mWifiManager.enableNetwork(netID, true); mWifiManager.reconnect(); return mConnectConfig; &#125; 网上大多数demo 都是这样子的 兼容性问题 系统 手机型号 无密码连接 密码连接 4.4.2 华为p6-06 YES YES 4.4.4 酷派 YES YES 5.1.0 moto XT YES YES 7.1.1 android 原生系统 Moto G Play NO (wifi 会断开 后重新连接 之前的wifi 并非指定的) NO (wifi 会断开 后重新连接 之前的wifi 并非指定的) 8.0.0 华为mate 9 NO (wifi 会断开 后重新连接 之前的wifi 并非指定的) NO (wifi 会断开 后重新连接 之前的wifi 并非指定的) 原因分析android 4.4.4android 源码http://androidxref.com/4.4.4_r1/xref/packages/apps/Settings/src/com/android/settings/wifi/WifiSettings.java 575行 onContextItemSelected(MenuItem item) 该方法中 12345678910111213141516171819202122232425262728293031574 @Override575 public boolean onContextItemSelected(MenuItem item) &#123;576 if (mSelectedAccessPoint == null) &#123;577 return super.onContextItemSelected(item);578 &#125;579 switch (item.getItemId()) &#123;580 case MENU_ID_CONNECT: &#123;581 if (mSelectedAccessPoint.networkId != INVALID_NETWORK_ID) &#123;582 mWifiManager.connect(mSelectedAccessPoint.networkId,583 mConnectListener);584 &#125; else if (mSelectedAccessPoint.security == AccessPoint.SECURITY_NONE) &#123;585 /** Bypass dialog for unsecured networks */586 mSelectedAccessPoint.generateOpenNetworkConfig();587 mWifiManager.connect(mSelectedAccessPoint.getConfig(),588 mConnectListener);589 &#125; else &#123;590 showDialog(mSelectedAccessPoint, true);591 &#125;592 return true;593 &#125;594 case MENU_ID_FORGET: &#123;595 mWifiManager.forget(mSelectedAccessPoint.networkId, mForgetListener);596 return true;597 &#125;598 case MENU_ID_MODIFY: &#123;599 showDialog(mSelectedAccessPoint, true);600 return true;601 &#125;602 &#125;603 return super.onContextItemSelected(item);604 &#125; 580 点击链接无密码 123586 mSelectedAccessPoint.generateOpenNetworkConfig();587 mWifiManager.connect(mSelectedAccessPoint.getConfig(),588 mConnectListener); 具体分析mSelectedAccessPoint.generateOpenNetworkConfig(); 123456789390 protected void generateOpenNetworkConfig() &#123;391 if (security != SECURITY_NONE)392 throw new IllegalStateException();393 if (mConfig != null)394 return;395 mConfig = new WifiConfiguration();396 mConfig.SSID = AccessPoint.convertToQuotedString(ssid);397 mConfig.allowedKeyManagement.set(KeyMgmt.NONE);398 &#125; mSelectedAccessPoint.getConfig() 123312 WifiConfiguration getConfig() &#123;313 return mConfig;314 &#125; mSelectedAccessPoint 的值1234567891011121314151617181920553 @Override554 public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo info) &#123;555 if (info instanceof AdapterContextMenuInfo) &#123;556 Preference preference = (Preference) getListView().getItemAtPosition(557 ((AdapterContextMenuInfo) info).position);558559 if (preference instanceof AccessPoint) &#123;560 mSelectedAccessPoint = (AccessPoint) preference;561 menu.setHeaderTitle(mSelectedAccessPoint.ssid);562 if (mSelectedAccessPoint.getLevel() != -1563 &amp;&amp; mSelectedAccessPoint.getState() == null) &#123;564 menu.add(Menu.NONE, MENU_ID_CONNECT, 0, R.string.wifi_menu_connect);565 &#125;566 if (mSelectedAccessPoint.networkId != INVALID_NETWORK_ID) &#123;567 menu.add(Menu.NONE, MENU_ID_FORGET, 0, R.string.wifi_menu_forget);568 menu.add(Menu.NONE, MENU_ID_MODIFY, 0, R.string.wifi_menu_modify);569 &#125;570 &#125;571 &#125;572 &#125; mWifiManager.connect(mSelectedAccessPoint.getConfig(),mConnectListener);分析WifiManager 123456781586 public void connect(WifiConfiguration config, ActionListener listener) &#123;1587 if (config == null) throw new IllegalArgumentException(&quot;config cannot be null&quot;);1588 validateChannel();1589 // Use INVALID_NETWORK_ID for arg1 when passing a config object1590 // arg1 is used to pass network id when the network already exists1591 sAsyncChannel.sendMessage(CONNECT_NETWORK, WifiConfiguration.INVALID_NETWORK_ID,1592 putListener(listener), config);1593 &#125; 7.1.1123456789101112131415161718192021222324252627282930313233477 @Override478 public boolean onContextItemSelected(MenuItem item) &#123;479 if (mSelectedAccessPoint == null) &#123;480 return super.onContextItemSelected(item);481 &#125;482 switch (item.getItemId()) &#123;483 case MENU_ID_CONNECT: &#123;484 if (mSelectedAccessPoint.isSaved()) &#123;485 connect(mSelectedAccessPoint.getConfig());486 &#125; else if (mSelectedAccessPoint.getSecurity() == AccessPoint.SECURITY_NONE) &#123;487 /** Bypass dialog for unsecured networks */488 mSelectedAccessPoint.generateOpenNetworkConfig();489 connect(mSelectedAccessPoint.getConfig());490 &#125; else &#123;491 showDialog(mSelectedAccessPoint, WifiConfigUiBase.MODE_CONNECT);492 &#125;493 return true;494 &#125;495 case MENU_ID_FORGET: &#123;496 forget();497 return true;498 &#125;499 case MENU_ID_MODIFY: &#123;500 showDialog(mSelectedAccessPoint, WifiConfigUiBase.MODE_MODIFY);501 return true;502 &#125;503 case MENU_ID_WRITE_NFC:504 showDialog(WRITE_NFC_DIALOG_ID);505 return true;506507 &#125;508 return super.onContextItemSelected(item);509 &#125; 1234853 protected void connect(final WifiConfiguration config) &#123;854 MetricsLogger.action(getActivity(), MetricsEvent.ACTION_WIFI_CONNECT);855 mWifiManager.connect(config, mConnectListener);856 &#125; 相对 4.4.4 引入MetricsLogger.action(getActivity(), MetricsEvent.ACTION_WIFI_CONNECT); http://androidxref.com/7.1.1_r6/xref/frameworks/base/core/java/com/android/internal/logging/MetricsLogger.java 12362 public static void action(Context context, int category) &#123;63 action(context, category, &quot;&quot;);64 &#125; 12345674 public static void action(Context context, int category, String pkg) &#123;75 if (Build.IS_DEBUGGABLE &amp;&amp; category == VIEW_UNKNOWN) &#123;76 throw new IllegalArgumentException(&quot;Must define metric category&quot;);77 &#125;78 EventLogTags.writeSysuiAction(category, pkg);79 &#125; 1EventLogTags.writeSysuiAction(category, pkg); 8.0.0 8.0.0_r4http://androidxref.com/8.0.0_r4/xref/packages/apps/Settings/src/com/android/settings/wifi/WifiSettings.java 12345678910111213141516171819202122232425262728293031323334509 @Override510 public boolean onContextItemSelected(MenuItem item) &#123;511 if (mSelectedAccessPoint == null) &#123;512 return super.onContextItemSelected(item);513 &#125;514 switch (item.getItemId()) &#123;515 case MENU_ID_CONNECT: &#123;516 boolean isSavedNetwork = mSelectedAccessPoint.isSaved();517 if (isSavedNetwork) &#123;518 connect(mSelectedAccessPoint.getConfig(), isSavedNetwork);519 &#125; else if (mSelectedAccessPoint.getSecurity() == AccessPoint.SECURITY_NONE) &#123;520 /** Bypass dialog for unsecured networks */521 mSelectedAccessPoint.generateOpenNetworkConfig();522 connect(mSelectedAccessPoint.getConfig(), isSavedNetwork);523 &#125; else &#123;524 showDialog(mSelectedAccessPoint, WifiConfigUiBase.MODE_CONNECT);525 &#125;526 return true;527 &#125;528 case MENU_ID_FORGET: &#123;529 forget();530 return true;531 &#125;532 case MENU_ID_MODIFY: &#123;533 showDialog(mSelectedAccessPoint, WifiConfigUiBase.MODE_MODIFY);534 return true;535 &#125;536 case MENU_ID_WRITE_NFC:537 showDialog(WRITE_NFC_DIALOG_ID);538 return true;539540 &#125;541 return super.onContextItemSelected(item);542 &#125; 1234561003 protected void connect(final WifiConfiguration config, boolean isSavedNetwork) &#123;1004 // Log subtype if configuration is a saved network.1005 mMetricsFeatureProvider.action(getActivity(), MetricsEvent.ACTION_WIFI_CONNECT,1006 isSavedNetwork);1007 mWifiManager.connect(config, mConnectListener);1008 &#125; android 8.0 这里 又做了修改 http://androidxref.com/8.0.0_r4/xref/packages/apps/Settings/src/com/android/settings/core/instrumentation/MetricsFeatureProvider.java1234563 public void action(Context context, int category, Pair&lt;Integer, Object&gt;... taggedData) &#123;64 for (LogWriter writer : mLoggerWriters) &#123;65 writer.action(context, category, taggedData);66 &#125;67 &#125; 12345678910111233 private List&lt;LogWriter&gt; mLoggerWriters;3435 public MetricsFeatureProvider() &#123;36 mLoggerWriters = new ArrayList&lt;&gt;();37 installLogWriters();38 &#125;3940 protected void installLogWriters() &#123;41 mLoggerWriters.add(new EventLogWriter());42 mLoggerWriters.add(new SettingSuggestionsLogWriter());43 &#125; 主要是 EventLogWriter SettingSuggestionsLogWriter http://androidxref.com/8.0.0_r4/xref/packages/apps/Settings/src/com/android/settings/core/instrumentation/EventLogWriter.java EventLogWriter 中 MetricsLogger 以上分析 只能指定 android 系统API 更改了 不能找到相应的 解决方法 换条路吧从代码上看 1wifiManager.addNetwork返回-1 应该是失败原因 纠结好几个小时 发现在设置中忘记配置 连接是成功的 原因分析android M 连接无 Internet 会提示 是否自动切换一旦自动切换 那就记录下来了 下次 自动连接 就连接不了 检测网络又问题 就自动切换了 解决版本自动连接前 删除配置信息应该在自动连接前 添加 忘记配置就可以了 系统 忘记配置 系统的方法 123456789101112131415161718/** * Delete the network in the supplicant config. * * This function is used instead of a sequence of removeNetwork() * and saveConfiguration(). * * @param config the set of variables that describe the configuration, * contained in a &#123;@link WifiConfiguration&#125; object. * @param listener for callbacks on success or failure. Can be null. * @throws IllegalStateException if the WifiManager instance needs to be * initialized again * @hide */public void forget(int netId, ActionListener listener) &#123; if (netId &lt; 0) throw new IllegalArgumentException(&quot;Network id cannot be negative&quot;); validateChannel(); sAsyncChannel.sendMessage(FORGET_NETWORK, netId, putListener(listener));&#125; hide 不能使用啊 反射吧 android 9.0 禁止了 放弃反射 好吧 放弃 removeNetwork() 试试 发现 不行啊 让系统 不检测 是否有可以用的 Internet https://blog.csdn.net/u010042260/article/details/52931489 frameworks/base/services/core/java/com/android/server/connectivity/NetworkMonitor.java修改：mIsCaptivePortalCheckEnabled = false；即可。 isCaptivePortal() 这个方法真的 在检测了 修改 mIsCaptivePortalCheckEnabled 没有方法 不能反射 通过命令 修改 不需要 root https://android.stackexchange.com/questions/100657/how-to-disable-captive-portal-detection-how-to-remove-exclamation-mark-on-wi-fi https://support.honeywellaidc.com/s/article/What-does-limited-or-no-Internet-Access-mean 修改了 但是 连接 无可用的 Internet还是提示了 但是 可以连接上了 https://android.stackexchange.com/questions/100657/how-to-disable-captive-portal-detection-how-to-remove-exclamation-mark-on-wi-fi settings put global captive_portal_detection_enabled 1刚刚开始 没用重启后 可以连接上了 不太确定 是不是 这个原因还是重启 系统导致的 恢复之前的值settings put global captive_portal_detection_enabled null之后 现在无法复现了问题 待更近]]></content>
      <categories>
        <category>android</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[android umeng push 集成]]></title>
    <url>%2F2018%2F01%2F25%2Fandroid%2FUmeng_Push%2F</url>
    <content type="text"><![CDATA[1 Umeng 账号注册2 下载SDK Demo3 导入 PushSDK]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>umeng</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android studio logcat 设置 缓存大小]]></title>
    <url>%2F2018%2F01%2F25%2Fandroid%2Fandroid_studio_log%2F</url>
    <content type="text"><![CDATA[logcat 经常刷新过快，冲掉之前的数据，可以改下logcat的缓存（缓冲区）大小，可以显示更多行避免被冲掉：文件：安装根目录/bin/idea.properties 1idea.cycle.buffer.size=1024000]]></content>
      <categories>
        <category>android</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hexo github 搭建 blog]]></title>
    <url>%2F2018%2F01%2F05%2F%E5%B7%A5%E5%85%B7%2FHexo%2F</url>
    <content type="text"><![CDATA[使用 Hexo githbub搭建 blog github配置1 注册githug 用户名 username2 创建仓库 仓库名 username.github.io注册名 和仓库名中 username 必须保持一致 本地环境搭建1 install git1brew install git // 安装Git 2 install nodejs3 install Hexo1sudo npm install hexo-cli -g 创建项目1 创建项目12hexo init &lt;folder&gt;hexo init kylinhuang.github.io 2 主题12cd kylinhuang.github.iogit clone https://github.com/iissnan/hexo-theme-next themes/next 修改 kylinhuang/_config.yml1234567title: dimsky 的 9 维空间 //你博客的名字 author: dimsky //你的名字 language: zh-Hans //语言 中文 theme: next //刚刚安装的主题名称 deploy: type: git //使用Git 发布 repo: https://github.com/username/username.github.io.git // 刚创建的Github仓库 3 写文章在在username.github.io/source/_posts 下创建 博客 编译1 测试1hexo s 浏览器中输入https://localhost:4000 访问了 2 发布安装hexo-deployer-git自动部署发布工具1npm install hexo-deployer-git --save 测试没问题后，我们就生成静态网页文件发布至我们的Github pages 中。1hexo clean &amp;&amp; hexo g &amp;&amp; hexo d 第一次 需要输入github邮箱密码 5分钟后 应该能访问了http://kylinhuang.github.io 插件12345678npm install --save hexo-adminhexo server -dhexo s &amp; 后台运行http://localhost:4000/ - 预览页面http://localhost:4000/admin - 编辑页面 语法https://hexo.io/zh-cn/docs/front-matter.html hexo 添加 流程图hexo 添加 时序图 hexo-filter-sequence 插件: 1npm install --save hexo-filter-sequence 2.配置 站点配置文件 _config.yml 中增加如下配置:123456789sequence: webfont: https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js raphael: https://cdn.bootcss.com/raphael/2.2.7/raphael.min.js underscore: https://cdn.bootcss.com/underscore.js/1.8.3/underscore-min.js sequence: https://cdn.bootcss.com/js-sequence-diagrams/1.0.6/sequence-diagram-min.js css: # optional, the url for css, such as hand drawn theme options: theme: simple css_class: Hexo pluginshttps://hexo.io/plugins/ 1 HEXO-browsersync适用于Hexo的BrowserSync插件 123456789npm install hexo-browsersync --save_config.yml 中 browsersync: logLevel: &quot;warn&quot; ghostMode: scroll: true instanceName: &quot;uniqueString&quot; 2 Hexo博客文章影藏 hexo-generator-index2在Hexo插件库找到一个产生首页的插件，自带过滤功能，hexo-generator-index2。 安装12npm install hexo-generator-index2 --savenpm uninstall hexo-generator-index --save 修改hexo的配置文件 打开hexo博客根目录下的_config.yml添加以下内容，过滤分类或者标签为hide的文章 12345678# index2 generator是否包含官方的hexo-generator-index，默认true（包含）index2_include_index: trueindex2_generator:per_page: 8order_by: -date # 按发布时间排序exclude:- tag hide # 不包含标签为hide的文章- category hide # 不包含分类为hide的文章]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[3.3 模板引擎]]></title>
    <url>%2F2017%2F12%2F21%2F%E5%90%8E%E7%AB%AF%2F3.3%20%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%2F</url>
    <content type="text"><![CDATA[1 ejs模板安装 1npm i ejs --save index.js 12345678910111213const path = require('path')const express = require('express')const app = express()const indexRouter = require('./routes/index')const userRouter = require('./routes/users')app.set('views', path.join(__dirname, 'views'))// 设置存放模板文件的目录app.set('view engine', 'ejs')// 设置模板引擎为 ejsapp.use('/', indexRouter)app.use('/users', userRouter)app.listen(3000) index.js 12345678910111213const path = require('path')const express = require('express')const app = express()const indexRouter = require('./routes/index')const userRouter = require('./routes/users')app.set('views', path.join(__dirname, 'views'))// 设置存放模板文件的目录app.set('view engine', 'ejs')// 设置模板引擎为 ejsapp.use('/', indexRouter)app.use('/users', userRouter)app.listen(3000)]]></content>
      <categories>
        <category>后端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[3.2 路由]]></title>
    <url>%2F2017%2F12%2F21%2F%E5%90%8E%E7%AB%AF%2F3.2%20%E8%B7%AF%E7%94%B1%2F</url>
    <content type="text"><![CDATA[1 添加简单路由123456789101112const express = require('express')const app = express()app.get('/', function (req, res) &#123; res.send('hello, express')&#125;)app.get('/users/:name', function (req, res) &#123; res.send('hello, ' + req.params.name)&#125;)app.listen(3000) 以上代码的意思是：当访问根路径时，依然返回 hello, express，当访问如 localhost:3000/users/nswbmw 路径时，返回 hello, nswbmw。路径中 :name 起了占位符的作用，这个占位符的名字是 name，可以通过 req.params.name 取到实际的值。 req.query: 解析后的 url 中的 querystring，如 ?name=haha，req.query 的值为 {name: ‘haha’}req.params: 解析 url 中的占位符，如 /:name，访问 /haha，req.params 的值为 {name: ‘haha’}req.body: 解析后请求体，需使用相关的模块，如 body-parser，请求体为 {“name”: “haha”}，则 req.body 为 {name: ‘haha’} express.Routerindex.js 123456789const express = require('express')const app = express()const indexRouter = require('./routes/index')const userRouter = require('./routes/users')app.use('/', indexRouter)app.use('/users', userRouter)app.listen(3000) routes/index.js 12345678const express = require('express')const router = express.Router()router.get('/', function (req, res) &#123; res.send('hello, express')&#125;)module.exports = router routes/users.js 12345678const express = require('express')const router = express.Router()router.get('/', function (req, res) &#123; res.send('hello, express')&#125;)module.exports = router]]></content>
      <categories>
        <category>后端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[3.1 exports 安装]]></title>
    <url>%2F2017%2F12%2F20%2F%E5%90%8E%E7%AB%AF%2F3.1%20exports%20%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[1 Exports 安装1234mkdir blogcd blognpm initnpm i express@4.14.0 --save 新建 index.js12345678const express = require('express')const app = express()app.get('/', function (req, res) &#123; res.send('hello, express')&#125;)app.listen(3000) 运行12node index.js浏览器 访问 localhost:3000 supervisor在开发过程中，每次修改代码保存后，我们都需要手动重启程序，才能查看改动的效果。使用 supervisor 可以解决这个繁琐的问题，全局安装 supervisor：1npm i -g supervisor 运行 supervisor index 启动程序，如下所示：1supervisor index.js 效果非常好]]></content>
      <categories>
        <category>后端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[snap 推送]]></title>
    <url>%2F2017%2F11%2F15%2FWork%2FSnap%E6%8E%A8%E9%80%81%2F</url>
    <content type="text"><![CDATA[snap google 推送 问题1 send id 不同12snap 项目中 sendid --- 代码中 438479020704google 平台 snap项目 sendid是 1038675259389 google snap 平台 截图sendid - 1038675259389服务器密钥 - AAAA……vRk 旧版本服务器密钥 有问题 测试不通过 不建议使用 google GCM 测试 google 测试demo https://github.com/google/gcm.git 填写 sendid 获取tocken notify send 填写sender api key 为服务器密钥 就可以发送消息 查看GCM 信息 API 测试 12345678910111213141516post 请求 https://android.googleapis.com/gcm/sendheadersContent-Type : application/jsonAuthorization : key=AAAA......vRkBody&#123;"data": &#123; "score": "5x1", "time": "15:10" &#125;, "registration_ids": ["eiIK6T1oiH0:APA91bG8Rd-lwREILEGrprIVh3kM88A2ldQnZthW_v7pcn2W_wMjvf6ebxNVwd-16-42qQ_hoPv1U39ozSz1KFPwDlDwTKoTIk0SupjCuibakZGZYdES-r2aoj_BEXoj6zJZ6qnhs_mA"] &#125; Authorization : key=XXXXX 中 XXXX 是 服务器密钥registration_ids : 是 推送设备的 tocken registration_ids 获取 - 调用google服务 获取tocken 传递参数 sendid 遇见问题 error”: “MismatchSenderId” 原因 : sendid 与 服务器密钥 不匹配 导致 通过 sendid 获取的tocken 与 服务器密钥 不匹配解决 : sendid 与 服务器密钥 不匹配 Authorization 中的Api Key不正确 原因 : sendid 与 服务器密钥 不匹配 导致 Authorization 中 格式不对 格式为 key=AAAA……7vRk 服务器密钥 值不对 解决 : 检查 服务器密钥 是否正确 Umeng 推送// TODO 待完成]]></content>
      <categories>
        <category>Work</category>
      </categories>
      <tags>
        <tag>snap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android WebView]]></title>
    <url>%2F2017%2F11%2F06%2Fandroid%2Fandroid%20WebView%2F</url>
    <content type="text"><![CDATA[1 简介 WebView是一个基于webkit引擎、展现web页面的控件。Android的Webview在低版本和高版本采用了不同的webkit版本内核，4.4后直接使用了Chrome。 2 作用 显示和渲染Web页面 直接使用html文件（网络上或本地assets中）作布局 可和JavaScript交互调用 WebView控件功能强大，除了具有一般View的属性和设置外，还可以对url请求、页面加载、渲染、页面交互进行强大的处理。 3 使用介绍 Webview自身的常见方法； Webview的最常用的子类 （WebSettings类、WebViewClient类、WebChromeClient类) Android和Js的交互 3.1 Webview自身的常见方法 3.1.1 WebView的状态 1234567891011121314151617181920//激活WebView为活跃状态，能正常执行网页的响应webView.onResume() ；//当页面被失去焦点被切换到后台不可见状态，需要执行onPause//通过onPause动作通知内核暂停所有的动作，比如DOM的解析、plugin的执行、JavaScript执行。webView.onPause()；//当应用程序(存在webview)被切换到后台时，这个方法不仅仅针对当前的webview而是全局的全应用程序的webview//它会暂停所有webview的layout，parsing，javascripttimer。降低CPU功耗。webView.pauseTimers()//恢复pauseTimers状态webView.resumeTimers()；//销毁Webview//在关闭了Activity时，如果Webview的音乐或视频，还在播放。就必须销毁Webview//但是注意：webview调用destory时,webview仍绑定在Activity上//这是由于自定义webview构建时传入了该Activity的context对象//因此需要先从父容器中移除webview,然后再销毁webview:rootLayout.removeView(webView); webView.destroy(); 3.1.2 关于前进 / 后退网页 12345678910111213//是否可以后退Webview.canGoBack() //后退网页Webview.goBack()//是否可以前进 Webview.canGoForward()//前进网页Webview.goForward()//以当前的index为起始点前进或者后退到历史记录中指定的steps//如果steps为负数则为后退，正数则为前进Webview.goBackOrForward(intsteps) 运用 activity back 12345678910111213141516171819@Overridepublic boolean onKeyDown(int keyCode, KeyEvent event) &#123; if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) &#123; setWebViewGoBack(); return true; &#125; return false;&#125;/** * 设置webView 后退 */private void setWebViewGoBack() &#123; if (mWebview.canGoBack()) &#123; mWebview.goBack(); &#125; else &#123; finish(); &#125;&#125; 3.1.3 清除缓存数据 12345678910//清除网页访问留下的缓存//由于内核缓存是全局的因此这个方法不仅仅针对webview而是针对整个应用程序.Webview.clearCache(true);//清除当前webview访问的历史记录//只会webview访问历史记录里的所有记录除了当前访问记录Webview.clearHistory()；//这个api仅仅清除自动完成填充的表单数据，并不会清除WebView存储到本地的数据Webview.clearFormData()； 3.2 常用类 3.2.1 WebSettings类 配置步骤1：添加访问网络权限（AndroidManifest.xml）1&lt;uses-permission android:name="android.permission.INTERNET"/&gt; 配置步骤2：生成一个WebView组件（有两种方式）12345//方式1：直接在在Activity中生成WebView webView = new WebView(this)//方法2：在Activity的layout文件里添加webview控件：WebView webview = (WebView) findViewById(R.id.webView1); 配置步骤3：进行配置-利用WebSettings子类（常见方法） 123456789101112131415161718192021222324//声明WebSettings子类WebSettings webSettings = webView.getSettings();//如果访问的页面中要与Javascript交互，则webview必须设置支持JavascriptwebSettings.setJavaScriptEnabled(true); //支持插件webSettings.setPluginsEnabled(true); //设置自适应屏幕，两者合用webSettings.setUseWideViewPort(true); //将图片调整到适合webview的大小 webSettings.setLoadWithOverviewMode(true); // 缩放至屏幕的大小//缩放操作webSettings.setSupportZoom(true); //支持缩放，默认为true。是下面那个的前提。webSettings.setBuiltInZoomControls(true); //设置内置的缩放控件。若为false，则该WebView不可缩放webSettings.setDisplayZoomControls(false); //隐藏原生的缩放控件//其他细节操作webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //关闭webview中缓存 webSettings.setAllowFileAccess(true); //设置可以访问文件 webSettings.setJavaScriptCanOpenWindowsAutomatically(true); //支持通过JS打开新窗口 webSettings.setLoadsImagesAutomatically(true); //支持自动加载图片webSettings.setDefaultTextEncodingName("utf-8");//设置编码格式 常见用法：设置WebView缓存 当加载 html 页面时，WebView会在/data/data/包名目录下生成 database 与 cache 两个文件夹 请求的 URL记录保存在 WebViewCache.db，而 URL的内容是保存在 WebViewCache 文件夹下 是否启用缓存 12345678910//优先使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //缓存模式如下： //LOAD_CACHE_ONLY: 不使用网络，只读取本地缓存数据 //LOAD_DEFAULT: （默认）根据cache-control决定是否从网络上取数据。 //LOAD_NO_CACHE: 不使用缓存，只从网络获取数据. //LOAD_CACHE_ELSE_NETWORK，只要本地有，无论是否过期，或者no-cache，都使用缓存中的数据。//不使用缓存: WebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); 结合使用（离线加载) 1234567891011121314if (NetStatusUtil.isConnected(getApplicationContext())) &#123; webSettings.setCacheMode(WebSettings.LOAD_DEFAULT); //根据cache-control决定是否从网络上取数据。&#125; else &#123; webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //没网，则从本地获取，即离线加载&#125;webSettings.setDomStorageEnabled(true); // 开启 DOM storage API 功能webSettings.setDatabaseEnabled(true); //开启 database storage API 功能webSettings.setAppCacheEnabled(true);//开启 Application Caches 功能String cacheDirPath = getFilesDir().getAbsolutePath() + APP_CACAHE_DIRNAME;webSettings.setAppCachePath(cacheDirPath); //设置 Application Caches 缓存目录 注意： 每个 Application 只调用一次 WebSettings.setAppCachePath()，WebSettings.setAppCacheMaxSize() 3.2.2 WebViewClient类 作用：处理各种通知 &amp; 请求事件 常见方法： 常见方法1：shouldOverrideUrlLoading() 作用：打开网页时不调用系统浏览器， 而是在本WebView中显示；在网页上的所有加载都经过这个方法,这个函数我们可以做很多操作。123456789101112131415161718192021//步骤1. 定义Webview组件Webview webview = (WebView) findViewById(R.id.webView1);//步骤2. 选择加载方式 //方式1. 加载一个网页： webView.loadUrl("http://www.google.com/"); //方式2：加载apk包中的html页面 webView.loadUrl("file:///android_asset/test.html"); //方式3：加载手机本地的html页面 webView.loadUrl("content://com.android.htmlfileprovider/sdcard/test.html");//步骤3. 复写shouldOverrideUrlLoading()方法，使得打开网页时不调用系统浏览器， 而是在本WebView中显示 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean shouldOverrideUrlLoading(WebView view, String url) &#123; view.loadUrl(url); return true; &#125; &#125;); 常见方法2：onPageStarted() 作用：开始载入页面调用的，我们可以设定一个loading的页面，告诉用户程序在等待网络响应。123456webView.setWebViewClient(new WebViewClient()&#123; @Override public void onPageStarted(WebView view, String url, Bitmap favicon) &#123; //设定加载开始的操作 &#125; &#125;); 常见方法3：onPageFinished() 作用：在页面加载结束时调用。我们可以关闭loading 条，切换程序动作。123456789 /** * 在页面加载结束时调用。 */@Overridepublic void onPageFinished(WebView view, String url) &#123; //设定加载结束的操作 mProgressBar.setVisibility(View.GONE);&#125; 常见方法4：onLoadResource() 作用：在加载页面资源时会调用，每一个资源（比如图片）的加载都会调用一次。123456 webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean onLoadResource(WebView view, String url) &#123; //设定加载资源的操作 &#125;&#125;); 常见方法5：onReceivedError（） 作用：加载页面的服务器出现错误时（如404）调用。 App里面使用webview控件的时候遇到了诸如404这类的错误的时候，若也显示浏览器里面的那种错误提示页面就显得很丑陋了，那么这个时候我们的app就需要加载一个本地的错误提示页面，即webview如何加载一个本地的页面 12345678910111213141516//步骤1：写一个html文件（error_handle.html），用于出错时展示给用户看的提示页面//步骤2：将该html文件放置到代码根目录的assets文件夹下//步骤3：复写WebViewClient的onRecievedError方法//该方法传回了错误码，根据错误类型可以进行不同的错误分类处理 webView.setWebViewClient(new WebViewClient()&#123; @Override public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)&#123;switch(errorCode) &#123; case HttpStatus.SC_NOT_FOUND: view.loadUrl("file:///android_assets/error_handle.html"); break; &#125; &#125; &#125;); 常见方法6：onReceivedSslError() 作用：处理https请求webView默认是不处理https请求的，页面显示空白，需要进行如下设置：12345678webView.setWebViewClient(new WebViewClient() &#123; @Override public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) &#123; handler.proceed(); //表示等待证书响应 // handler.cancel(); //表示挂起连接，为默认方式 // handler.handleMessage(null); //可做其他处理 &#125; &#125;); 3.2.3 WebChromeClient类 作用：辅助 WebView 处理 Javascript 的对话框,网站图标,网站标题等等。常见使用： 常见方法1： onProgressChanged（） 作用：获得网页的加载进度并显示 12345678910webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onProgressChanged(WebView view, int newProgress) &#123; if (newProgress &lt; 100) &#123; String progress = newProgress + "%"; progress.setText(progress); &#125; else &#123; &#125; &#125;&#125;); 常见方法2： onReceivedTitle（） 作用：获取Web页中的标题 1234567webview.setWebChromeClient(new WebChromeClient()&#123; @Override public void onReceivedTitle(WebView view, String title) &#123; titleview.setText(title)； &#125;&#125;); 3.3 WebView与JS的交互参考 3.4 注意事项：如何避免WebView内存泄露？ 3.4.1 不在xml中定义 Webview ，而是在需要的时候在Activity中创建，并且Context使用 getApplicationgContext() 1234LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);mWebView = new WebView(getApplicationContext());mWebView.setLayoutParams(params);mLayout.addView(mWebView); 3.4.2 在 Activity 销毁（ WebView ）的时候，先让 WebView 加载null内容，然后移除 WebView，再销毁 WebView，最后置空。 123456789101112@Overrideprotected void onDestroy() &#123; if (mWebView != null) &#123; mWebView.loadDataWithBaseURL(null, "", "text/html", "utf-8", null); mWebView.clearHistory(); ((ViewGroup) mWebView.getParent()).removeView(mWebView); mWebView.destroy(); mWebView = null; &#125; super.onDestroy();&#125; 参考]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>WebView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[3 koa 搭建项目]]></title>
    <url>%2F2017%2F11%2F03%2F%E5%90%8E%E7%AB%AF%2Fkoa%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[创建项目12345678mkidr servernpm init# 安装相关 npm init# 初始化项目npm i koa koa-logger koa-session koa-bodyparser koa-router mongoose sha1 lodash uuid xss bluebird speakeasy --save 123456koa-logger #日志中间件koa-session cookie #会话中间件koa-bodyParser #解析表单数据中间件koa-router #路由中间件mongoose #mongodb 中间件sha1 #加密算法 创建 index.js1234567891011121314151617181920212223var koa = require('koa');var logger = require('koa-logger');var session = require('koa-session');var bodyParser = require('koa-bodyparser');var app = koa();app.keys = ['server']; // cookie session 加密keyapp.use(logger());app.use(session(app));app.use(bodyParser());app.use(function *(next)&#123; console.log(this.href); console.log(this.method); this.body = &#123; success : true &#125; yield next;&#125;);app.listen('1234');console.log('http://localhost:1234/') 命令行 123node index.js在浏览器中访问 http://localhost:1234/ codehttps://github.com/kylinhuang/APIServer提交 #koa #创建项目 router 添加 index.js123456789101112131415161718192021222324252627282930var koa = require('koa');var logger = require('koa-logger');var session = require('koa-session');var bodyParser = require('koa-bodyparser');var app = koa();app.keys = ['server']; // cookie session 加密keyapp.use(logger());app.use(session(app));app.use(bodyParser());var router = require('./config/routes')();app.use(router.routes()) .use(router.allowedMethods());// app.use(function *(next)&#123;// console.log(this.href);// console.log(this.method);// this.body = &#123;// success : true// &#125;// yield next;// &#125;);app.listen('1234');console.log('http://localhost:1234/') routes.js 123456789101112131415161718var Router = require('koa-router');var User = require('../app/controllers/user');var App = require('../app/controllers/app');module.exports = function () &#123; var router = new Router(&#123; prefix:'/api/1' &#125;); // router.post('/api/i/u/signup' ,User.signup); router.post('/u/signup' ,User.signup); router.post('/u/verify' ,User.verify); router.post('/u/update' ,User.update); router.post('/signature' ,App.signature); return router ;&#125;; user.js12345678910111213141516exports.signup = function *(next) &#123; this.body = &#123; success : true &#125;&#125;exports.verify = function *(next) &#123; this.body = &#123; success : true &#125;&#125;exports.update = function *(next) &#123; this.body = &#123; success : true &#125;&#125;]]></content>
      <categories>
        <category>后端</category>
      </categories>
      <tags>
        <tag>koa</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[1.2 mongoDB install]]></title>
    <url>%2F2017%2F11%2F03%2F%E5%90%8E%E7%AB%AF%2F1.2%20mongoDB%20%20install%2F</url>
    <content type="text"><![CDATA[mac 平台1 Homebrew installHomebrew打开网页 copy1/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 粘贴到命令行安装完成 2 mongoDB installmongodbmongodb下载 12345678检验安装是否安装 mongo开启 数据库 mongod mongod -dbpath 路径mongod -dbpath /Users/kylinhuang/learn/db-dbpath 数据库文档位置 3 mongodb 常用命名1234567891011121314151617181920212223# 使用数据库mongo# 列出所有的数据库show dbs# 使用某个数据库/新建数据库use 数据库名# 查看 当前所在数据库db# 插入数据db.student.insert(&#123;"name":"kylinhuang","age":25&#125;);# 查看 当前数据库所有集合show collections# 查询 student 中所有数据db.student.find();# 删除 数据库db.dropDatabase(); 3.1 插入数据 - 增1db.student.insert(&#123;"name":"xiaoming"&#125;); 3.2 删除数据 - 删1db.restaurants.remove( &#123; "borough": "Manhattan" &#125; ) By default, the remove() method removes all documents that match the remove condition. Use the justOne option to limit the remove operation to only one of the matching documents. 1db.restaurants.remove( &#123; "borough": "Queens" &#125;, &#123; justOne: true &#125; ) 3.3 修改数据 - 改修改里面还有查询条件。你要该谁，要告诉mongo。查找名字叫做小明的，把年龄更改为16岁： 1db.student.update(&#123;"name":"小明"&#125;,&#123;$set:&#123;"age":16&#125;&#125;); 查找数学成绩是70，把年龄更改为33岁：1db.student.update(&#123;"score.shuxue":70&#125;,&#123;$set:&#123;"age":33&#125;&#125;); 更改所有匹配项目：By default, the update() method updates a single document. To update multiple documents, use the multi option in the update() method. 1db.student.update(&#123;"sex":"男"&#125;,&#123;$set:&#123;"age":33&#125;&#125;,&#123;multi: true&#125;); 完整替换，不出现$set关键字了： 1db.student.update(&#123;"name":"小明"&#125;,&#123;"name":"大明","age":16&#125;); 3.4 查找数据 - 查查找数据，用find。find中没有参数，那么将列出这个集合的所有文档：1db.restaurants.find() 精确匹配：1db.student.find(&#123;"score.shuxue":70&#125;); 多个条件：1db.student.find(&#123;"score.shuxue":70 , "age":12&#125;) 大于条件：1db.student.find(&#123;"score.yuwen":&#123;$gt:50&#125;&#125;); 寻找所有年龄是9岁，或者11岁的学生1db.student.find(&#123;$or:[&#123;"age":9&#125;,&#123;"age":11&#125;]&#125;); 查找完毕之后，打点调用sort，表示升降排序1db.restaurants.find().sort( &#123; "borough": 1, "address.zipcode": 1 &#125; ) 4 导入数据1mongoimport --db test --collection restaurants --drop --file primer-dataset.json –db test 想往哪个数据库里面导入–collection restaurants 想往哪个集合中导入–drop 把集合清空–file primer-dataset.json 哪个文件这样，我们就能用sublime创建一个json文件，然后用mongoimport命令导入，这样学习数据库非常方便。 Robomongo 和 Mongochef Robomongo 是一个基于 Shell 的跨平台开源 MongoDB 可视化管理工具，支持 Windows、Linux 和 Mac，嵌入了 JavaScript 引擎和 MongoDB mongo，只要你会使用 mongo shell，你就会使用 Robomongo，它还提了供语法高亮、自动补全、差别视图等。 下载地址https://robomongo.org/download MongoChefMongoChef 是另一款强大的 MongoDB 可视化管理工具，支持 Windows、Linux 和 Mac。 MongoChef 下载地址，我们选择左侧的非商业用途的免费版下载。https://studio3t.com/#mongochef-download-compare]]></content>
      <categories>
        <category>后端</category>
      </categories>
      <tags>
        <tag>mongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[1.1 nodejs 安装]]></title>
    <url>%2F2017%2F10%2F11%2F%E5%90%8E%E7%AB%AF%2F1.1%20nodejs%20%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[1 windows下载地址next next 安装 2 Mac先安装一个 nvm（https://github.com/creationix/nvm） 1curl -o- https://raw.githubusercontent.com/creationix/vm/v0.25.2/install.sh | bash 检查nvm1nvm 安装 Node.js12nvm install 0.12nvm install node 安装完成后，查看一下 1node -v 3 centosRun as root on RHEL, CentOS or Fedora, for Node.js v4 LTS Argon:1curl --silent --location https://rpm.nodesource.com/setup_4.x | bash - Alternatively for Node.js v6:1curl --silent --location https://rpm.nodesource.com/setup_6.x | bash - Alternatively for Node.js 0.10:1curl --silent --location https://rpm.nodesource.com/setup | bash - Then install, as root:1yum -y install nodejs 就这样，不能再简单。]]></content>
      <categories>
        <category>后端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
</search>
